var Qf=n=>{throw TypeError(n)};var Fc=(n,s,r)=>s.has(n)||Qf("Cannot "+r);var S=(n,s,r)=>(Fc(n,s,"read from private field"),r?r.call(n):s.get(n)),ge=(n,s,r)=>s.has(n)?Qf("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(n):s.set(n,r),ae=(n,s,r,l)=>(Fc(n,s,"write to private field"),l?l.call(n,r):s.set(n,r),r),ke=(n,s,r)=>(Fc(n,s,"access private method"),r);var Pl=(n,s,r,l)=>({set _(o){ae(n,s,o,r)},get _(){return S(n,s,l)}});function lx(n,s){for(var r=0;r<s.length;r++){const l=s[r];if(typeof l!="string"&&!Array.isArray(l)){for(const o in l)if(o!=="default"&&!(o in n)){const u=Object.getOwnPropertyDescriptor(l,o);u&&Object.defineProperty(n,o,u.get?u:{enumerable:!0,get:()=>l[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(o){if(o.ep)return;o.ep=!0;const u=r(o);fetch(o.href,u)}})();function ip(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function ox(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var s=n.default;if(typeof s=="function"){var r=function l(){return this instanceof l?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};r.prototype=s.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(n).forEach(function(l){var o=Object.getOwnPropertyDescriptor(n,l);Object.defineProperty(r,l,o.get?o:{enumerable:!0,get:function(){return n[l]}})}),r}var zc={exports:{}},Zi={},qc={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hf;function cx(){if(Hf)return Ce;Hf=1;var n=Symbol.for("react.element"),s=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function b(k){return k===null||typeof k!="object"?null:(k=v&&k[v]||k["@@iterator"],typeof k=="function"?k:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,P={};function w(k,z,he){this.props=k,this.context=z,this.refs=P,this.updater=he||E}w.prototype.isReactComponent={},w.prototype.setState=function(k,z){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,z,"setState")},w.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function A(){}A.prototype=w.prototype;function M(k,z,he){this.props=k,this.context=z,this.refs=P,this.updater=he||E}var L=M.prototype=new A;L.constructor=M,N(L,w.prototype),L.isPureReactComponent=!0;var R=Array.isArray,$=Object.prototype.hasOwnProperty,W={current:null},se={key:!0,ref:!0,__self:!0,__source:!0};function le(k,z,he){var me,pe={},_e=null,Pe=null;if(z!=null)for(me in z.ref!==void 0&&(Pe=z.ref),z.key!==void 0&&(_e=""+z.key),z)$.call(z,me)&&!se.hasOwnProperty(me)&&(pe[me]=z[me]);var Se=arguments.length-2;if(Se===1)pe.children=he;else if(1<Se){for(var Ie=Array(Se),B=0;B<Se;B++)Ie[B]=arguments[B+2];pe.children=Ie}if(k&&k.defaultProps)for(me in Se=k.defaultProps,Se)pe[me]===void 0&&(pe[me]=Se[me]);return{$$typeof:n,type:k,key:_e,ref:Pe,props:pe,_owner:W.current}}function we(k,z){return{$$typeof:n,type:k.type,key:z,ref:k.ref,props:k.props,_owner:k._owner}}function _(k){return typeof k=="object"&&k!==null&&k.$$typeof===n}function Q(k){var z={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(he){return z[he]})}var U=/\/+/g;function te(k,z){return typeof k=="object"&&k!==null&&k.key!=null?Q(""+k.key):z.toString(36)}function q(k,z,he,me,pe){var _e=typeof k;(_e==="undefined"||_e==="boolean")&&(k=null);var Pe=!1;if(k===null)Pe=!0;else switch(_e){case"string":case"number":Pe=!0;break;case"object":switch(k.$$typeof){case n:case s:Pe=!0}}if(Pe)return Pe=k,pe=pe(Pe),k=me===""?"."+te(Pe,0):me,R(pe)?(he="",k!=null&&(he=k.replace(U,"$&/")+"/"),q(pe,z,he,"",function(B){return B})):pe!=null&&(_(pe)&&(pe=we(pe,he+(!pe.key||Pe&&Pe.key===pe.key?"":(""+pe.key).replace(U,"$&/")+"/")+k)),z.push(pe)),1;if(Pe=0,me=me===""?".":me+":",R(k))for(var Se=0;Se<k.length;Se++){_e=k[Se];var Ie=me+te(_e,Se);Pe+=q(_e,z,he,Ie,pe)}else if(Ie=b(k),typeof Ie=="function")for(k=Ie.call(k),Se=0;!(_e=k.next()).done;)_e=_e.value,Ie=me+te(_e,Se++),Pe+=q(_e,z,he,Ie,pe);else if(_e==="object")throw z=String(k),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return Pe}function J(k,z,he){if(k==null)return k;var me=[],pe=0;return q(k,me,"","",function(_e){return z.call(he,_e,pe++)}),me}function G(k){if(k._status===-1){var z=k._result;z=z(),z.then(function(he){(k._status===0||k._status===-1)&&(k._status=1,k._result=he)},function(he){(k._status===0||k._status===-1)&&(k._status=2,k._result=he)}),k._status===-1&&(k._status=0,k._result=z)}if(k._status===1)return k._result.default;throw k._result}var ne={current:null},H={transition:null},re={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:H,ReactCurrentOwner:W};function X(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:J,forEach:function(k,z,he){J(k,function(){z.apply(this,arguments)},he)},count:function(k){var z=0;return J(k,function(){z++}),z},toArray:function(k){return J(k,function(z){return z})||[]},only:function(k){if(!_(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Ce.Component=w,Ce.Fragment=r,Ce.Profiler=o,Ce.PureComponent=M,Ce.StrictMode=l,Ce.Suspense=p,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,Ce.act=X,Ce.cloneElement=function(k,z,he){if(k==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+k+".");var me=N({},k.props),pe=k.key,_e=k.ref,Pe=k._owner;if(z!=null){if(z.ref!==void 0&&(_e=z.ref,Pe=W.current),z.key!==void 0&&(pe=""+z.key),k.type&&k.type.defaultProps)var Se=k.type.defaultProps;for(Ie in z)$.call(z,Ie)&&!se.hasOwnProperty(Ie)&&(me[Ie]=z[Ie]===void 0&&Se!==void 0?Se[Ie]:z[Ie])}var Ie=arguments.length-2;if(Ie===1)me.children=he;else if(1<Ie){Se=Array(Ie);for(var B=0;B<Ie;B++)Se[B]=arguments[B+2];me.children=Se}return{$$typeof:n,type:k.type,key:pe,ref:_e,props:me,_owner:Pe}},Ce.createContext=function(k){return k={$$typeof:d,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},k.Provider={$$typeof:u,_context:k},k.Consumer=k},Ce.createElement=le,Ce.createFactory=function(k){var z=le.bind(null,k);return z.type=k,z},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(k){return{$$typeof:m,render:k}},Ce.isValidElement=_,Ce.lazy=function(k){return{$$typeof:y,_payload:{_status:-1,_result:k},_init:G}},Ce.memo=function(k,z){return{$$typeof:g,type:k,compare:z===void 0?null:z}},Ce.startTransition=function(k){var z=H.transition;H.transition={};try{k()}finally{H.transition=z}},Ce.unstable_act=X,Ce.useCallback=function(k,z){return ne.current.useCallback(k,z)},Ce.useContext=function(k){return ne.current.useContext(k)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(k){return ne.current.useDeferredValue(k)},Ce.useEffect=function(k,z){return ne.current.useEffect(k,z)},Ce.useId=function(){return ne.current.useId()},Ce.useImperativeHandle=function(k,z,he){return ne.current.useImperativeHandle(k,z,he)},Ce.useInsertionEffect=function(k,z){return ne.current.useInsertionEffect(k,z)},Ce.useLayoutEffect=function(k,z){return ne.current.useLayoutEffect(k,z)},Ce.useMemo=function(k,z){return ne.current.useMemo(k,z)},Ce.useReducer=function(k,z,he){return ne.current.useReducer(k,z,he)},Ce.useRef=function(k){return ne.current.useRef(k)},Ce.useState=function(k){return ne.current.useState(k)},Ce.useSyncExternalStore=function(k,z,he){return ne.current.useSyncExternalStore(k,z,he)},Ce.useTransition=function(){return ne.current.useTransition()},Ce.version="18.3.1",Ce}var Kf;function Du(){return Kf||(Kf=1,qc.exports=cx()),qc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vf;function ux(){if(Vf)return Zi;Vf=1;var n=Du(),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(m,p,g){var y,v={},b=null,E=null;g!==void 0&&(b=""+g),p.key!==void 0&&(b=""+p.key),p.ref!==void 0&&(E=p.ref);for(y in p)l.call(p,y)&&!u.hasOwnProperty(y)&&(v[y]=p[y]);if(m&&m.defaultProps)for(y in p=m.defaultProps,p)v[y]===void 0&&(v[y]=p[y]);return{$$typeof:s,type:m,key:b,ref:E,props:v,_owner:o.current}}return Zi.Fragment=r,Zi.jsx=d,Zi.jsxs=d,Zi}var Gf;function dx(){return Gf||(Gf=1,zc.exports=ux()),zc.exports}var i=dx(),O=Du();const zn=ip(O),hx=lx({__proto__:null,default:zn},[O]);var Rl={},Bc={exports:{}},Tt={},Wc={exports:{}},Qc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jf;function fx(){return Jf||(Jf=1,function(n){function s(H,re){var X=H.length;H.push(re);e:for(;0<X;){var k=X-1>>>1,z=H[k];if(0<o(z,re))H[k]=re,H[X]=z,X=k;else break e}}function r(H){return H.length===0?null:H[0]}function l(H){if(H.length===0)return null;var re=H[0],X=H.pop();if(X!==re){H[0]=X;e:for(var k=0,z=H.length,he=z>>>1;k<he;){var me=2*(k+1)-1,pe=H[me],_e=me+1,Pe=H[_e];if(0>o(pe,X))_e<z&&0>o(Pe,pe)?(H[k]=Pe,H[_e]=X,k=_e):(H[k]=pe,H[me]=X,k=me);else if(_e<z&&0>o(Pe,X))H[k]=Pe,H[_e]=X,k=_e;else break e}}return re}function o(H,re){var X=H.sortIndex-re.sortIndex;return X!==0?X:H.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();n.unstable_now=function(){return d.now()-m}}var p=[],g=[],y=1,v=null,b=3,E=!1,N=!1,P=!1,w=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(H){for(var re=r(g);re!==null;){if(re.callback===null)l(g);else if(re.startTime<=H)l(g),re.sortIndex=re.expirationTime,s(p,re);else break;re=r(g)}}function R(H){if(P=!1,L(H),!N)if(r(p)!==null)N=!0,G($);else{var re=r(g);re!==null&&ne(R,re.startTime-H)}}function $(H,re){N=!1,P&&(P=!1,A(le),le=-1),E=!0;var X=b;try{for(L(re),v=r(p);v!==null&&(!(v.expirationTime>re)||H&&!Q());){var k=v.callback;if(typeof k=="function"){v.callback=null,b=v.priorityLevel;var z=k(v.expirationTime<=re);re=n.unstable_now(),typeof z=="function"?v.callback=z:v===r(p)&&l(p),L(re)}else l(p);v=r(p)}if(v!==null)var he=!0;else{var me=r(g);me!==null&&ne(R,me.startTime-re),he=!1}return he}finally{v=null,b=X,E=!1}}var W=!1,se=null,le=-1,we=5,_=-1;function Q(){return!(n.unstable_now()-_<we)}function U(){if(se!==null){var H=n.unstable_now();_=H;var re=!0;try{re=se(!0,H)}finally{re?te():(W=!1,se=null)}}else W=!1}var te;if(typeof M=="function")te=function(){M(U)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,J=q.port2;q.port1.onmessage=U,te=function(){J.postMessage(null)}}else te=function(){w(U,0)};function G(H){se=H,W||(W=!0,te())}function ne(H,re){le=w(function(){H(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){N||E||(N=!0,G($))},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):we=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return r(p)},n.unstable_next=function(H){switch(b){case 1:case 2:case 3:var re=3;break;default:re=b}var X=b;b=re;try{return H()}finally{b=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,re){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var X=b;b=H;try{return re()}finally{b=X}},n.unstable_scheduleCallback=function(H,re,X){var k=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?k+X:k):X=k,H){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=X+z,H={id:y++,callback:re,priorityLevel:H,startTime:X,expirationTime:z,sortIndex:-1},X>k?(H.sortIndex=X,s(g,H),r(p)===null&&H===r(g)&&(P?(A(le),le=-1):P=!0,ne(R,X-k))):(H.sortIndex=z,s(p,H),N||E||(N=!0,G($))),H},n.unstable_shouldYield=Q,n.unstable_wrapCallback=function(H){var re=b;return function(){var X=b;b=re;try{return H.apply(this,arguments)}finally{b=X}}}}(Qc)),Qc}var Yf;function mx(){return Yf||(Yf=1,Wc.exports=fx()),Wc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xf;function px(){if(Xf)return Tt;Xf=1;var n=Du(),s=mx();function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,o={};function u(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(o[e]=t,e=0;e<t.length;e++)l.add(t[e])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},v={};function b(e){return p.call(v,e)?!0:p.call(y,e)?!1:g.test(e)?v[e]=!0:(y[e]=!0,!1)}function E(e,t,a,c){if(a!==null&&a.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function N(e,t,a,c){if(t===null||typeof t>"u"||E(e,t,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function P(e,t,a,c,h,f,x){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=c,this.attributeNamespace=h,this.mustUseProperty=a,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=x}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){w[e]=new P(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];w[t]=new P(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){w[e]=new P(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){w[e]=new P(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){w[e]=new P(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){w[e]=new P(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){w[e]=new P(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){w[e]=new P(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){w[e]=new P(e,5,!1,e.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function M(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(A,M);w[t]=new P(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(A,M);w[t]=new P(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(A,M);w[t]=new P(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){w[e]=new P(e,1,!1,e.toLowerCase(),null,!1,!1)}),w.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){w[e]=new P(e,1,!1,e.toLowerCase(),null,!0,!0)});function L(e,t,a,c){var h=w.hasOwnProperty(t)?w[t]:null;(h!==null?h.type!==0:c||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(N(t,a,h,c)&&(a=null),c||h===null?b(t)&&(a===null?e.removeAttribute(t):e.setAttribute(t,""+a)):h.mustUseProperty?e[h.propertyName]=a===null?h.type===3?!1:"":a:(t=h.attributeName,c=h.attributeNamespace,a===null?e.removeAttribute(t):(h=h.type,a=h===3||h===4&&a===!0?"":""+a,c?e.setAttributeNS(c,t,a):e.setAttribute(t,a))))}var R=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),W=Symbol.for("react.portal"),se=Symbol.for("react.fragment"),le=Symbol.for("react.strict_mode"),we=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),Q=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),H=Symbol.iterator;function re(e){return e===null||typeof e!="object"?null:(e=H&&e[H]||e["@@iterator"],typeof e=="function"?e:null)}var X=Object.assign,k;function z(e){if(k===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);k=t&&t[1]||""}return`
`+k+e}var he=!1;function me(e,t){if(!e||he)return"";he=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(F){var c=F}Reflect.construct(e,[],t)}else{try{t.call()}catch(F){c=F}e.call(t.prototype)}else{try{throw Error()}catch(F){c=F}e()}}catch(F){if(F&&c&&typeof F.stack=="string"){for(var h=F.stack.split(`
`),f=c.stack.split(`
`),x=h.length-1,j=f.length-1;1<=x&&0<=j&&h[x]!==f[j];)j--;for(;1<=x&&0<=j;x--,j--)if(h[x]!==f[j]){if(x!==1||j!==1)do if(x--,j--,0>j||h[x]!==f[j]){var C=`
`+h[x].replace(" at new "," at ");return e.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",e.displayName)),C}while(1<=x&&0<=j);break}}}finally{he=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?z(e):""}function pe(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=me(e.type,!1),e;case 11:return e=me(e.type.render,!1),e;case 1:return e=me(e.type,!0),e;default:return""}}function _e(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case se:return"Fragment";case W:return"Portal";case we:return"Profiler";case le:return"StrictMode";case te:return"Suspense";case q:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Q:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case U:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case J:return t=e.displayName||null,t!==null?t:_e(e.type)||"Memo";case G:t=e._payload,e=e._init;try{return _e(e(t))}catch{}}return null}function Pe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _e(t);case 8:return t===le?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Se(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ie(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function B(e){var t=Ie(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),c=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return h.call(this)},set:function(x){c=""+x,f.call(this,x)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(x){c=""+x},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function be(e){e._valueTracker||(e._valueTracker=B(e))}function Te(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),c="";return e&&(c=Ie(e)?e.checked?"true":"false":e.value),e=c,e!==a?(t.setValue(e),!0):!1}function ze(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ps(e,t){var a=t.checked;return X({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function ns(e,t){var a=t.defaultValue==null?"":t.defaultValue,c=t.checked!=null?t.checked:t.defaultChecked;a=Se(t.value!=null?t.value:a),e._wrapperState={initialChecked:c,initialValue:a,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Is(e,t){t=t.checked,t!=null&&L(e,"checked",t,!1)}function Nr(e,t){Is(e,t);var a=Se(t.value),c=t.type;if(a!=null)c==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(c==="submit"||c==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Vl(e,t.type,a):t.hasOwnProperty("defaultValue")&&Vl(e,t.type,Se(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function fi(e,t,a){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var c=t.type;if(!(c!=="submit"&&c!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,a||t===e.value||(e.value=t),e.defaultValue=t}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function Vl(e,t,a){(t!=="number"||ze(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var mi=Array.isArray;function rn(e,t,a,c){if(e=e.options,t){t={};for(var h=0;h<a.length;h++)t["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=t.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&c&&(e[a].defaultSelected=!0)}else{for(a=""+Se(a),t=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,c&&(e[h].defaultSelected=!0);return}t!==null||e[h].disabled||(t=e[h])}t!==null&&(t.selected=!0)}}function Gl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(r(91));return X({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ed(e,t){var a=t.value;if(a==null){if(a=t.children,t=t.defaultValue,a!=null){if(t!=null)throw Error(r(92));if(mi(a)){if(1<a.length)throw Error(r(93));a=a[0]}t=a}t==null&&(t=""),a=t}e._wrapperState={initialValue:Se(a)}}function td(e,t){var a=Se(t.value),c=Se(t.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),t.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),c!=null&&(e.defaultValue=""+c)}function sd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function rd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?rd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ba,nd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,a,c,h){MSApp.execUnsafeLocalFunction(function(){return e(t,a,c,h)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ba=ba||document.createElement("div"),ba.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ba.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function pi(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var gi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dg=["Webkit","ms","Moz","O"];Object.keys(gi).forEach(function(e){dg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gi[t]=gi[e]})});function id(e,t,a){return t==null||typeof t=="boolean"||t===""?"":a||typeof t!="number"||t===0||gi.hasOwnProperty(e)&&gi[e]?(""+t).trim():t+"px"}function ad(e,t){e=e.style;for(var a in t)if(t.hasOwnProperty(a)){var c=a.indexOf("--")===0,h=id(a,t[a],c);a==="float"&&(a="cssFloat"),c?e.setProperty(a,h):e[a]=h}}var hg=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yl(e,t){if(t){if(hg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(r(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(t.style!=null&&typeof t.style!="object")throw Error(r(62))}}function Xl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zl=null;function eo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var to=null,nn=null,an=null;function ld(e){if(e=Ui(e)){if(typeof to!="function")throw Error(r(280));var t=e.stateNode;t&&(t=Wa(t),to(e.stateNode,e.type,t))}}function od(e){nn?an?an.push(e):an=[e]:nn=e}function cd(){if(nn){var e=nn,t=an;if(an=nn=null,ld(e),t)for(e=0;e<t.length;e++)ld(t[e])}}function ud(e,t){return e(t)}function dd(){}var so=!1;function hd(e,t,a){if(so)return e(t,a);so=!0;try{return ud(e,t,a)}finally{so=!1,(nn!==null||an!==null)&&(dd(),cd())}}function xi(e,t){var a=e.stateNode;if(a===null)return null;var c=Wa(a);if(c===null)return null;a=c[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,t,typeof a));return a}var ro=!1;if(m)try{var vi={};Object.defineProperty(vi,"passive",{get:function(){ro=!0}}),window.addEventListener("test",vi,vi),window.removeEventListener("test",vi,vi)}catch{ro=!1}function fg(e,t,a,c,h,f,x,j,C){var F=Array.prototype.slice.call(arguments,3);try{t.apply(a,F)}catch(V){this.onError(V)}}var yi=!1,ja=null,_a=!1,no=null,mg={onError:function(e){yi=!0,ja=e}};function pg(e,t,a,c,h,f,x,j,C){yi=!1,ja=null,fg.apply(mg,arguments)}function gg(e,t,a,c,h,f,x,j,C){if(pg.apply(this,arguments),yi){if(yi){var F=ja;yi=!1,ja=null}else throw Error(r(198));_a||(_a=!0,no=F)}}function kr(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function fd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function md(e){if(kr(e)!==e)throw Error(r(188))}function xg(e){var t=e.alternate;if(!t){if(t=kr(e),t===null)throw Error(r(188));return t!==e?null:e}for(var a=e,c=t;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(c=h.return,c!==null){a=c;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return md(h),e;if(f===c)return md(h),t;f=f.sibling}throw Error(r(188))}if(a.return!==c.return)a=h,c=f;else{for(var x=!1,j=h.child;j;){if(j===a){x=!0,a=h,c=f;break}if(j===c){x=!0,c=h,a=f;break}j=j.sibling}if(!x){for(j=f.child;j;){if(j===a){x=!0,a=f,c=h;break}if(j===c){x=!0,c=f,a=h;break}j=j.sibling}if(!x)throw Error(r(189))}}if(a.alternate!==c)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:t}function pd(e){return e=xg(e),e!==null?gd(e):null}function gd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=gd(e);if(t!==null)return t;e=e.sibling}return null}var xd=s.unstable_scheduleCallback,vd=s.unstable_cancelCallback,vg=s.unstable_shouldYield,yg=s.unstable_requestPaint,Ke=s.unstable_now,wg=s.unstable_getCurrentPriorityLevel,io=s.unstable_ImmediatePriority,yd=s.unstable_UserBlockingPriority,Na=s.unstable_NormalPriority,bg=s.unstable_LowPriority,wd=s.unstable_IdlePriority,ka=null,is=null;function jg(e){if(is&&typeof is.onCommitFiberRoot=="function")try{is.onCommitFiberRoot(ka,e,void 0,(e.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:kg,_g=Math.log,Ng=Math.LN2;function kg(e){return e>>>=0,e===0?32:31-(_g(e)/Ng|0)|0}var Sa=64,Ca=4194304;function wi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ea(e,t){var a=e.pendingLanes;if(a===0)return 0;var c=0,h=e.suspendedLanes,f=e.pingedLanes,x=a&268435455;if(x!==0){var j=x&~h;j!==0?c=wi(j):(f&=x,f!==0&&(c=wi(f)))}else x=a&~h,x!==0?c=wi(x):f!==0&&(c=wi(f));if(c===0)return 0;if(t!==0&&t!==c&&(t&h)===0&&(h=c&-c,f=t&-t,h>=f||h===16&&(f&4194240)!==0))return t;if((c&4)!==0&&(c|=a&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=c;0<t;)a=31-Kt(t),h=1<<a,c|=e[a],t&=~h;return c}function Sg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cg(e,t){for(var a=e.suspendedLanes,c=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes;0<f;){var x=31-Kt(f),j=1<<x,C=h[x];C===-1?((j&a)===0||(j&c)!==0)&&(h[x]=Sg(j,t)):C<=t&&(e.expiredLanes|=j),f&=~j}}function ao(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function bd(){var e=Sa;return Sa<<=1,(Sa&4194240)===0&&(Sa=64),e}function lo(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function bi(e,t,a){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kt(t),e[t]=a}function Eg(e,t){var a=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var c=e.eventTimes;for(e=e.expirationTimes;0<a;){var h=31-Kt(a),f=1<<h;t[h]=0,c[h]=-1,e[h]=-1,a&=~f}}function oo(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var c=31-Kt(a),h=1<<c;h&t|e[c]&t&&(e[c]|=t),a&=~h}}var De=0;function jd(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var _d,co,Nd,kd,Sd,uo=!1,Pa=[],Ls=null,Ds=null,Ms=null,ji=new Map,_i=new Map,Us=[],Pg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cd(e,t){switch(e){case"focusin":case"focusout":Ls=null;break;case"dragenter":case"dragleave":Ds=null;break;case"mouseover":case"mouseout":Ms=null;break;case"pointerover":case"pointerout":ji.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_i.delete(t.pointerId)}}function Ni(e,t,a,c,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:a,eventSystemFlags:c,nativeEvent:f,targetContainers:[h]},t!==null&&(t=Ui(t),t!==null&&co(t)),e):(e.eventSystemFlags|=c,t=e.targetContainers,h!==null&&t.indexOf(h)===-1&&t.push(h),e)}function Rg(e,t,a,c,h){switch(t){case"focusin":return Ls=Ni(Ls,e,t,a,c,h),!0;case"dragenter":return Ds=Ni(Ds,e,t,a,c,h),!0;case"mouseover":return Ms=Ni(Ms,e,t,a,c,h),!0;case"pointerover":var f=h.pointerId;return ji.set(f,Ni(ji.get(f)||null,e,t,a,c,h)),!0;case"gotpointercapture":return f=h.pointerId,_i.set(f,Ni(_i.get(f)||null,e,t,a,c,h)),!0}return!1}function Ed(e){var t=Sr(e.target);if(t!==null){var a=kr(t);if(a!==null){if(t=a.tag,t===13){if(t=fd(a),t!==null){e.blockedOn=t,Sd(e.priority,function(){Nd(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ra(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=fo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var c=new a.constructor(a.type,a);Zl=c,a.target.dispatchEvent(c),Zl=null}else return t=Ui(a),t!==null&&co(t),e.blockedOn=a,!1;t.shift()}return!0}function Pd(e,t,a){Ra(e)&&a.delete(t)}function Tg(){uo=!1,Ls!==null&&Ra(Ls)&&(Ls=null),Ds!==null&&Ra(Ds)&&(Ds=null),Ms!==null&&Ra(Ms)&&(Ms=null),ji.forEach(Pd),_i.forEach(Pd)}function ki(e,t){e.blockedOn===t&&(e.blockedOn=null,uo||(uo=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Tg)))}function Si(e){function t(h){return ki(h,e)}if(0<Pa.length){ki(Pa[0],e);for(var a=1;a<Pa.length;a++){var c=Pa[a];c.blockedOn===e&&(c.blockedOn=null)}}for(Ls!==null&&ki(Ls,e),Ds!==null&&ki(Ds,e),Ms!==null&&ki(Ms,e),ji.forEach(t),_i.forEach(t),a=0;a<Us.length;a++)c=Us[a],c.blockedOn===e&&(c.blockedOn=null);for(;0<Us.length&&(a=Us[0],a.blockedOn===null);)Ed(a),a.blockedOn===null&&Us.shift()}var ln=R.ReactCurrentBatchConfig,Ta=!0;function Ag(e,t,a,c){var h=De,f=ln.transition;ln.transition=null;try{De=1,ho(e,t,a,c)}finally{De=h,ln.transition=f}}function Og(e,t,a,c){var h=De,f=ln.transition;ln.transition=null;try{De=4,ho(e,t,a,c)}finally{De=h,ln.transition=f}}function ho(e,t,a,c){if(Ta){var h=fo(e,t,a,c);if(h===null)Ro(e,t,c,Aa,a),Cd(e,c);else if(Rg(h,e,t,a,c))c.stopPropagation();else if(Cd(e,c),t&4&&-1<Pg.indexOf(e)){for(;h!==null;){var f=Ui(h);if(f!==null&&_d(f),f=fo(e,t,a,c),f===null&&Ro(e,t,c,Aa,a),f===h)break;h=f}h!==null&&c.stopPropagation()}else Ro(e,t,c,null,a)}}var Aa=null;function fo(e,t,a,c){if(Aa=null,e=eo(c),e=Sr(e),e!==null)if(t=kr(e),t===null)e=null;else if(a=t.tag,a===13){if(e=fd(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Aa=e,null}function Rd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wg()){case io:return 1;case yd:return 4;case Na:case bg:return 16;case wd:return 536870912;default:return 16}default:return 16}}var $s=null,mo=null,Oa=null;function Td(){if(Oa)return Oa;var e,t=mo,a=t.length,c,h="value"in $s?$s.value:$s.textContent,f=h.length;for(e=0;e<a&&t[e]===h[e];e++);var x=a-e;for(c=1;c<=x&&t[a-c]===h[f-c];c++);return Oa=h.slice(e,1<c?1-c:void 0)}function Ia(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function La(){return!0}function Ad(){return!1}function It(e){function t(a,c,h,f,x){this._reactName=a,this._targetInst=h,this.type=c,this.nativeEvent=f,this.target=x,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(a=e[j],this[j]=a?a(f):f[j]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?La:Ad,this.isPropagationStopped=Ad,this}return X(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=La)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=La)},persist:function(){},isPersistent:La}),t}var on={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},po=It(on),Ci=X({},on,{view:0,detail:0}),Ig=It(Ci),go,xo,Ei,Da=X({},Ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ei&&(Ei&&e.type==="mousemove"?(go=e.screenX-Ei.screenX,xo=e.screenY-Ei.screenY):xo=go=0,Ei=e),go)},movementY:function(e){return"movementY"in e?e.movementY:xo}}),Od=It(Da),Lg=X({},Da,{dataTransfer:0}),Dg=It(Lg),Mg=X({},Ci,{relatedTarget:0}),vo=It(Mg),Ug=X({},on,{animationName:0,elapsedTime:0,pseudoElement:0}),$g=It(Ug),Fg=X({},on,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),zg=It(Fg),qg=X({},on,{data:0}),Id=It(qg),Bg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Qg[e])?!!t[e]:!1}function yo(){return Hg}var Kg=X({},Ci,{key:function(e){if(e.key){var t=Bg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ia(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yo,charCode:function(e){return e.type==="keypress"?Ia(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ia(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Vg=It(Kg),Gg=X({},Da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ld=It(Gg),Jg=X({},Ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yo}),Yg=It(Jg),Xg=X({},on,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zg=It(Xg),e0=X({},Da,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),t0=It(e0),s0=[9,13,27,32],wo=m&&"CompositionEvent"in window,Pi=null;m&&"documentMode"in document&&(Pi=document.documentMode);var r0=m&&"TextEvent"in window&&!Pi,Dd=m&&(!wo||Pi&&8<Pi&&11>=Pi),Md=" ",Ud=!1;function $d(e,t){switch(e){case"keyup":return s0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cn=!1;function n0(e,t){switch(e){case"compositionend":return Fd(t);case"keypress":return t.which!==32?null:(Ud=!0,Md);case"textInput":return e=t.data,e===Md&&Ud?null:e;default:return null}}function i0(e,t){if(cn)return e==="compositionend"||!wo&&$d(e,t)?(e=Td(),Oa=mo=$s=null,cn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dd&&t.locale!=="ko"?null:t.data;default:return null}}var a0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!a0[e.type]:t==="textarea"}function qd(e,t,a,c){od(c),t=za(t,"onChange"),0<t.length&&(a=new po("onChange","change",null,a,c),e.push({event:a,listeners:t}))}var Ri=null,Ti=null;function l0(e){ah(e,0)}function Ma(e){var t=mn(e);if(Te(t))return e}function o0(e,t){if(e==="change")return t}var Bd=!1;if(m){var bo;if(m){var jo="oninput"in document;if(!jo){var Wd=document.createElement("div");Wd.setAttribute("oninput","return;"),jo=typeof Wd.oninput=="function"}bo=jo}else bo=!1;Bd=bo&&(!document.documentMode||9<document.documentMode)}function Qd(){Ri&&(Ri.detachEvent("onpropertychange",Hd),Ti=Ri=null)}function Hd(e){if(e.propertyName==="value"&&Ma(Ti)){var t=[];qd(t,Ti,e,eo(e)),hd(l0,t)}}function c0(e,t,a){e==="focusin"?(Qd(),Ri=t,Ti=a,Ri.attachEvent("onpropertychange",Hd)):e==="focusout"&&Qd()}function u0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ma(Ti)}function d0(e,t){if(e==="click")return Ma(t)}function h0(e,t){if(e==="input"||e==="change")return Ma(t)}function f0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vt=typeof Object.is=="function"?Object.is:f0;function Ai(e,t){if(Vt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),c=Object.keys(t);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var h=a[c];if(!p.call(t,h)||!Vt(e[h],t[h]))return!1}return!0}function Kd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vd(e,t){var a=Kd(e);e=0;for(var c;a;){if(a.nodeType===3){if(c=e+a.textContent.length,e<=t&&c>=t)return{node:a,offset:t-e};e=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Kd(a)}}function Gd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Gd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Jd(){for(var e=window,t=ze();t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=ze(e.document)}return t}function _o(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function m0(e){var t=Jd(),a=e.focusedElem,c=e.selectionRange;if(t!==a&&a&&a.ownerDocument&&Gd(a.ownerDocument.documentElement,a)){if(c!==null&&_o(a)){if(t=c.start,e=c.end,e===void 0&&(e=t),"selectionStart"in a)a.selectionStart=t,a.selectionEnd=Math.min(e,a.value.length);else if(e=(t=a.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var h=a.textContent.length,f=Math.min(c.start,h);c=c.end===void 0?f:Math.min(c.end,h),!e.extend&&f>c&&(h=c,c=f,f=h),h=Vd(a,f);var x=Vd(a,c);h&&x&&(e.rangeCount!==1||e.anchorNode!==h.node||e.anchorOffset!==h.offset||e.focusNode!==x.node||e.focusOffset!==x.offset)&&(t=t.createRange(),t.setStart(h.node,h.offset),e.removeAllRanges(),f>c?(e.addRange(t),e.extend(x.node,x.offset)):(t.setEnd(x.node,x.offset),e.addRange(t)))}}for(t=[],e=a;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<t.length;a++)e=t[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var p0=m&&"documentMode"in document&&11>=document.documentMode,un=null,No=null,Oi=null,ko=!1;function Yd(e,t,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ko||un==null||un!==ze(c)||(c=un,"selectionStart"in c&&_o(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Oi&&Ai(Oi,c)||(Oi=c,c=za(No,"onSelect"),0<c.length&&(t=new po("onSelect","select",null,t,a),e.push({event:t,listeners:c}),t.target=un)))}function Ua(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var dn={animationend:Ua("Animation","AnimationEnd"),animationiteration:Ua("Animation","AnimationIteration"),animationstart:Ua("Animation","AnimationStart"),transitionend:Ua("Transition","TransitionEnd")},So={},Xd={};m&&(Xd=document.createElement("div").style,"AnimationEvent"in window||(delete dn.animationend.animation,delete dn.animationiteration.animation,delete dn.animationstart.animation),"TransitionEvent"in window||delete dn.transitionend.transition);function $a(e){if(So[e])return So[e];if(!dn[e])return e;var t=dn[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Xd)return So[e]=t[a];return e}var Zd=$a("animationend"),eh=$a("animationiteration"),th=$a("animationstart"),sh=$a("transitionend"),rh=new Map,nh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fs(e,t){rh.set(e,t),u(t,[e])}for(var Co=0;Co<nh.length;Co++){var Eo=nh[Co],g0=Eo.toLowerCase(),x0=Eo[0].toUpperCase()+Eo.slice(1);Fs(g0,"on"+x0)}Fs(Zd,"onAnimationEnd"),Fs(eh,"onAnimationIteration"),Fs(th,"onAnimationStart"),Fs("dblclick","onDoubleClick"),Fs("focusin","onFocus"),Fs("focusout","onBlur"),Fs(sh,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),v0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ii));function ih(e,t,a){var c=e.type||"unknown-event";e.currentTarget=a,gg(c,t,void 0,e),e.currentTarget=null}function ah(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var c=e[a],h=c.event;c=c.listeners;e:{var f=void 0;if(t)for(var x=c.length-1;0<=x;x--){var j=c[x],C=j.instance,F=j.currentTarget;if(j=j.listener,C!==f&&h.isPropagationStopped())break e;ih(h,j,F),f=C}else for(x=0;x<c.length;x++){if(j=c[x],C=j.instance,F=j.currentTarget,j=j.listener,C!==f&&h.isPropagationStopped())break e;ih(h,j,F),f=C}}}if(_a)throw e=no,_a=!1,no=null,e}function $e(e,t){var a=t[Do];a===void 0&&(a=t[Do]=new Set);var c=e+"__bubble";a.has(c)||(lh(t,e,2,!1),a.add(c))}function Po(e,t,a){var c=0;t&&(c|=4),lh(a,e,c,t)}var Fa="_reactListening"+Math.random().toString(36).slice(2);function Li(e){if(!e[Fa]){e[Fa]=!0,l.forEach(function(a){a!=="selectionchange"&&(v0.has(a)||Po(a,!1,e),Po(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fa]||(t[Fa]=!0,Po("selectionchange",!1,t))}}function lh(e,t,a,c){switch(Rd(t)){case 1:var h=Ag;break;case 4:h=Og;break;default:h=ho}a=h.bind(null,t,a,e),h=void 0,!ro||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(h=!0),c?h!==void 0?e.addEventListener(t,a,{capture:!0,passive:h}):e.addEventListener(t,a,!0):h!==void 0?e.addEventListener(t,a,{passive:h}):e.addEventListener(t,a,!1)}function Ro(e,t,a,c,h){var f=c;if((t&1)===0&&(t&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var j=c.stateNode.containerInfo;if(j===h||j.nodeType===8&&j.parentNode===h)break;if(x===4)for(x=c.return;x!==null;){var C=x.tag;if((C===3||C===4)&&(C=x.stateNode.containerInfo,C===h||C.nodeType===8&&C.parentNode===h))return;x=x.return}for(;j!==null;){if(x=Sr(j),x===null)return;if(C=x.tag,C===5||C===6){c=f=x;continue e}j=j.parentNode}}c=c.return}hd(function(){var F=f,V=eo(a),Y=[];e:{var K=rh.get(e);if(K!==void 0){var ie=po,ce=e;switch(e){case"keypress":if(Ia(a)===0)break e;case"keydown":case"keyup":ie=Vg;break;case"focusin":ce="focus",ie=vo;break;case"focusout":ce="blur",ie=vo;break;case"beforeblur":case"afterblur":ie=vo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Od;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Dg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=Yg;break;case Zd:case eh:case th:ie=$g;break;case sh:ie=Zg;break;case"scroll":ie=Ig;break;case"wheel":ie=t0;break;case"copy":case"cut":case"paste":ie=zg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Ld}var de=(t&4)!==0,Ve=!de&&e==="scroll",I=de?K!==null?K+"Capture":null:K;de=[];for(var T=F,D;T!==null;){D=T;var Z=D.stateNode;if(D.tag===5&&Z!==null&&(D=Z,I!==null&&(Z=xi(T,I),Z!=null&&de.push(Di(T,Z,D)))),Ve)break;T=T.return}0<de.length&&(K=new ie(K,ce,null,a,V),Y.push({event:K,listeners:de}))}}if((t&7)===0){e:{if(K=e==="mouseover"||e==="pointerover",ie=e==="mouseout"||e==="pointerout",K&&a!==Zl&&(ce=a.relatedTarget||a.fromElement)&&(Sr(ce)||ce[gs]))break e;if((ie||K)&&(K=V.window===V?V:(K=V.ownerDocument)?K.defaultView||K.parentWindow:window,ie?(ce=a.relatedTarget||a.toElement,ie=F,ce=ce?Sr(ce):null,ce!==null&&(Ve=kr(ce),ce!==Ve||ce.tag!==5&&ce.tag!==6)&&(ce=null)):(ie=null,ce=F),ie!==ce)){if(de=Od,Z="onMouseLeave",I="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(de=Ld,Z="onPointerLeave",I="onPointerEnter",T="pointer"),Ve=ie==null?K:mn(ie),D=ce==null?K:mn(ce),K=new de(Z,T+"leave",ie,a,V),K.target=Ve,K.relatedTarget=D,Z=null,Sr(V)===F&&(de=new de(I,T+"enter",ce,a,V),de.target=D,de.relatedTarget=Ve,Z=de),Ve=Z,ie&&ce)t:{for(de=ie,I=ce,T=0,D=de;D;D=hn(D))T++;for(D=0,Z=I;Z;Z=hn(Z))D++;for(;0<T-D;)de=hn(de),T--;for(;0<D-T;)I=hn(I),D--;for(;T--;){if(de===I||I!==null&&de===I.alternate)break t;de=hn(de),I=hn(I)}de=null}else de=null;ie!==null&&oh(Y,K,ie,de,!1),ce!==null&&Ve!==null&&oh(Y,Ve,ce,de,!0)}}e:{if(K=F?mn(F):window,ie=K.nodeName&&K.nodeName.toLowerCase(),ie==="select"||ie==="input"&&K.type==="file")var fe=o0;else if(zd(K))if(Bd)fe=h0;else{fe=u0;var ve=c0}else(ie=K.nodeName)&&ie.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(fe=d0);if(fe&&(fe=fe(e,F))){qd(Y,fe,a,V);break e}ve&&ve(e,K,F),e==="focusout"&&(ve=K._wrapperState)&&ve.controlled&&K.type==="number"&&Vl(K,"number",K.value)}switch(ve=F?mn(F):window,e){case"focusin":(zd(ve)||ve.contentEditable==="true")&&(un=ve,No=F,Oi=null);break;case"focusout":Oi=No=un=null;break;case"mousedown":ko=!0;break;case"contextmenu":case"mouseup":case"dragend":ko=!1,Yd(Y,a,V);break;case"selectionchange":if(p0)break;case"keydown":case"keyup":Yd(Y,a,V)}var ye;if(wo)e:{switch(e){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else cn?$d(e,a)&&(je="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(je="onCompositionStart");je&&(Dd&&a.locale!=="ko"&&(cn||je!=="onCompositionStart"?je==="onCompositionEnd"&&cn&&(ye=Td()):($s=V,mo="value"in $s?$s.value:$s.textContent,cn=!0)),ve=za(F,je),0<ve.length&&(je=new Id(je,e,null,a,V),Y.push({event:je,listeners:ve}),ye?je.data=ye:(ye=Fd(a),ye!==null&&(je.data=ye)))),(ye=r0?n0(e,a):i0(e,a))&&(F=za(F,"onBeforeInput"),0<F.length&&(V=new Id("onBeforeInput","beforeinput",null,a,V),Y.push({event:V,listeners:F}),V.data=ye))}ah(Y,t)})}function Di(e,t,a){return{instance:e,listener:t,currentTarget:a}}function za(e,t){for(var a=t+"Capture",c=[];e!==null;){var h=e,f=h.stateNode;h.tag===5&&f!==null&&(h=f,f=xi(e,a),f!=null&&c.unshift(Di(e,f,h)),f=xi(e,t),f!=null&&c.push(Di(e,f,h))),e=e.return}return c}function hn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function oh(e,t,a,c,h){for(var f=t._reactName,x=[];a!==null&&a!==c;){var j=a,C=j.alternate,F=j.stateNode;if(C!==null&&C===c)break;j.tag===5&&F!==null&&(j=F,h?(C=xi(a,f),C!=null&&x.unshift(Di(a,C,j))):h||(C=xi(a,f),C!=null&&x.push(Di(a,C,j)))),a=a.return}x.length!==0&&e.push({event:t,listeners:x})}var y0=/\r\n?/g,w0=/\u0000|\uFFFD/g;function ch(e){return(typeof e=="string"?e:""+e).replace(y0,`
`).replace(w0,"")}function qa(e,t,a){if(t=ch(t),ch(e)!==t&&a)throw Error(r(425))}function Ba(){}var To=null,Ao=null;function Oo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Io=typeof setTimeout=="function"?setTimeout:void 0,b0=typeof clearTimeout=="function"?clearTimeout:void 0,uh=typeof Promise=="function"?Promise:void 0,j0=typeof queueMicrotask=="function"?queueMicrotask:typeof uh<"u"?function(e){return uh.resolve(null).then(e).catch(_0)}:Io;function _0(e){setTimeout(function(){throw e})}function Lo(e,t){var a=t,c=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(c===0){e.removeChild(h),Si(t);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=h}while(a);Si(t)}function zs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function dh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}var fn=Math.random().toString(36).slice(2),as="__reactFiber$"+fn,Mi="__reactProps$"+fn,gs="__reactContainer$"+fn,Do="__reactEvents$"+fn,N0="__reactListeners$"+fn,k0="__reactHandles$"+fn;function Sr(e){var t=e[as];if(t)return t;for(var a=e.parentNode;a;){if(t=a[gs]||a[as]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=dh(e);e!==null;){if(a=e[as])return a;e=dh(e)}return t}e=a,a=e.parentNode}return null}function Ui(e){return e=e[as]||e[gs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function mn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function Wa(e){return e[Mi]||null}var Mo=[],pn=-1;function qs(e){return{current:e}}function Fe(e){0>pn||(e.current=Mo[pn],Mo[pn]=null,pn--)}function Me(e,t){pn++,Mo[pn]=e.current,e.current=t}var Bs={},mt=qs(Bs),St=qs(!1),Cr=Bs;function gn(e,t){var a=e.type.contextTypes;if(!a)return Bs;var c=e.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===t)return c.__reactInternalMemoizedMaskedChildContext;var h={},f;for(f in a)h[f]=t[f];return c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=h),h}function Ct(e){return e=e.childContextTypes,e!=null}function Qa(){Fe(St),Fe(mt)}function hh(e,t,a){if(mt.current!==Bs)throw Error(r(168));Me(mt,t),Me(St,a)}function fh(e,t,a){var c=e.stateNode;if(t=t.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var h in c)if(!(h in t))throw Error(r(108,Pe(e)||"Unknown",h));return X({},a,c)}function Ha(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Bs,Cr=mt.current,Me(mt,e),Me(St,St.current),!0}function mh(e,t,a){var c=e.stateNode;if(!c)throw Error(r(169));a?(e=fh(e,t,Cr),c.__reactInternalMemoizedMergedChildContext=e,Fe(St),Fe(mt),Me(mt,e)):Fe(St),Me(St,a)}var xs=null,Ka=!1,Uo=!1;function ph(e){xs===null?xs=[e]:xs.push(e)}function S0(e){Ka=!0,ph(e)}function Ws(){if(!Uo&&xs!==null){Uo=!0;var e=0,t=De;try{var a=xs;for(De=1;e<a.length;e++){var c=a[e];do c=c(!0);while(c!==null)}xs=null,Ka=!1}catch(h){throw xs!==null&&(xs=xs.slice(e+1)),xd(io,Ws),h}finally{De=t,Uo=!1}}return null}var xn=[],vn=0,Va=null,Ga=0,$t=[],Ft=0,Er=null,vs=1,ys="";function Pr(e,t){xn[vn++]=Ga,xn[vn++]=Va,Va=e,Ga=t}function gh(e,t,a){$t[Ft++]=vs,$t[Ft++]=ys,$t[Ft++]=Er,Er=e;var c=vs;e=ys;var h=32-Kt(c)-1;c&=~(1<<h),a+=1;var f=32-Kt(t)+h;if(30<f){var x=h-h%5;f=(c&(1<<x)-1).toString(32),c>>=x,h-=x,vs=1<<32-Kt(t)+h|a<<h|c,ys=f+e}else vs=1<<f|a<<h|c,ys=e}function $o(e){e.return!==null&&(Pr(e,1),gh(e,1,0))}function Fo(e){for(;e===Va;)Va=xn[--vn],xn[vn]=null,Ga=xn[--vn],xn[vn]=null;for(;e===Er;)Er=$t[--Ft],$t[Ft]=null,ys=$t[--Ft],$t[Ft]=null,vs=$t[--Ft],$t[Ft]=null}var Lt=null,Dt=null,qe=!1,Gt=null;function xh(e,t){var a=Wt(5,null,null,0);a.elementType="DELETED",a.stateNode=t,a.return=e,t=e.deletions,t===null?(e.deletions=[a],e.flags|=16):t.push(a)}function vh(e,t){switch(e.tag){case 5:var a=e.type;return t=t.nodeType!==1||a.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Lt=e,Dt=zs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Lt=e,Dt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(a=Er!==null?{id:vs,overflow:ys}:null,e.memoizedState={dehydrated:t,treeContext:a,retryLane:1073741824},a=Wt(18,null,null,0),a.stateNode=t,a.return=e,e.child=a,Lt=e,Dt=null,!0):!1;default:return!1}}function zo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function qo(e){if(qe){var t=Dt;if(t){var a=t;if(!vh(e,t)){if(zo(e))throw Error(r(418));t=zs(a.nextSibling);var c=Lt;t&&vh(e,t)?xh(c,a):(e.flags=e.flags&-4097|2,qe=!1,Lt=e)}}else{if(zo(e))throw Error(r(418));e.flags=e.flags&-4097|2,qe=!1,Lt=e}}}function yh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Lt=e}function Ja(e){if(e!==Lt)return!1;if(!qe)return yh(e),qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Oo(e.type,e.memoizedProps)),t&&(t=Dt)){if(zo(e))throw wh(),Error(r(418));for(;t;)xh(e,t),t=zs(t.nextSibling)}if(yh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(t===0){Dt=zs(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++}e=e.nextSibling}Dt=null}}else Dt=Lt?zs(e.stateNode.nextSibling):null;return!0}function wh(){for(var e=Dt;e;)e=zs(e.nextSibling)}function yn(){Dt=Lt=null,qe=!1}function Bo(e){Gt===null?Gt=[e]:Gt.push(e)}var C0=R.ReactCurrentBatchConfig;function $i(e,t,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(r(309));var c=a.stateNode}if(!c)throw Error(r(147,e));var h=c,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(x){var j=h.refs;x===null?delete j[f]:j[f]=x},t._stringRef=f,t)}if(typeof e!="string")throw Error(r(284));if(!a._owner)throw Error(r(290,e))}return e}function Ya(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bh(e){var t=e._init;return t(e._payload)}function jh(e){function t(I,T){if(e){var D=I.deletions;D===null?(I.deletions=[T],I.flags|=16):D.push(T)}}function a(I,T){if(!e)return null;for(;T!==null;)t(I,T),T=T.sibling;return null}function c(I,T){for(I=new Map;T!==null;)T.key!==null?I.set(T.key,T):I.set(T.index,T),T=T.sibling;return I}function h(I,T){return I=Xs(I,T),I.index=0,I.sibling=null,I}function f(I,T,D){return I.index=D,e?(D=I.alternate,D!==null?(D=D.index,D<T?(I.flags|=2,T):D):(I.flags|=2,T)):(I.flags|=1048576,T)}function x(I){return e&&I.alternate===null&&(I.flags|=2),I}function j(I,T,D,Z){return T===null||T.tag!==6?(T=Ic(D,I.mode,Z),T.return=I,T):(T=h(T,D),T.return=I,T)}function C(I,T,D,Z){var fe=D.type;return fe===se?V(I,T,D.props.children,Z,D.key):T!==null&&(T.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===G&&bh(fe)===T.type)?(Z=h(T,D.props),Z.ref=$i(I,T,D),Z.return=I,Z):(Z=bl(D.type,D.key,D.props,null,I.mode,Z),Z.ref=$i(I,T,D),Z.return=I,Z)}function F(I,T,D,Z){return T===null||T.tag!==4||T.stateNode.containerInfo!==D.containerInfo||T.stateNode.implementation!==D.implementation?(T=Lc(D,I.mode,Z),T.return=I,T):(T=h(T,D.children||[]),T.return=I,T)}function V(I,T,D,Z,fe){return T===null||T.tag!==7?(T=Mr(D,I.mode,Z,fe),T.return=I,T):(T=h(T,D),T.return=I,T)}function Y(I,T,D){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Ic(""+T,I.mode,D),T.return=I,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case $:return D=bl(T.type,T.key,T.props,null,I.mode,D),D.ref=$i(I,null,T),D.return=I,D;case W:return T=Lc(T,I.mode,D),T.return=I,T;case G:var Z=T._init;return Y(I,Z(T._payload),D)}if(mi(T)||re(T))return T=Mr(T,I.mode,D,null),T.return=I,T;Ya(I,T)}return null}function K(I,T,D,Z){var fe=T!==null?T.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return fe!==null?null:j(I,T,""+D,Z);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case $:return D.key===fe?C(I,T,D,Z):null;case W:return D.key===fe?F(I,T,D,Z):null;case G:return fe=D._init,K(I,T,fe(D._payload),Z)}if(mi(D)||re(D))return fe!==null?null:V(I,T,D,Z,null);Ya(I,D)}return null}function ie(I,T,D,Z,fe){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return I=I.get(D)||null,j(T,I,""+Z,fe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case $:return I=I.get(Z.key===null?D:Z.key)||null,C(T,I,Z,fe);case W:return I=I.get(Z.key===null?D:Z.key)||null,F(T,I,Z,fe);case G:var ve=Z._init;return ie(I,T,D,ve(Z._payload),fe)}if(mi(Z)||re(Z))return I=I.get(D)||null,V(T,I,Z,fe,null);Ya(T,Z)}return null}function ce(I,T,D,Z){for(var fe=null,ve=null,ye=T,je=T=0,at=null;ye!==null&&je<D.length;je++){ye.index>je?(at=ye,ye=null):at=ye.sibling;var Oe=K(I,ye,D[je],Z);if(Oe===null){ye===null&&(ye=at);break}e&&ye&&Oe.alternate===null&&t(I,ye),T=f(Oe,T,je),ve===null?fe=Oe:ve.sibling=Oe,ve=Oe,ye=at}if(je===D.length)return a(I,ye),qe&&Pr(I,je),fe;if(ye===null){for(;je<D.length;je++)ye=Y(I,D[je],Z),ye!==null&&(T=f(ye,T,je),ve===null?fe=ye:ve.sibling=ye,ve=ye);return qe&&Pr(I,je),fe}for(ye=c(I,ye);je<D.length;je++)at=ie(ye,I,je,D[je],Z),at!==null&&(e&&at.alternate!==null&&ye.delete(at.key===null?je:at.key),T=f(at,T,je),ve===null?fe=at:ve.sibling=at,ve=at);return e&&ye.forEach(function(Zs){return t(I,Zs)}),qe&&Pr(I,je),fe}function de(I,T,D,Z){var fe=re(D);if(typeof fe!="function")throw Error(r(150));if(D=fe.call(D),D==null)throw Error(r(151));for(var ve=fe=null,ye=T,je=T=0,at=null,Oe=D.next();ye!==null&&!Oe.done;je++,Oe=D.next()){ye.index>je?(at=ye,ye=null):at=ye.sibling;var Zs=K(I,ye,Oe.value,Z);if(Zs===null){ye===null&&(ye=at);break}e&&ye&&Zs.alternate===null&&t(I,ye),T=f(Zs,T,je),ve===null?fe=Zs:ve.sibling=Zs,ve=Zs,ye=at}if(Oe.done)return a(I,ye),qe&&Pr(I,je),fe;if(ye===null){for(;!Oe.done;je++,Oe=D.next())Oe=Y(I,Oe.value,Z),Oe!==null&&(T=f(Oe,T,je),ve===null?fe=Oe:ve.sibling=Oe,ve=Oe);return qe&&Pr(I,je),fe}for(ye=c(I,ye);!Oe.done;je++,Oe=D.next())Oe=ie(ye,I,je,Oe.value,Z),Oe!==null&&(e&&Oe.alternate!==null&&ye.delete(Oe.key===null?je:Oe.key),T=f(Oe,T,je),ve===null?fe=Oe:ve.sibling=Oe,ve=Oe);return e&&ye.forEach(function(ax){return t(I,ax)}),qe&&Pr(I,je),fe}function Ve(I,T,D,Z){if(typeof D=="object"&&D!==null&&D.type===se&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case $:e:{for(var fe=D.key,ve=T;ve!==null;){if(ve.key===fe){if(fe=D.type,fe===se){if(ve.tag===7){a(I,ve.sibling),T=h(ve,D.props.children),T.return=I,I=T;break e}}else if(ve.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===G&&bh(fe)===ve.type){a(I,ve.sibling),T=h(ve,D.props),T.ref=$i(I,ve,D),T.return=I,I=T;break e}a(I,ve);break}else t(I,ve);ve=ve.sibling}D.type===se?(T=Mr(D.props.children,I.mode,Z,D.key),T.return=I,I=T):(Z=bl(D.type,D.key,D.props,null,I.mode,Z),Z.ref=$i(I,T,D),Z.return=I,I=Z)}return x(I);case W:e:{for(ve=D.key;T!==null;){if(T.key===ve)if(T.tag===4&&T.stateNode.containerInfo===D.containerInfo&&T.stateNode.implementation===D.implementation){a(I,T.sibling),T=h(T,D.children||[]),T.return=I,I=T;break e}else{a(I,T);break}else t(I,T);T=T.sibling}T=Lc(D,I.mode,Z),T.return=I,I=T}return x(I);case G:return ve=D._init,Ve(I,T,ve(D._payload),Z)}if(mi(D))return ce(I,T,D,Z);if(re(D))return de(I,T,D,Z);Ya(I,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,T!==null&&T.tag===6?(a(I,T.sibling),T=h(T,D),T.return=I,I=T):(a(I,T),T=Ic(D,I.mode,Z),T.return=I,I=T),x(I)):a(I,T)}return Ve}var wn=jh(!0),_h=jh(!1),Xa=qs(null),Za=null,bn=null,Wo=null;function Qo(){Wo=bn=Za=null}function Ho(e){var t=Xa.current;Fe(Xa),e._currentValue=t}function Ko(e,t,a){for(;e!==null;){var c=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,c!==null&&(c.childLanes|=t)):c!==null&&(c.childLanes&t)!==t&&(c.childLanes|=t),e===a)break;e=e.return}}function jn(e,t){Za=e,Wo=bn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Et=!0),e.firstContext=null)}function zt(e){var t=e._currentValue;if(Wo!==e)if(e={context:e,memoizedValue:t,next:null},bn===null){if(Za===null)throw Error(r(308));bn=e,Za.dependencies={lanes:0,firstContext:e}}else bn=bn.next=e;return t}var Rr=null;function Vo(e){Rr===null?Rr=[e]:Rr.push(e)}function Nh(e,t,a,c){var h=t.interleaved;return h===null?(a.next=a,Vo(t)):(a.next=h.next,h.next=a),t.interleaved=a,ws(e,c)}function ws(e,t){e.lanes|=t;var a=e.alternate;for(a!==null&&(a.lanes|=t),a=e,e=e.return;e!==null;)e.childLanes|=t,a=e.alternate,a!==null&&(a.childLanes|=t),a=e,e=e.return;return a.tag===3?a.stateNode:null}var Qs=!1;function Go(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hs(e,t,a){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(Ae&2)!==0){var h=c.pending;return h===null?t.next=t:(t.next=h.next,h.next=t),c.pending=t,ws(e,a)}return h=c.interleaved,h===null?(t.next=t,Vo(c)):(t.next=h.next,h.next=t),c.interleaved=t,ws(e,a)}function el(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194240)!==0)){var c=t.lanes;c&=e.pendingLanes,a|=c,t.lanes=a,oo(e,a)}}function Sh(e,t){var a=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var x={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};f===null?h=f=x:f=f.next=x,a=a.next}while(a!==null);f===null?h=f=t:f=f.next=t}else h=f=t;a={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:c.shared,effects:c.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}function tl(e,t,a,c){var h=e.updateQueue;Qs=!1;var f=h.firstBaseUpdate,x=h.lastBaseUpdate,j=h.shared.pending;if(j!==null){h.shared.pending=null;var C=j,F=C.next;C.next=null,x===null?f=F:x.next=F,x=C;var V=e.alternate;V!==null&&(V=V.updateQueue,j=V.lastBaseUpdate,j!==x&&(j===null?V.firstBaseUpdate=F:j.next=F,V.lastBaseUpdate=C))}if(f!==null){var Y=h.baseState;x=0,V=F=C=null,j=f;do{var K=j.lane,ie=j.eventTime;if((c&K)===K){V!==null&&(V=V.next={eventTime:ie,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var ce=e,de=j;switch(K=t,ie=a,de.tag){case 1:if(ce=de.payload,typeof ce=="function"){Y=ce.call(ie,Y,K);break e}Y=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=de.payload,K=typeof ce=="function"?ce.call(ie,Y,K):ce,K==null)break e;Y=X({},Y,K);break e;case 2:Qs=!0}}j.callback!==null&&j.lane!==0&&(e.flags|=64,K=h.effects,K===null?h.effects=[j]:K.push(j))}else ie={eventTime:ie,lane:K,tag:j.tag,payload:j.payload,callback:j.callback,next:null},V===null?(F=V=ie,C=Y):V=V.next=ie,x|=K;if(j=j.next,j===null){if(j=h.shared.pending,j===null)break;K=j,j=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);if(V===null&&(C=Y),h.baseState=C,h.firstBaseUpdate=F,h.lastBaseUpdate=V,t=h.shared.interleaved,t!==null){h=t;do x|=h.lane,h=h.next;while(h!==t)}else f===null&&(h.shared.lanes=0);Or|=x,e.lanes=x,e.memoizedState=Y}}function Ch(e,t,a){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var c=e[t],h=c.callback;if(h!==null){if(c.callback=null,c=a,typeof h!="function")throw Error(r(191,h));h.call(c)}}}var Fi={},ls=qs(Fi),zi=qs(Fi),qi=qs(Fi);function Tr(e){if(e===Fi)throw Error(r(174));return e}function Jo(e,t){switch(Me(qi,t),Me(zi,e),Me(ls,Fi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Jl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Jl(t,e)}Fe(ls),Me(ls,t)}function _n(){Fe(ls),Fe(zi),Fe(qi)}function Eh(e){Tr(qi.current);var t=Tr(ls.current),a=Jl(t,e.type);t!==a&&(Me(zi,e),Me(ls,a))}function Yo(e){zi.current===e&&(Fe(ls),Fe(zi))}var Be=qs(0);function sl(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xo=[];function Zo(){for(var e=0;e<Xo.length;e++)Xo[e]._workInProgressVersionPrimary=null;Xo.length=0}var rl=R.ReactCurrentDispatcher,ec=R.ReactCurrentBatchConfig,Ar=0,We=null,Ze=null,nt=null,nl=!1,Bi=!1,Wi=0,E0=0;function pt(){throw Error(r(321))}function tc(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Vt(e[a],t[a]))return!1;return!0}function sc(e,t,a,c,h,f){if(Ar=f,We=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rl.current=e===null||e.memoizedState===null?A0:O0,e=a(c,h),Bi){f=0;do{if(Bi=!1,Wi=0,25<=f)throw Error(r(301));f+=1,nt=Ze=null,t.updateQueue=null,rl.current=I0,e=a(c,h)}while(Bi)}if(rl.current=ll,t=Ze!==null&&Ze.next!==null,Ar=0,nt=Ze=We=null,nl=!1,t)throw Error(r(300));return e}function rc(){var e=Wi!==0;return Wi=0,e}function os(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?We.memoizedState=nt=e:nt=nt.next=e,nt}function qt(){if(Ze===null){var e=We.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var t=nt===null?We.memoizedState:nt.next;if(t!==null)nt=t,Ze=e;else{if(e===null)throw Error(r(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},nt===null?We.memoizedState=nt=e:nt=nt.next=e}return nt}function Qi(e,t){return typeof t=="function"?t(e):t}function nc(e){var t=qt(),a=t.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var c=Ze,h=c.baseQueue,f=a.pending;if(f!==null){if(h!==null){var x=h.next;h.next=f.next,f.next=x}c.baseQueue=h=f,a.pending=null}if(h!==null){f=h.next,c=c.baseState;var j=x=null,C=null,F=f;do{var V=F.lane;if((Ar&V)===V)C!==null&&(C=C.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),c=F.hasEagerState?F.eagerState:e(c,F.action);else{var Y={lane:V,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};C===null?(j=C=Y,x=c):C=C.next=Y,We.lanes|=V,Or|=V}F=F.next}while(F!==null&&F!==f);C===null?x=c:C.next=j,Vt(c,t.memoizedState)||(Et=!0),t.memoizedState=c,t.baseState=x,t.baseQueue=C,a.lastRenderedState=c}if(e=a.interleaved,e!==null){h=e;do f=h.lane,We.lanes|=f,Or|=f,h=h.next;while(h!==e)}else h===null&&(a.lanes=0);return[t.memoizedState,a.dispatch]}function ic(e){var t=qt(),a=t.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var c=a.dispatch,h=a.pending,f=t.memoizedState;if(h!==null){a.pending=null;var x=h=h.next;do f=e(f,x.action),x=x.next;while(x!==h);Vt(f,t.memoizedState)||(Et=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),a.lastRenderedState=f}return[f,c]}function Ph(){}function Rh(e,t){var a=We,c=qt(),h=t(),f=!Vt(c.memoizedState,h);if(f&&(c.memoizedState=h,Et=!0),c=c.queue,ac(Oh.bind(null,a,c,e),[e]),c.getSnapshot!==t||f||nt!==null&&nt.memoizedState.tag&1){if(a.flags|=2048,Hi(9,Ah.bind(null,a,c,h,t),void 0,null),it===null)throw Error(r(349));(Ar&30)!==0||Th(a,t,h)}return h}function Th(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Ah(e,t,a,c){t.value=a,t.getSnapshot=c,Ih(t)&&Lh(e)}function Oh(e,t,a){return a(function(){Ih(t)&&Lh(e)})}function Ih(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Vt(e,a)}catch{return!0}}function Lh(e){var t=ws(e,1);t!==null&&Zt(t,e,1,-1)}function Dh(e){var t=os();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:e},t.queue=e,e=e.dispatch=T0.bind(null,We,e),[t.memoizedState,e]}function Hi(e,t,a,c){return e={tag:e,create:t,destroy:a,deps:c,next:null},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.lastEffect=e.next=e):(a=t.lastEffect,a===null?t.lastEffect=e.next=e:(c=a.next,a.next=e,e.next=c,t.lastEffect=e)),e}function Mh(){return qt().memoizedState}function il(e,t,a,c){var h=os();We.flags|=e,h.memoizedState=Hi(1|t,a,void 0,c===void 0?null:c)}function al(e,t,a,c){var h=qt();c=c===void 0?null:c;var f=void 0;if(Ze!==null){var x=Ze.memoizedState;if(f=x.destroy,c!==null&&tc(c,x.deps)){h.memoizedState=Hi(t,a,f,c);return}}We.flags|=e,h.memoizedState=Hi(1|t,a,f,c)}function Uh(e,t){return il(8390656,8,e,t)}function ac(e,t){return al(2048,8,e,t)}function $h(e,t){return al(4,2,e,t)}function Fh(e,t){return al(4,4,e,t)}function zh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qh(e,t,a){return a=a!=null?a.concat([e]):null,al(4,4,zh.bind(null,t,e),a)}function lc(){}function Bh(e,t){var a=qt();t=t===void 0?null:t;var c=a.memoizedState;return c!==null&&t!==null&&tc(t,c[1])?c[0]:(a.memoizedState=[e,t],e)}function Wh(e,t){var a=qt();t=t===void 0?null:t;var c=a.memoizedState;return c!==null&&t!==null&&tc(t,c[1])?c[0]:(e=e(),a.memoizedState=[e,t],e)}function Qh(e,t,a){return(Ar&21)===0?(e.baseState&&(e.baseState=!1,Et=!0),e.memoizedState=a):(Vt(a,t)||(a=bd(),We.lanes|=a,Or|=a,e.baseState=!0),t)}function P0(e,t){var a=De;De=a!==0&&4>a?a:4,e(!0);var c=ec.transition;ec.transition={};try{e(!1),t()}finally{De=a,ec.transition=c}}function Hh(){return qt().memoizedState}function R0(e,t,a){var c=Js(e);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Kh(e))Vh(t,a);else if(a=Nh(e,t,a,c),a!==null){var h=wt();Zt(a,e,c,h),Gh(a,t,c)}}function T0(e,t,a){var c=Js(e),h={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Kh(e))Vh(t,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var x=t.lastRenderedState,j=f(x,a);if(h.hasEagerState=!0,h.eagerState=j,Vt(j,x)){var C=t.interleaved;C===null?(h.next=h,Vo(t)):(h.next=C.next,C.next=h),t.interleaved=h;return}}catch{}finally{}a=Nh(e,t,h,c),a!==null&&(h=wt(),Zt(a,e,c,h),Gh(a,t,c))}}function Kh(e){var t=e.alternate;return e===We||t!==null&&t===We}function Vh(e,t){Bi=nl=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Gh(e,t,a){if((a&4194240)!==0){var c=t.lanes;c&=e.pendingLanes,a|=c,t.lanes=a,oo(e,a)}}var ll={readContext:zt,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},A0={readContext:zt,useCallback:function(e,t){return os().memoizedState=[e,t===void 0?null:t],e},useContext:zt,useEffect:Uh,useImperativeHandle:function(e,t,a){return a=a!=null?a.concat([e]):null,il(4194308,4,zh.bind(null,t,e),a)},useLayoutEffect:function(e,t){return il(4194308,4,e,t)},useInsertionEffect:function(e,t){return il(4,2,e,t)},useMemo:function(e,t){var a=os();return t=t===void 0?null:t,e=e(),a.memoizedState=[e,t],e},useReducer:function(e,t,a){var c=os();return t=a!==void 0?a(t):t,c.memoizedState=c.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},c.queue=e,e=e.dispatch=R0.bind(null,We,e),[c.memoizedState,e]},useRef:function(e){var t=os();return e={current:e},t.memoizedState=e},useState:Dh,useDebugValue:lc,useDeferredValue:function(e){return os().memoizedState=e},useTransition:function(){var e=Dh(!1),t=e[0];return e=P0.bind(null,e[1]),os().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,a){var c=We,h=os();if(qe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=t(),it===null)throw Error(r(349));(Ar&30)!==0||Th(c,t,a)}h.memoizedState=a;var f={value:a,getSnapshot:t};return h.queue=f,Uh(Oh.bind(null,c,f,e),[e]),c.flags|=2048,Hi(9,Ah.bind(null,c,f,a,t),void 0,null),a},useId:function(){var e=os(),t=it.identifierPrefix;if(qe){var a=ys,c=vs;a=(c&~(1<<32-Kt(c)-1)).toString(32)+a,t=":"+t+"R"+a,a=Wi++,0<a&&(t+="H"+a.toString(32)),t+=":"}else a=E0++,t=":"+t+"r"+a.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},O0={readContext:zt,useCallback:Bh,useContext:zt,useEffect:ac,useImperativeHandle:qh,useInsertionEffect:$h,useLayoutEffect:Fh,useMemo:Wh,useReducer:nc,useRef:Mh,useState:function(){return nc(Qi)},useDebugValue:lc,useDeferredValue:function(e){var t=qt();return Qh(t,Ze.memoizedState,e)},useTransition:function(){var e=nc(Qi)[0],t=qt().memoizedState;return[e,t]},useMutableSource:Ph,useSyncExternalStore:Rh,useId:Hh,unstable_isNewReconciler:!1},I0={readContext:zt,useCallback:Bh,useContext:zt,useEffect:ac,useImperativeHandle:qh,useInsertionEffect:$h,useLayoutEffect:Fh,useMemo:Wh,useReducer:ic,useRef:Mh,useState:function(){return ic(Qi)},useDebugValue:lc,useDeferredValue:function(e){var t=qt();return Ze===null?t.memoizedState=e:Qh(t,Ze.memoizedState,e)},useTransition:function(){var e=ic(Qi)[0],t=qt().memoizedState;return[e,t]},useMutableSource:Ph,useSyncExternalStore:Rh,useId:Hh,unstable_isNewReconciler:!1};function Jt(e,t){if(e&&e.defaultProps){t=X({},t),e=e.defaultProps;for(var a in e)t[a]===void 0&&(t[a]=e[a]);return t}return t}function oc(e,t,a,c){t=e.memoizedState,a=a(c,t),a=a==null?t:X({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var ol={isMounted:function(e){return(e=e._reactInternals)?kr(e)===e:!1},enqueueSetState:function(e,t,a){e=e._reactInternals;var c=wt(),h=Js(e),f=bs(c,h);f.payload=t,a!=null&&(f.callback=a),t=Hs(e,f,h),t!==null&&(Zt(t,e,h,c),el(t,e,h))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var c=wt(),h=Js(e),f=bs(c,h);f.tag=1,f.payload=t,a!=null&&(f.callback=a),t=Hs(e,f,h),t!==null&&(Zt(t,e,h,c),el(t,e,h))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=wt(),c=Js(e),h=bs(a,c);h.tag=2,t!=null&&(h.callback=t),t=Hs(e,h,c),t!==null&&(Zt(t,e,c,a),el(t,e,c))}};function Jh(e,t,a,c,h,f,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,f,x):t.prototype&&t.prototype.isPureReactComponent?!Ai(a,c)||!Ai(h,f):!0}function Yh(e,t,a){var c=!1,h=Bs,f=t.contextType;return typeof f=="object"&&f!==null?f=zt(f):(h=Ct(t)?Cr:mt.current,c=t.contextTypes,f=(c=c!=null)?gn(e,h):Bs),t=new t(a,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ol,e.stateNode=t,t._reactInternals=e,c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=h,e.__reactInternalMemoizedMaskedChildContext=f),t}function Xh(e,t,a,c){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,c),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,c),t.state!==e&&ol.enqueueReplaceState(t,t.state,null)}function cc(e,t,a,c){var h=e.stateNode;h.props=a,h.state=e.memoizedState,h.refs={},Go(e);var f=t.contextType;typeof f=="object"&&f!==null?h.context=zt(f):(f=Ct(t)?Cr:mt.current,h.context=gn(e,f)),h.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(oc(e,t,f,a),h.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(t=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),t!==h.state&&ol.enqueueReplaceState(h,h.state,null),tl(e,a,h,c),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308)}function Nn(e,t){try{var a="",c=t;do a+=pe(c),c=c.return;while(c);var h=a}catch(f){h=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:h,digest:null}}function uc(e,t,a){return{value:e,source:null,stack:a??null,digest:t??null}}function dc(e,t){try{console.error(t.value)}catch(a){setTimeout(function(){throw a})}}var L0=typeof WeakMap=="function"?WeakMap:Map;function Zh(e,t,a){a=bs(-1,a),a.tag=3,a.payload={element:null};var c=t.value;return a.callback=function(){pl||(pl=!0,Sc=c),dc(e,t)},a}function ef(e,t,a){a=bs(-1,a),a.tag=3;var c=e.type.getDerivedStateFromError;if(typeof c=="function"){var h=t.value;a.payload=function(){return c(h)},a.callback=function(){dc(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(a.callback=function(){dc(e,t),typeof c!="function"&&(Vs===null?Vs=new Set([this]):Vs.add(this));var x=t.stack;this.componentDidCatch(t.value,{componentStack:x!==null?x:""})}),a}function tf(e,t,a){var c=e.pingCache;if(c===null){c=e.pingCache=new L0;var h=new Set;c.set(t,h)}else h=c.get(t),h===void 0&&(h=new Set,c.set(t,h));h.has(a)||(h.add(a),e=G0.bind(null,e,t,a),t.then(e,e))}function sf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function rf(e,t,a,c,h){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(t=bs(-1,1),t.tag=2,Hs(a,t,1))),a.lanes|=1),e):(e.flags|=65536,e.lanes=h,e)}var D0=R.ReactCurrentOwner,Et=!1;function yt(e,t,a,c){t.child=e===null?_h(t,null,a,c):wn(t,e.child,a,c)}function nf(e,t,a,c,h){a=a.render;var f=t.ref;return jn(t,h),c=sc(e,t,a,c,f,h),a=rc(),e!==null&&!Et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,js(e,t,h)):(qe&&a&&$o(t),t.flags|=1,yt(e,t,c,h),t.child)}function af(e,t,a,c,h){if(e===null){var f=a.type;return typeof f=="function"&&!Oc(f)&&f.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(t.tag=15,t.type=f,lf(e,t,f,c,h)):(e=bl(a.type,null,c,t,t.mode,h),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&h)===0){var x=f.memoizedProps;if(a=a.compare,a=a!==null?a:Ai,a(x,c)&&e.ref===t.ref)return js(e,t,h)}return t.flags|=1,e=Xs(f,c),e.ref=t.ref,e.return=t,t.child=e}function lf(e,t,a,c,h){if(e!==null){var f=e.memoizedProps;if(Ai(f,c)&&e.ref===t.ref)if(Et=!1,t.pendingProps=c=f,(e.lanes&h)!==0)(e.flags&131072)!==0&&(Et=!0);else return t.lanes=e.lanes,js(e,t,h)}return hc(e,t,a,c,h)}function of(e,t,a){var c=t.pendingProps,h=c.children,f=e!==null?e.memoizedState:null;if(c.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(Sn,Mt),Mt|=a;else{if((a&1073741824)===0)return e=f!==null?f.baseLanes|a:a,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Me(Sn,Mt),Mt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=f!==null?f.baseLanes:a,Me(Sn,Mt),Mt|=c}else f!==null?(c=f.baseLanes|a,t.memoizedState=null):c=a,Me(Sn,Mt),Mt|=c;return yt(e,t,h,a),t.child}function cf(e,t){var a=t.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(t.flags|=512,t.flags|=2097152)}function hc(e,t,a,c,h){var f=Ct(a)?Cr:mt.current;return f=gn(t,f),jn(t,h),a=sc(e,t,a,c,f,h),c=rc(),e!==null&&!Et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,js(e,t,h)):(qe&&c&&$o(t),t.flags|=1,yt(e,t,a,h),t.child)}function uf(e,t,a,c,h){if(Ct(a)){var f=!0;Ha(t)}else f=!1;if(jn(t,h),t.stateNode===null)ul(e,t),Yh(t,a,c),cc(t,a,c,h),c=!0;else if(e===null){var x=t.stateNode,j=t.memoizedProps;x.props=j;var C=x.context,F=a.contextType;typeof F=="object"&&F!==null?F=zt(F):(F=Ct(a)?Cr:mt.current,F=gn(t,F));var V=a.getDerivedStateFromProps,Y=typeof V=="function"||typeof x.getSnapshotBeforeUpdate=="function";Y||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(j!==c||C!==F)&&Xh(t,x,c,F),Qs=!1;var K=t.memoizedState;x.state=K,tl(t,c,x,h),C=t.memoizedState,j!==c||K!==C||St.current||Qs?(typeof V=="function"&&(oc(t,a,V,c),C=t.memoizedState),(j=Qs||Jh(t,a,j,c,K,C,F))?(Y||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(t.flags|=4194308)):(typeof x.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=c,t.memoizedState=C),x.props=c,x.state=C,x.context=F,c=j):(typeof x.componentDidMount=="function"&&(t.flags|=4194308),c=!1)}else{x=t.stateNode,kh(e,t),j=t.memoizedProps,F=t.type===t.elementType?j:Jt(t.type,j),x.props=F,Y=t.pendingProps,K=x.context,C=a.contextType,typeof C=="object"&&C!==null?C=zt(C):(C=Ct(a)?Cr:mt.current,C=gn(t,C));var ie=a.getDerivedStateFromProps;(V=typeof ie=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(j!==Y||K!==C)&&Xh(t,x,c,C),Qs=!1,K=t.memoizedState,x.state=K,tl(t,c,x,h);var ce=t.memoizedState;j!==Y||K!==ce||St.current||Qs?(typeof ie=="function"&&(oc(t,a,ie,c),ce=t.memoizedState),(F=Qs||Jh(t,a,F,c,K,ce,C)||!1)?(V||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(c,ce,C),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(c,ce,C)),typeof x.componentDidUpdate=="function"&&(t.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof x.componentDidUpdate!="function"||j===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),t.memoizedProps=c,t.memoizedState=ce),x.props=c,x.state=ce,x.context=C,c=F):(typeof x.componentDidUpdate!="function"||j===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),c=!1)}return fc(e,t,a,c,f,h)}function fc(e,t,a,c,h,f){cf(e,t);var x=(t.flags&128)!==0;if(!c&&!x)return h&&mh(t,a,!1),js(e,t,f);c=t.stateNode,D0.current=t;var j=x&&typeof a.getDerivedStateFromError!="function"?null:c.render();return t.flags|=1,e!==null&&x?(t.child=wn(t,e.child,null,f),t.child=wn(t,null,j,f)):yt(e,t,j,f),t.memoizedState=c.state,h&&mh(t,a,!0),t.child}function df(e){var t=e.stateNode;t.pendingContext?hh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&hh(e,t.context,!1),Jo(e,t.containerInfo)}function hf(e,t,a,c,h){return yn(),Bo(h),t.flags|=256,yt(e,t,a,c),t.child}var mc={dehydrated:null,treeContext:null,retryLane:0};function pc(e){return{baseLanes:e,cachePool:null,transitions:null}}function ff(e,t,a){var c=t.pendingProps,h=Be.current,f=!1,x=(t.flags&128)!==0,j;if((j=x)||(j=e!==null&&e.memoizedState===null?!1:(h&2)!==0),j?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(h|=1),Me(Be,h&1),e===null)return qo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(x=c.children,e=c.fallback,f?(c=t.mode,f=t.child,x={mode:"hidden",children:x},(c&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=x):f=jl(x,c,0,null),e=Mr(e,c,a,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=pc(a),t.memoizedState=mc,e):gc(t,x));if(h=e.memoizedState,h!==null&&(j=h.dehydrated,j!==null))return M0(e,t,x,c,j,h,a);if(f){f=c.fallback,x=t.mode,h=e.child,j=h.sibling;var C={mode:"hidden",children:c.children};return(x&1)===0&&t.child!==h?(c=t.child,c.childLanes=0,c.pendingProps=C,t.deletions=null):(c=Xs(h,C),c.subtreeFlags=h.subtreeFlags&14680064),j!==null?f=Xs(j,f):(f=Mr(f,x,a,null),f.flags|=2),f.return=t,c.return=t,c.sibling=f,t.child=c,c=f,f=t.child,x=e.child.memoizedState,x=x===null?pc(a):{baseLanes:x.baseLanes|a,cachePool:null,transitions:x.transitions},f.memoizedState=x,f.childLanes=e.childLanes&~a,t.memoizedState=mc,c}return f=e.child,e=f.sibling,c=Xs(f,{mode:"visible",children:c.children}),(t.mode&1)===0&&(c.lanes=a),c.return=t,c.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=c,t.memoizedState=null,c}function gc(e,t){return t=jl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function cl(e,t,a,c){return c!==null&&Bo(c),wn(t,e.child,null,a),e=gc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function M0(e,t,a,c,h,f,x){if(a)return t.flags&256?(t.flags&=-257,c=uc(Error(r(422))),cl(e,t,x,c)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=c.fallback,h=t.mode,c=jl({mode:"visible",children:c.children},h,0,null),f=Mr(f,h,x,null),f.flags|=2,c.return=t,f.return=t,c.sibling=f,t.child=c,(t.mode&1)!==0&&wn(t,e.child,null,x),t.child.memoizedState=pc(x),t.memoizedState=mc,f);if((t.mode&1)===0)return cl(e,t,x,null);if(h.data==="$!"){if(c=h.nextSibling&&h.nextSibling.dataset,c)var j=c.dgst;return c=j,f=Error(r(419)),c=uc(f,c,void 0),cl(e,t,x,c)}if(j=(x&e.childLanes)!==0,Et||j){if(c=it,c!==null){switch(x&-x){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(c.suspendedLanes|x))!==0?0:h,h!==0&&h!==f.retryLane&&(f.retryLane=h,ws(e,h),Zt(c,e,h,-1))}return Ac(),c=uc(Error(r(421))),cl(e,t,x,c)}return h.data==="$?"?(t.flags|=128,t.child=e.child,t=J0.bind(null,e),h._reactRetry=t,null):(e=f.treeContext,Dt=zs(h.nextSibling),Lt=t,qe=!0,Gt=null,e!==null&&($t[Ft++]=vs,$t[Ft++]=ys,$t[Ft++]=Er,vs=e.id,ys=e.overflow,Er=t),t=gc(t,c.children),t.flags|=4096,t)}function mf(e,t,a){e.lanes|=t;var c=e.alternate;c!==null&&(c.lanes|=t),Ko(e.return,t,a)}function xc(e,t,a,c,h){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:h}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=c,f.tail=a,f.tailMode=h)}function pf(e,t,a){var c=t.pendingProps,h=c.revealOrder,f=c.tail;if(yt(e,t,c.children,a),c=Be.current,(c&2)!==0)c=c&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mf(e,a,t);else if(e.tag===19)mf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}c&=1}if(Me(Be,c),(t.mode&1)===0)t.memoizedState=null;else switch(h){case"forwards":for(a=t.child,h=null;a!==null;)e=a.alternate,e!==null&&sl(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=t.child,t.child=null):(h=a.sibling,a.sibling=null),xc(t,!1,h,a,f);break;case"backwards":for(a=null,h=t.child,t.child=null;h!==null;){if(e=h.alternate,e!==null&&sl(e)===null){t.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}xc(t,!0,a,null,f);break;case"together":xc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ul(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function js(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Or|=t.lanes,(a&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,a=Xs(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Xs(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function U0(e,t,a){switch(t.tag){case 3:df(t),yn();break;case 5:Eh(t);break;case 1:Ct(t.type)&&Ha(t);break;case 4:Jo(t,t.stateNode.containerInfo);break;case 10:var c=t.type._context,h=t.memoizedProps.value;Me(Xa,c._currentValue),c._currentValue=h;break;case 13:if(c=t.memoizedState,c!==null)return c.dehydrated!==null?(Me(Be,Be.current&1),t.flags|=128,null):(a&t.child.childLanes)!==0?ff(e,t,a):(Me(Be,Be.current&1),e=js(e,t,a),e!==null?e.sibling:null);Me(Be,Be.current&1);break;case 19:if(c=(a&t.childLanes)!==0,(e.flags&128)!==0){if(c)return pf(e,t,a);t.flags|=128}if(h=t.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Me(Be,Be.current),c)break;return null;case 22:case 23:return t.lanes=0,of(e,t,a)}return js(e,t,a)}var gf,vc,xf,vf;gf=function(e,t){for(var a=t.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},vc=function(){},xf=function(e,t,a,c){var h=e.memoizedProps;if(h!==c){e=t.stateNode,Tr(ls.current);var f=null;switch(a){case"input":h=ps(e,h),c=ps(e,c),f=[];break;case"select":h=X({},h,{value:void 0}),c=X({},c,{value:void 0}),f=[];break;case"textarea":h=Gl(e,h),c=Gl(e,c),f=[];break;default:typeof h.onClick!="function"&&typeof c.onClick=="function"&&(e.onclick=Ba)}Yl(a,c);var x;a=null;for(F in h)if(!c.hasOwnProperty(F)&&h.hasOwnProperty(F)&&h[F]!=null)if(F==="style"){var j=h[F];for(x in j)j.hasOwnProperty(x)&&(a||(a={}),a[x]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(o.hasOwnProperty(F)?f||(f=[]):(f=f||[]).push(F,null));for(F in c){var C=c[F];if(j=h!=null?h[F]:void 0,c.hasOwnProperty(F)&&C!==j&&(C!=null||j!=null))if(F==="style")if(j){for(x in j)!j.hasOwnProperty(x)||C&&C.hasOwnProperty(x)||(a||(a={}),a[x]="");for(x in C)C.hasOwnProperty(x)&&j[x]!==C[x]&&(a||(a={}),a[x]=C[x])}else a||(f||(f=[]),f.push(F,a)),a=C;else F==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,j=j?j.__html:void 0,C!=null&&j!==C&&(f=f||[]).push(F,C)):F==="children"?typeof C!="string"&&typeof C!="number"||(f=f||[]).push(F,""+C):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(o.hasOwnProperty(F)?(C!=null&&F==="onScroll"&&$e("scroll",e),f||j===C||(f=[])):(f=f||[]).push(F,C))}a&&(f=f||[]).push("style",a);var F=f;(t.updateQueue=F)&&(t.flags|=4)}},vf=function(e,t,a,c){a!==c&&(t.flags|=4)};function Ki(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function gt(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,c=0;if(t)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags&14680064,c|=h.flags&14680064,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=c,e.childLanes=a,t}function $0(e,t,a){var c=t.pendingProps;switch(Fo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(t),null;case 1:return Ct(t.type)&&Qa(),gt(t),null;case 3:return c=t.stateNode,_n(),Fe(St),Fe(mt),Zo(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(e===null||e.child===null)&&(Ja(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Gt!==null&&(Pc(Gt),Gt=null))),vc(e,t),gt(t),null;case 5:Yo(t);var h=Tr(qi.current);if(a=t.type,e!==null&&t.stateNode!=null)xf(e,t,a,c,h),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!c){if(t.stateNode===null)throw Error(r(166));return gt(t),null}if(e=Tr(ls.current),Ja(t)){c=t.stateNode,a=t.type;var f=t.memoizedProps;switch(c[as]=t,c[Mi]=f,e=(t.mode&1)!==0,a){case"dialog":$e("cancel",c),$e("close",c);break;case"iframe":case"object":case"embed":$e("load",c);break;case"video":case"audio":for(h=0;h<Ii.length;h++)$e(Ii[h],c);break;case"source":$e("error",c);break;case"img":case"image":case"link":$e("error",c),$e("load",c);break;case"details":$e("toggle",c);break;case"input":ns(c,f),$e("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!f.multiple},$e("invalid",c);break;case"textarea":ed(c,f),$e("invalid",c)}Yl(a,f),h=null;for(var x in f)if(f.hasOwnProperty(x)){var j=f[x];x==="children"?typeof j=="string"?c.textContent!==j&&(f.suppressHydrationWarning!==!0&&qa(c.textContent,j,e),h=["children",j]):typeof j=="number"&&c.textContent!==""+j&&(f.suppressHydrationWarning!==!0&&qa(c.textContent,j,e),h=["children",""+j]):o.hasOwnProperty(x)&&j!=null&&x==="onScroll"&&$e("scroll",c)}switch(a){case"input":be(c),fi(c,f,!0);break;case"textarea":be(c),sd(c);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(c.onclick=Ba)}c=h,t.updateQueue=c,c!==null&&(t.flags|=4)}else{x=h.nodeType===9?h:h.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=rd(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=x.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof c.is=="string"?e=x.createElement(a,{is:c.is}):(e=x.createElement(a),a==="select"&&(x=e,c.multiple?x.multiple=!0:c.size&&(x.size=c.size))):e=x.createElementNS(e,a),e[as]=t,e[Mi]=c,gf(e,t,!1,!1),t.stateNode=e;e:{switch(x=Xl(a,c),a){case"dialog":$e("cancel",e),$e("close",e),h=c;break;case"iframe":case"object":case"embed":$e("load",e),h=c;break;case"video":case"audio":for(h=0;h<Ii.length;h++)$e(Ii[h],e);h=c;break;case"source":$e("error",e),h=c;break;case"img":case"image":case"link":$e("error",e),$e("load",e),h=c;break;case"details":$e("toggle",e),h=c;break;case"input":ns(e,c),h=ps(e,c),$e("invalid",e);break;case"option":h=c;break;case"select":e._wrapperState={wasMultiple:!!c.multiple},h=X({},c,{value:void 0}),$e("invalid",e);break;case"textarea":ed(e,c),h=Gl(e,c),$e("invalid",e);break;default:h=c}Yl(a,h),j=h;for(f in j)if(j.hasOwnProperty(f)){var C=j[f];f==="style"?ad(e,C):f==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&nd(e,C)):f==="children"?typeof C=="string"?(a!=="textarea"||C!=="")&&pi(e,C):typeof C=="number"&&pi(e,""+C):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(o.hasOwnProperty(f)?C!=null&&f==="onScroll"&&$e("scroll",e):C!=null&&L(e,f,C,x))}switch(a){case"input":be(e),fi(e,c,!1);break;case"textarea":be(e),sd(e);break;case"option":c.value!=null&&e.setAttribute("value",""+Se(c.value));break;case"select":e.multiple=!!c.multiple,f=c.value,f!=null?rn(e,!!c.multiple,f,!1):c.defaultValue!=null&&rn(e,!!c.multiple,c.defaultValue,!0);break;default:typeof h.onClick=="function"&&(e.onclick=Ba)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gt(t),null;case 6:if(e&&t.stateNode!=null)vf(e,t,e.memoizedProps,c);else{if(typeof c!="string"&&t.stateNode===null)throw Error(r(166));if(a=Tr(qi.current),Tr(ls.current),Ja(t)){if(c=t.stateNode,a=t.memoizedProps,c[as]=t,(f=c.nodeValue!==a)&&(e=Lt,e!==null))switch(e.tag){case 3:qa(c.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&qa(c.nodeValue,a,(e.mode&1)!==0)}f&&(t.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[as]=t,t.stateNode=c}return gt(t),null;case 13:if(Fe(Be),c=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(qe&&Dt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)wh(),yn(),t.flags|=98560,f=!1;else if(f=Ja(t),c!==null&&c.dehydrated!==null){if(e===null){if(!f)throw Error(r(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[as]=t}else yn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;gt(t),f=!1}else Gt!==null&&(Pc(Gt),Gt=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=a,t):(c=c!==null,c!==(e!==null&&e.memoizedState!==null)&&c&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Be.current&1)!==0?et===0&&(et=3):Ac())),t.updateQueue!==null&&(t.flags|=4),gt(t),null);case 4:return _n(),vc(e,t),e===null&&Li(t.stateNode.containerInfo),gt(t),null;case 10:return Ho(t.type._context),gt(t),null;case 17:return Ct(t.type)&&Qa(),gt(t),null;case 19:if(Fe(Be),f=t.memoizedState,f===null)return gt(t),null;if(c=(t.flags&128)!==0,x=f.rendering,x===null)if(c)Ki(f,!1);else{if(et!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(x=sl(e),x!==null){for(t.flags|=128,Ki(f,!1),c=x.updateQueue,c!==null&&(t.updateQueue=c,t.flags|=4),t.subtreeFlags=0,c=a,a=t.child;a!==null;)f=a,e=c,f.flags&=14680066,x=f.alternate,x===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=x.childLanes,f.lanes=x.lanes,f.child=x.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=x.memoizedProps,f.memoizedState=x.memoizedState,f.updateQueue=x.updateQueue,f.type=x.type,e=x.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return Me(Be,Be.current&1|2),t.child}e=e.sibling}f.tail!==null&&Ke()>Cn&&(t.flags|=128,c=!0,Ki(f,!1),t.lanes=4194304)}else{if(!c)if(e=sl(x),e!==null){if(t.flags|=128,c=!0,a=e.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),Ki(f,!0),f.tail===null&&f.tailMode==="hidden"&&!x.alternate&&!qe)return gt(t),null}else 2*Ke()-f.renderingStartTime>Cn&&a!==1073741824&&(t.flags|=128,c=!0,Ki(f,!1),t.lanes=4194304);f.isBackwards?(x.sibling=t.child,t.child=x):(a=f.last,a!==null?a.sibling=x:t.child=x,f.last=x)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Ke(),t.sibling=null,a=Be.current,Me(Be,c?a&1|2:a&1),t):(gt(t),null);case 22:case 23:return Tc(),c=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==c&&(t.flags|=8192),c&&(t.mode&1)!==0?(Mt&1073741824)!==0&&(gt(t),t.subtreeFlags&6&&(t.flags|=8192)):gt(t),null;case 24:return null;case 25:return null}throw Error(r(156,t.tag))}function F0(e,t){switch(Fo(t),t.tag){case 1:return Ct(t.type)&&Qa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _n(),Fe(St),Fe(mt),Zo(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Yo(t),null;case 13:if(Fe(Be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));yn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Fe(Be),null;case 4:return _n(),null;case 10:return Ho(t.type._context),null;case 22:case 23:return Tc(),null;case 24:return null;default:return null}}var dl=!1,xt=!1,z0=typeof WeakSet=="function"?WeakSet:Set,oe=null;function kn(e,t){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){Qe(e,t,c)}else a.current=null}function yc(e,t,a){try{a()}catch(c){Qe(e,t,c)}}var yf=!1;function q0(e,t){if(To=Ta,e=Jd(),_o(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var h=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var x=0,j=-1,C=-1,F=0,V=0,Y=e,K=null;t:for(;;){for(var ie;Y!==a||h!==0&&Y.nodeType!==3||(j=x+h),Y!==f||c!==0&&Y.nodeType!==3||(C=x+c),Y.nodeType===3&&(x+=Y.nodeValue.length),(ie=Y.firstChild)!==null;)K=Y,Y=ie;for(;;){if(Y===e)break t;if(K===a&&++F===h&&(j=x),K===f&&++V===c&&(C=x),(ie=Y.nextSibling)!==null)break;Y=K,K=Y.parentNode}Y=ie}a=j===-1||C===-1?null:{start:j,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ao={focusedElem:e,selectionRange:a},Ta=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var ce=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ce!==null){var de=ce.memoizedProps,Ve=ce.memoizedState,I=t.stateNode,T=I.getSnapshotBeforeUpdate(t.elementType===t.type?de:Jt(t.type,de),Ve);I.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var D=t.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Z){Qe(t,t.return,Z)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return ce=yf,yf=!1,ce}function Vi(e,t,a){var c=t.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&e)===e){var f=h.destroy;h.destroy=void 0,f!==void 0&&yc(t,a,f)}h=h.next}while(h!==c)}}function hl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var a=t=t.next;do{if((a.tag&e)===e){var c=a.create;a.destroy=c()}a=a.next}while(a!==t)}}function wc(e){var t=e.ref;if(t!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof t=="function"?t(e):t.current=e}}function wf(e){var t=e.alternate;t!==null&&(e.alternate=null,wf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[as],delete t[Mi],delete t[Do],delete t[N0],delete t[k0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bf(e){return e.tag===5||e.tag===3||e.tag===4}function jf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bc(e,t,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,t?a.nodeType===8?a.parentNode.insertBefore(e,t):a.insertBefore(e,t):(a.nodeType===8?(t=a.parentNode,t.insertBefore(e,a)):(t=a,t.appendChild(e)),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Ba));else if(c!==4&&(e=e.child,e!==null))for(bc(e,t,a),e=e.sibling;e!==null;)bc(e,t,a),e=e.sibling}function jc(e,t,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(c!==4&&(e=e.child,e!==null))for(jc(e,t,a),e=e.sibling;e!==null;)jc(e,t,a),e=e.sibling}var ut=null,Yt=!1;function Ks(e,t,a){for(a=a.child;a!==null;)_f(e,t,a),a=a.sibling}function _f(e,t,a){if(is&&typeof is.onCommitFiberUnmount=="function")try{is.onCommitFiberUnmount(ka,a)}catch{}switch(a.tag){case 5:xt||kn(a,t);case 6:var c=ut,h=Yt;ut=null,Ks(e,t,a),ut=c,Yt=h,ut!==null&&(Yt?(e=ut,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):ut.removeChild(a.stateNode));break;case 18:ut!==null&&(Yt?(e=ut,a=a.stateNode,e.nodeType===8?Lo(e.parentNode,a):e.nodeType===1&&Lo(e,a),Si(e)):Lo(ut,a.stateNode));break;case 4:c=ut,h=Yt,ut=a.stateNode.containerInfo,Yt=!0,Ks(e,t,a),ut=c,Yt=h;break;case 0:case 11:case 14:case 15:if(!xt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){h=c=c.next;do{var f=h,x=f.destroy;f=f.tag,x!==void 0&&((f&2)!==0||(f&4)!==0)&&yc(a,t,x),h=h.next}while(h!==c)}Ks(e,t,a);break;case 1:if(!xt&&(kn(a,t),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(j){Qe(a,t,j)}Ks(e,t,a);break;case 21:Ks(e,t,a);break;case 22:a.mode&1?(xt=(c=xt)||a.memoizedState!==null,Ks(e,t,a),xt=c):Ks(e,t,a);break;default:Ks(e,t,a)}}function Nf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new z0),t.forEach(function(c){var h=Y0.bind(null,e,c);a.has(c)||(a.add(c),c.then(h,h))})}}function Xt(e,t){var a=t.deletions;if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];try{var f=e,x=t,j=x;e:for(;j!==null;){switch(j.tag){case 5:ut=j.stateNode,Yt=!1;break e;case 3:ut=j.stateNode.containerInfo,Yt=!0;break e;case 4:ut=j.stateNode.containerInfo,Yt=!0;break e}j=j.return}if(ut===null)throw Error(r(160));_f(f,x,h),ut=null,Yt=!1;var C=h.alternate;C!==null&&(C.return=null),h.return=null}catch(F){Qe(h,t,F)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kf(t,e),t=t.sibling}function kf(e,t){var a=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xt(t,e),cs(e),c&4){try{Vi(3,e,e.return),hl(3,e)}catch(de){Qe(e,e.return,de)}try{Vi(5,e,e.return)}catch(de){Qe(e,e.return,de)}}break;case 1:Xt(t,e),cs(e),c&512&&a!==null&&kn(a,a.return);break;case 5:if(Xt(t,e),cs(e),c&512&&a!==null&&kn(a,a.return),e.flags&32){var h=e.stateNode;try{pi(h,"")}catch(de){Qe(e,e.return,de)}}if(c&4&&(h=e.stateNode,h!=null)){var f=e.memoizedProps,x=a!==null?a.memoizedProps:f,j=e.type,C=e.updateQueue;if(e.updateQueue=null,C!==null)try{j==="input"&&f.type==="radio"&&f.name!=null&&Is(h,f),Xl(j,x);var F=Xl(j,f);for(x=0;x<C.length;x+=2){var V=C[x],Y=C[x+1];V==="style"?ad(h,Y):V==="dangerouslySetInnerHTML"?nd(h,Y):V==="children"?pi(h,Y):L(h,V,Y,F)}switch(j){case"input":Nr(h,f);break;case"textarea":td(h,f);break;case"select":var K=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!f.multiple;var ie=f.value;ie!=null?rn(h,!!f.multiple,ie,!1):K!==!!f.multiple&&(f.defaultValue!=null?rn(h,!!f.multiple,f.defaultValue,!0):rn(h,!!f.multiple,f.multiple?[]:"",!1))}h[Mi]=f}catch(de){Qe(e,e.return,de)}}break;case 6:if(Xt(t,e),cs(e),c&4){if(e.stateNode===null)throw Error(r(162));h=e.stateNode,f=e.memoizedProps;try{h.nodeValue=f}catch(de){Qe(e,e.return,de)}}break;case 3:if(Xt(t,e),cs(e),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Si(t.containerInfo)}catch(de){Qe(e,e.return,de)}break;case 4:Xt(t,e),cs(e);break;case 13:Xt(t,e),cs(e),h=e.child,h.flags&8192&&(f=h.memoizedState!==null,h.stateNode.isHidden=f,!f||h.alternate!==null&&h.alternate.memoizedState!==null||(kc=Ke())),c&4&&Nf(e);break;case 22:if(V=a!==null&&a.memoizedState!==null,e.mode&1?(xt=(F=xt)||V,Xt(t,e),xt=F):Xt(t,e),cs(e),c&8192){if(F=e.memoizedState!==null,(e.stateNode.isHidden=F)&&!V&&(e.mode&1)!==0)for(oe=e,V=e.child;V!==null;){for(Y=oe=V;oe!==null;){switch(K=oe,ie=K.child,K.tag){case 0:case 11:case 14:case 15:Vi(4,K,K.return);break;case 1:kn(K,K.return);var ce=K.stateNode;if(typeof ce.componentWillUnmount=="function"){c=K,a=K.return;try{t=c,ce.props=t.memoizedProps,ce.state=t.memoizedState,ce.componentWillUnmount()}catch(de){Qe(c,a,de)}}break;case 5:kn(K,K.return);break;case 22:if(K.memoizedState!==null){Ef(Y);continue}}ie!==null?(ie.return=K,oe=ie):Ef(Y)}V=V.sibling}e:for(V=null,Y=e;;){if(Y.tag===5){if(V===null){V=Y;try{h=Y.stateNode,F?(f=h.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(j=Y.stateNode,C=Y.memoizedProps.style,x=C!=null&&C.hasOwnProperty("display")?C.display:null,j.style.display=id("display",x))}catch(de){Qe(e,e.return,de)}}}else if(Y.tag===6){if(V===null)try{Y.stateNode.nodeValue=F?"":Y.memoizedProps}catch(de){Qe(e,e.return,de)}}else if((Y.tag!==22&&Y.tag!==23||Y.memoizedState===null||Y===e)&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===e)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===e)break e;V===Y&&(V=null),Y=Y.return}V===Y&&(V=null),Y.sibling.return=Y.return,Y=Y.sibling}}break;case 19:Xt(t,e),cs(e),c&4&&Nf(e);break;case 21:break;default:Xt(t,e),cs(e)}}function cs(e){var t=e.flags;if(t&2){try{e:{for(var a=e.return;a!==null;){if(bf(a)){var c=a;break e}a=a.return}throw Error(r(160))}switch(c.tag){case 5:var h=c.stateNode;c.flags&32&&(pi(h,""),c.flags&=-33);var f=jf(e);jc(e,f,h);break;case 3:case 4:var x=c.stateNode.containerInfo,j=jf(e);bc(e,j,x);break;default:throw Error(r(161))}}catch(C){Qe(e,e.return,C)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function B0(e,t,a){oe=e,Sf(e)}function Sf(e,t,a){for(var c=(e.mode&1)!==0;oe!==null;){var h=oe,f=h.child;if(h.tag===22&&c){var x=h.memoizedState!==null||dl;if(!x){var j=h.alternate,C=j!==null&&j.memoizedState!==null||xt;j=dl;var F=xt;if(dl=x,(xt=C)&&!F)for(oe=h;oe!==null;)x=oe,C=x.child,x.tag===22&&x.memoizedState!==null?Pf(h):C!==null?(C.return=x,oe=C):Pf(h);for(;f!==null;)oe=f,Sf(f),f=f.sibling;oe=h,dl=j,xt=F}Cf(e)}else(h.subtreeFlags&8772)!==0&&f!==null?(f.return=h,oe=f):Cf(e)}}function Cf(e){for(;oe!==null;){var t=oe;if((t.flags&8772)!==0){var a=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:xt||hl(5,t);break;case 1:var c=t.stateNode;if(t.flags&4&&!xt)if(a===null)c.componentDidMount();else{var h=t.elementType===t.type?a.memoizedProps:Jt(t.type,a.memoizedProps);c.componentDidUpdate(h,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Ch(t,f,c);break;case 3:var x=t.updateQueue;if(x!==null){if(a=null,t.child!==null)switch(t.child.tag){case 5:a=t.child.stateNode;break;case 1:a=t.child.stateNode}Ch(t,x,a)}break;case 5:var j=t.stateNode;if(a===null&&t.flags&4){a=j;var C=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&a.focus();break;case"img":C.src&&(a.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var F=t.alternate;if(F!==null){var V=F.memoizedState;if(V!==null){var Y=V.dehydrated;Y!==null&&Si(Y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}xt||t.flags&512&&wc(t)}catch(K){Qe(t,t.return,K)}}if(t===e){oe=null;break}if(a=t.sibling,a!==null){a.return=t.return,oe=a;break}oe=t.return}}function Ef(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var a=t.sibling;if(a!==null){a.return=t.return,oe=a;break}oe=t.return}}function Pf(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var a=t.return;try{hl(4,t)}catch(C){Qe(t,a,C)}break;case 1:var c=t.stateNode;if(typeof c.componentDidMount=="function"){var h=t.return;try{c.componentDidMount()}catch(C){Qe(t,h,C)}}var f=t.return;try{wc(t)}catch(C){Qe(t,f,C)}break;case 5:var x=t.return;try{wc(t)}catch(C){Qe(t,x,C)}}}catch(C){Qe(t,t.return,C)}if(t===e){oe=null;break}var j=t.sibling;if(j!==null){j.return=t.return,oe=j;break}oe=t.return}}var W0=Math.ceil,fl=R.ReactCurrentDispatcher,_c=R.ReactCurrentOwner,Bt=R.ReactCurrentBatchConfig,Ae=0,it=null,Xe=null,dt=0,Mt=0,Sn=qs(0),et=0,Gi=null,Or=0,ml=0,Nc=0,Ji=null,Pt=null,kc=0,Cn=1/0,_s=null,pl=!1,Sc=null,Vs=null,gl=!1,Gs=null,xl=0,Yi=0,Cc=null,vl=-1,yl=0;function wt(){return(Ae&6)!==0?Ke():vl!==-1?vl:vl=Ke()}function Js(e){return(e.mode&1)===0?1:(Ae&2)!==0&&dt!==0?dt&-dt:C0.transition!==null?(yl===0&&(yl=bd()),yl):(e=De,e!==0||(e=window.event,e=e===void 0?16:Rd(e.type)),e)}function Zt(e,t,a,c){if(50<Yi)throw Yi=0,Cc=null,Error(r(185));bi(e,a,c),((Ae&2)===0||e!==it)&&(e===it&&((Ae&2)===0&&(ml|=a),et===4&&Ys(e,dt)),Rt(e,c),a===1&&Ae===0&&(t.mode&1)===0&&(Cn=Ke()+500,Ka&&Ws()))}function Rt(e,t){var a=e.callbackNode;Cg(e,t);var c=Ea(e,e===it?dt:0);if(c===0)a!==null&&vd(a),e.callbackNode=null,e.callbackPriority=0;else if(t=c&-c,e.callbackPriority!==t){if(a!=null&&vd(a),t===1)e.tag===0?S0(Tf.bind(null,e)):ph(Tf.bind(null,e)),j0(function(){(Ae&6)===0&&Ws()}),a=null;else{switch(jd(c)){case 1:a=io;break;case 4:a=yd;break;case 16:a=Na;break;case 536870912:a=wd;break;default:a=Na}a=$f(a,Rf.bind(null,e))}e.callbackPriority=t,e.callbackNode=a}}function Rf(e,t){if(vl=-1,yl=0,(Ae&6)!==0)throw Error(r(327));var a=e.callbackNode;if(En()&&e.callbackNode!==a)return null;var c=Ea(e,e===it?dt:0);if(c===0)return null;if((c&30)!==0||(c&e.expiredLanes)!==0||t)t=wl(e,c);else{t=c;var h=Ae;Ae|=2;var f=Of();(it!==e||dt!==t)&&(_s=null,Cn=Ke()+500,Lr(e,t));do try{K0();break}catch(j){Af(e,j)}while(!0);Qo(),fl.current=f,Ae=h,Xe!==null?t=0:(it=null,dt=0,t=et)}if(t!==0){if(t===2&&(h=ao(e),h!==0&&(c=h,t=Ec(e,h))),t===1)throw a=Gi,Lr(e,0),Ys(e,c),Rt(e,Ke()),a;if(t===6)Ys(e,c);else{if(h=e.current.alternate,(c&30)===0&&!Q0(h)&&(t=wl(e,c),t===2&&(f=ao(e),f!==0&&(c=f,t=Ec(e,f))),t===1))throw a=Gi,Lr(e,0),Ys(e,c),Rt(e,Ke()),a;switch(e.finishedWork=h,e.finishedLanes=c,t){case 0:case 1:throw Error(r(345));case 2:Dr(e,Pt,_s);break;case 3:if(Ys(e,c),(c&130023424)===c&&(t=kc+500-Ke(),10<t)){if(Ea(e,0)!==0)break;if(h=e.suspendedLanes,(h&c)!==c){wt(),e.pingedLanes|=e.suspendedLanes&h;break}e.timeoutHandle=Io(Dr.bind(null,e,Pt,_s),t);break}Dr(e,Pt,_s);break;case 4:if(Ys(e,c),(c&4194240)===c)break;for(t=e.eventTimes,h=-1;0<c;){var x=31-Kt(c);f=1<<x,x=t[x],x>h&&(h=x),c&=~f}if(c=h,c=Ke()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*W0(c/1960))-c,10<c){e.timeoutHandle=Io(Dr.bind(null,e,Pt,_s),c);break}Dr(e,Pt,_s);break;case 5:Dr(e,Pt,_s);break;default:throw Error(r(329))}}}return Rt(e,Ke()),e.callbackNode===a?Rf.bind(null,e):null}function Ec(e,t){var a=Ji;return e.current.memoizedState.isDehydrated&&(Lr(e,t).flags|=256),e=wl(e,t),e!==2&&(t=Pt,Pt=a,t!==null&&Pc(t)),e}function Pc(e){Pt===null?Pt=e:Pt.push.apply(Pt,e)}function Q0(e){for(var t=e;;){if(t.flags&16384){var a=t.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var h=a[c],f=h.getSnapshot;h=h.value;try{if(!Vt(f(),h))return!1}catch{return!1}}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ys(e,t){for(t&=~Nc,t&=~ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var a=31-Kt(t),c=1<<a;e[a]=-1,t&=~c}}function Tf(e){if((Ae&6)!==0)throw Error(r(327));En();var t=Ea(e,0);if((t&1)===0)return Rt(e,Ke()),null;var a=wl(e,t);if(e.tag!==0&&a===2){var c=ao(e);c!==0&&(t=c,a=Ec(e,c))}if(a===1)throw a=Gi,Lr(e,0),Ys(e,t),Rt(e,Ke()),a;if(a===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Dr(e,Pt,_s),Rt(e,Ke()),null}function Rc(e,t){var a=Ae;Ae|=1;try{return e(t)}finally{Ae=a,Ae===0&&(Cn=Ke()+500,Ka&&Ws())}}function Ir(e){Gs!==null&&Gs.tag===0&&(Ae&6)===0&&En();var t=Ae;Ae|=1;var a=Bt.transition,c=De;try{if(Bt.transition=null,De=1,e)return e()}finally{De=c,Bt.transition=a,Ae=t,(Ae&6)===0&&Ws()}}function Tc(){Mt=Sn.current,Fe(Sn)}function Lr(e,t){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,b0(a)),Xe!==null)for(a=Xe.return;a!==null;){var c=a;switch(Fo(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Qa();break;case 3:_n(),Fe(St),Fe(mt),Zo();break;case 5:Yo(c);break;case 4:_n();break;case 13:Fe(Be);break;case 19:Fe(Be);break;case 10:Ho(c.type._context);break;case 22:case 23:Tc()}a=a.return}if(it=e,Xe=e=Xs(e.current,null),dt=Mt=t,et=0,Gi=null,Nc=ml=Or=0,Pt=Ji=null,Rr!==null){for(t=0;t<Rr.length;t++)if(a=Rr[t],c=a.interleaved,c!==null){a.interleaved=null;var h=c.next,f=a.pending;if(f!==null){var x=f.next;f.next=h,c.next=x}a.pending=c}Rr=null}return e}function Af(e,t){do{var a=Xe;try{if(Qo(),rl.current=ll,nl){for(var c=We.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}nl=!1}if(Ar=0,nt=Ze=We=null,Bi=!1,Wi=0,_c.current=null,a===null||a.return===null){et=1,Gi=t,Xe=null;break}e:{var f=e,x=a.return,j=a,C=t;if(t=dt,j.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var F=C,V=j,Y=V.tag;if((V.mode&1)===0&&(Y===0||Y===11||Y===15)){var K=V.alternate;K?(V.updateQueue=K.updateQueue,V.memoizedState=K.memoizedState,V.lanes=K.lanes):(V.updateQueue=null,V.memoizedState=null)}var ie=sf(x);if(ie!==null){ie.flags&=-257,rf(ie,x,j,f,t),ie.mode&1&&tf(f,F,t),t=ie,C=F;var ce=t.updateQueue;if(ce===null){var de=new Set;de.add(C),t.updateQueue=de}else ce.add(C);break e}else{if((t&1)===0){tf(f,F,t),Ac();break e}C=Error(r(426))}}else if(qe&&j.mode&1){var Ve=sf(x);if(Ve!==null){(Ve.flags&65536)===0&&(Ve.flags|=256),rf(Ve,x,j,f,t),Bo(Nn(C,j));break e}}f=C=Nn(C,j),et!==4&&(et=2),Ji===null?Ji=[f]:Ji.push(f),f=x;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var I=Zh(f,C,t);Sh(f,I);break e;case 1:j=C;var T=f.type,D=f.stateNode;if((f.flags&128)===0&&(typeof T.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Vs===null||!Vs.has(D)))){f.flags|=65536,t&=-t,f.lanes|=t;var Z=ef(f,j,t);Sh(f,Z);break e}}f=f.return}while(f!==null)}Lf(a)}catch(fe){t=fe,Xe===a&&a!==null&&(Xe=a=a.return);continue}break}while(!0)}function Of(){var e=fl.current;return fl.current=ll,e===null?ll:e}function Ac(){(et===0||et===3||et===2)&&(et=4),it===null||(Or&268435455)===0&&(ml&268435455)===0||Ys(it,dt)}function wl(e,t){var a=Ae;Ae|=2;var c=Of();(it!==e||dt!==t)&&(_s=null,Lr(e,t));do try{H0();break}catch(h){Af(e,h)}while(!0);if(Qo(),Ae=a,fl.current=c,Xe!==null)throw Error(r(261));return it=null,dt=0,et}function H0(){for(;Xe!==null;)If(Xe)}function K0(){for(;Xe!==null&&!vg();)If(Xe)}function If(e){var t=Uf(e.alternate,e,Mt);e.memoizedProps=e.pendingProps,t===null?Lf(e):Xe=t,_c.current=null}function Lf(e){var t=e;do{var a=t.alternate;if(e=t.return,(t.flags&32768)===0){if(a=$0(a,t,Mt),a!==null){Xe=a;return}}else{if(a=F0(a,t),a!==null){a.flags&=32767,Xe=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{et=6,Xe=null;return}}if(t=t.sibling,t!==null){Xe=t;return}Xe=t=e}while(t!==null);et===0&&(et=5)}function Dr(e,t,a){var c=De,h=Bt.transition;try{Bt.transition=null,De=1,V0(e,t,a,c)}finally{Bt.transition=h,De=c}return null}function V0(e,t,a,c){do En();while(Gs!==null);if((Ae&6)!==0)throw Error(r(327));a=e.finishedWork;var h=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var f=a.lanes|a.childLanes;if(Eg(e,f),e===it&&(Xe=it=null,dt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||gl||(gl=!0,$f(Na,function(){return En(),null})),f=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||f){f=Bt.transition,Bt.transition=null;var x=De;De=1;var j=Ae;Ae|=4,_c.current=null,q0(e,a),kf(a,e),m0(Ao),Ta=!!To,Ao=To=null,e.current=a,B0(a),yg(),Ae=j,De=x,Bt.transition=f}else e.current=a;if(gl&&(gl=!1,Gs=e,xl=h),f=e.pendingLanes,f===0&&(Vs=null),jg(a.stateNode),Rt(e,Ke()),t!==null)for(c=e.onRecoverableError,a=0;a<t.length;a++)h=t[a],c(h.value,{componentStack:h.stack,digest:h.digest});if(pl)throw pl=!1,e=Sc,Sc=null,e;return(xl&1)!==0&&e.tag!==0&&En(),f=e.pendingLanes,(f&1)!==0?e===Cc?Yi++:(Yi=0,Cc=e):Yi=0,Ws(),null}function En(){if(Gs!==null){var e=jd(xl),t=Bt.transition,a=De;try{if(Bt.transition=null,De=16>e?16:e,Gs===null)var c=!1;else{if(e=Gs,Gs=null,xl=0,(Ae&6)!==0)throw Error(r(331));var h=Ae;for(Ae|=4,oe=e.current;oe!==null;){var f=oe,x=f.child;if((oe.flags&16)!==0){var j=f.deletions;if(j!==null){for(var C=0;C<j.length;C++){var F=j[C];for(oe=F;oe!==null;){var V=oe;switch(V.tag){case 0:case 11:case 15:Vi(8,V,f)}var Y=V.child;if(Y!==null)Y.return=V,oe=Y;else for(;oe!==null;){V=oe;var K=V.sibling,ie=V.return;if(wf(V),V===F){oe=null;break}if(K!==null){K.return=ie,oe=K;break}oe=ie}}}var ce=f.alternate;if(ce!==null){var de=ce.child;if(de!==null){ce.child=null;do{var Ve=de.sibling;de.sibling=null,de=Ve}while(de!==null)}}oe=f}}if((f.subtreeFlags&2064)!==0&&x!==null)x.return=f,oe=x;else e:for(;oe!==null;){if(f=oe,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Vi(9,f,f.return)}var I=f.sibling;if(I!==null){I.return=f.return,oe=I;break e}oe=f.return}}var T=e.current;for(oe=T;oe!==null;){x=oe;var D=x.child;if((x.subtreeFlags&2064)!==0&&D!==null)D.return=x,oe=D;else e:for(x=T;oe!==null;){if(j=oe,(j.flags&2048)!==0)try{switch(j.tag){case 0:case 11:case 15:hl(9,j)}}catch(fe){Qe(j,j.return,fe)}if(j===x){oe=null;break e}var Z=j.sibling;if(Z!==null){Z.return=j.return,oe=Z;break e}oe=j.return}}if(Ae=h,Ws(),is&&typeof is.onPostCommitFiberRoot=="function")try{is.onPostCommitFiberRoot(ka,e)}catch{}c=!0}return c}finally{De=a,Bt.transition=t}}return!1}function Df(e,t,a){t=Nn(a,t),t=Zh(e,t,1),e=Hs(e,t,1),t=wt(),e!==null&&(bi(e,1,t),Rt(e,t))}function Qe(e,t,a){if(e.tag===3)Df(e,e,a);else for(;t!==null;){if(t.tag===3){Df(t,e,a);break}else if(t.tag===1){var c=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Vs===null||!Vs.has(c))){e=Nn(a,e),e=ef(t,e,1),t=Hs(t,e,1),e=wt(),t!==null&&(bi(t,1,e),Rt(t,e));break}}t=t.return}}function G0(e,t,a){var c=e.pingCache;c!==null&&c.delete(t),t=wt(),e.pingedLanes|=e.suspendedLanes&a,it===e&&(dt&a)===a&&(et===4||et===3&&(dt&130023424)===dt&&500>Ke()-kc?Lr(e,0):Nc|=a),Rt(e,t)}function Mf(e,t){t===0&&((e.mode&1)===0?t=1:(t=Ca,Ca<<=1,(Ca&130023424)===0&&(Ca=4194304)));var a=wt();e=ws(e,t),e!==null&&(bi(e,t,a),Rt(e,a))}function J0(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Mf(e,a)}function Y0(e,t){var a=0;switch(e.tag){case 13:var c=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:c=e.stateNode;break;default:throw Error(r(314))}c!==null&&c.delete(t),Mf(e,a)}var Uf;Uf=function(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps||St.current)Et=!0;else{if((e.lanes&a)===0&&(t.flags&128)===0)return Et=!1,U0(e,t,a);Et=(e.flags&131072)!==0}else Et=!1,qe&&(t.flags&1048576)!==0&&gh(t,Ga,t.index);switch(t.lanes=0,t.tag){case 2:var c=t.type;ul(e,t),e=t.pendingProps;var h=gn(t,mt.current);jn(t,a),h=sc(null,t,c,e,h,a);var f=rc();return t.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ct(c)?(f=!0,Ha(t)):f=!1,t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Go(t),h.updater=ol,t.stateNode=h,h._reactInternals=t,cc(t,c,e,a),t=fc(null,t,c,!0,f,a)):(t.tag=0,qe&&f&&$o(t),yt(null,t,h,a),t=t.child),t;case 16:c=t.elementType;e:{switch(ul(e,t),e=t.pendingProps,h=c._init,c=h(c._payload),t.type=c,h=t.tag=Z0(c),e=Jt(c,e),h){case 0:t=hc(null,t,c,e,a);break e;case 1:t=uf(null,t,c,e,a);break e;case 11:t=nf(null,t,c,e,a);break e;case 14:t=af(null,t,c,Jt(c.type,e),a);break e}throw Error(r(306,c,""))}return t;case 0:return c=t.type,h=t.pendingProps,h=t.elementType===c?h:Jt(c,h),hc(e,t,c,h,a);case 1:return c=t.type,h=t.pendingProps,h=t.elementType===c?h:Jt(c,h),uf(e,t,c,h,a);case 3:e:{if(df(t),e===null)throw Error(r(387));c=t.pendingProps,f=t.memoizedState,h=f.element,kh(e,t),tl(t,c,null,a);var x=t.memoizedState;if(c=x.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){h=Nn(Error(r(423)),t),t=hf(e,t,c,a,h);break e}else if(c!==h){h=Nn(Error(r(424)),t),t=hf(e,t,c,a,h);break e}else for(Dt=zs(t.stateNode.containerInfo.firstChild),Lt=t,qe=!0,Gt=null,a=_h(t,null,c,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(yn(),c===h){t=js(e,t,a);break e}yt(e,t,c,a)}t=t.child}return t;case 5:return Eh(t),e===null&&qo(t),c=t.type,h=t.pendingProps,f=e!==null?e.memoizedProps:null,x=h.children,Oo(c,h)?x=null:f!==null&&Oo(c,f)&&(t.flags|=32),cf(e,t),yt(e,t,x,a),t.child;case 6:return e===null&&qo(t),null;case 13:return ff(e,t,a);case 4:return Jo(t,t.stateNode.containerInfo),c=t.pendingProps,e===null?t.child=wn(t,null,c,a):yt(e,t,c,a),t.child;case 11:return c=t.type,h=t.pendingProps,h=t.elementType===c?h:Jt(c,h),nf(e,t,c,h,a);case 7:return yt(e,t,t.pendingProps,a),t.child;case 8:return yt(e,t,t.pendingProps.children,a),t.child;case 12:return yt(e,t,t.pendingProps.children,a),t.child;case 10:e:{if(c=t.type._context,h=t.pendingProps,f=t.memoizedProps,x=h.value,Me(Xa,c._currentValue),c._currentValue=x,f!==null)if(Vt(f.value,x)){if(f.children===h.children&&!St.current){t=js(e,t,a);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var j=f.dependencies;if(j!==null){x=f.child;for(var C=j.firstContext;C!==null;){if(C.context===c){if(f.tag===1){C=bs(-1,a&-a),C.tag=2;var F=f.updateQueue;if(F!==null){F=F.shared;var V=F.pending;V===null?C.next=C:(C.next=V.next,V.next=C),F.pending=C}}f.lanes|=a,C=f.alternate,C!==null&&(C.lanes|=a),Ko(f.return,a,t),j.lanes|=a;break}C=C.next}}else if(f.tag===10)x=f.type===t.type?null:f.child;else if(f.tag===18){if(x=f.return,x===null)throw Error(r(341));x.lanes|=a,j=x.alternate,j!==null&&(j.lanes|=a),Ko(x,a,t),x=f.sibling}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===t){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}yt(e,t,h.children,a),t=t.child}return t;case 9:return h=t.type,c=t.pendingProps.children,jn(t,a),h=zt(h),c=c(h),t.flags|=1,yt(e,t,c,a),t.child;case 14:return c=t.type,h=Jt(c,t.pendingProps),h=Jt(c.type,h),af(e,t,c,h,a);case 15:return lf(e,t,t.type,t.pendingProps,a);case 17:return c=t.type,h=t.pendingProps,h=t.elementType===c?h:Jt(c,h),ul(e,t),t.tag=1,Ct(c)?(e=!0,Ha(t)):e=!1,jn(t,a),Yh(t,c,h),cc(t,c,h,a),fc(null,t,c,!0,e,a);case 19:return pf(e,t,a);case 22:return of(e,t,a)}throw Error(r(156,t.tag))};function $f(e,t){return xd(e,t)}function X0(e,t,a,c){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(e,t,a,c){return new X0(e,t,a,c)}function Oc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Z0(e){if(typeof e=="function")return Oc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===U)return 11;if(e===J)return 14}return 2}function Xs(e,t){var a=e.alternate;return a===null?(a=Wt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function bl(e,t,a,c,h,f){var x=2;if(c=e,typeof e=="function")Oc(e)&&(x=1);else if(typeof e=="string")x=5;else e:switch(e){case se:return Mr(a.children,h,f,t);case le:x=8,h|=8;break;case we:return e=Wt(12,a,t,h|2),e.elementType=we,e.lanes=f,e;case te:return e=Wt(13,a,t,h),e.elementType=te,e.lanes=f,e;case q:return e=Wt(19,a,t,h),e.elementType=q,e.lanes=f,e;case ne:return jl(a,h,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _:x=10;break e;case Q:x=9;break e;case U:x=11;break e;case J:x=14;break e;case G:x=16,c=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return t=Wt(x,a,t,h),t.elementType=e,t.type=c,t.lanes=f,t}function Mr(e,t,a,c){return e=Wt(7,e,c,t),e.lanes=a,e}function jl(e,t,a,c){return e=Wt(22,e,c,t),e.elementType=ne,e.lanes=a,e.stateNode={isHidden:!1},e}function Ic(e,t,a){return e=Wt(6,e,null,t),e.lanes=a,e}function Lc(e,t,a){return t=Wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ex(e,t,a,c,h){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lo(0),this.expirationTimes=lo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lo(0),this.identifierPrefix=c,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Dc(e,t,a,c,h,f,x,j,C){return e=new ex(e,t,a,j,C),t===1?(t=1,f===!0&&(t|=8)):t=0,f=Wt(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Go(f),e}function tx(e,t,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:c==null?null:""+c,children:e,containerInfo:t,implementation:a}}function Ff(e){if(!e)return Bs;e=e._reactInternals;e:{if(kr(e)!==e||e.tag!==1)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ct(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(r(171))}if(e.tag===1){var a=e.type;if(Ct(a))return fh(e,a,t)}return t}function zf(e,t,a,c,h,f,x,j,C){return e=Dc(a,c,!0,e,h,f,x,j,C),e.context=Ff(null),a=e.current,c=wt(),h=Js(a),f=bs(c,h),f.callback=t??null,Hs(a,f,h),e.current.lanes=h,bi(e,h,c),Rt(e,c),e}function _l(e,t,a,c){var h=t.current,f=wt(),x=Js(h);return a=Ff(a),t.context===null?t.context=a:t.pendingContext=a,t=bs(f,x),t.payload={element:e},c=c===void 0?null:c,c!==null&&(t.callback=c),e=Hs(h,t,x),e!==null&&(Zt(e,h,x,f),el(e,h,x)),x}function Nl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function qf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Mc(e,t){qf(e,t),(e=e.alternate)&&qf(e,t)}function sx(){return null}var Bf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Uc(e){this._internalRoot=e}kl.prototype.render=Uc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));_l(e,t,null,null)},kl.prototype.unmount=Uc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ir(function(){_l(null,e,null,null)}),t[gs]=null}};function kl(e){this._internalRoot=e}kl.prototype.unstable_scheduleHydration=function(e){if(e){var t=kd();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Us.length&&t!==0&&t<Us[a].priority;a++);Us.splice(a,0,e),a===0&&Ed(e)}};function $c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Wf(){}function rx(e,t,a,c,h){if(h){if(typeof c=="function"){var f=c;c=function(){var F=Nl(x);f.call(F)}}var x=zf(t,c,e,0,null,!1,!1,"",Wf);return e._reactRootContainer=x,e[gs]=x.current,Li(e.nodeType===8?e.parentNode:e),Ir(),x}for(;h=e.lastChild;)e.removeChild(h);if(typeof c=="function"){var j=c;c=function(){var F=Nl(C);j.call(F)}}var C=Dc(e,0,!1,null,null,!1,!1,"",Wf);return e._reactRootContainer=C,e[gs]=C.current,Li(e.nodeType===8?e.parentNode:e),Ir(function(){_l(t,C,a,c)}),C}function Cl(e,t,a,c,h){var f=a._reactRootContainer;if(f){var x=f;if(typeof h=="function"){var j=h;h=function(){var C=Nl(x);j.call(C)}}_l(t,x,e,h)}else x=rx(a,t,e,h,c);return Nl(x)}_d=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var a=wi(t.pendingLanes);a!==0&&(oo(t,a|1),Rt(t,Ke()),(Ae&6)===0&&(Cn=Ke()+500,Ws()))}break;case 13:Ir(function(){var c=ws(e,1);if(c!==null){var h=wt();Zt(c,e,1,h)}}),Mc(e,1)}},co=function(e){if(e.tag===13){var t=ws(e,134217728);if(t!==null){var a=wt();Zt(t,e,134217728,a)}Mc(e,134217728)}},Nd=function(e){if(e.tag===13){var t=Js(e),a=ws(e,t);if(a!==null){var c=wt();Zt(a,e,t,c)}Mc(e,t)}},kd=function(){return De},Sd=function(e,t){var a=De;try{return De=e,t()}finally{De=a}},to=function(e,t,a){switch(t){case"input":if(Nr(e,a),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<a.length;t++){var c=a[t];if(c!==e&&c.form===e.form){var h=Wa(c);if(!h)throw Error(r(90));Te(c),Nr(c,h)}}}break;case"textarea":td(e,a);break;case"select":t=a.value,t!=null&&rn(e,!!a.multiple,t,!1)}},ud=Rc,dd=Ir;var nx={usingClientEntryPoint:!1,Events:[Ui,mn,Wa,od,cd,Rc]},Xi={findFiberByHostInstance:Sr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ix={bundleType:Xi.bundleType,version:Xi.version,rendererPackageName:Xi.rendererPackageName,rendererConfig:Xi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=pd(e),e===null?null:e.stateNode},findFiberByHostInstance:Xi.findFiberByHostInstance||sx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var El=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!El.isDisabled&&El.supportsFiber)try{ka=El.inject(ix),is=El}catch{}}return Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nx,Tt.createPortal=function(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$c(t))throw Error(r(200));return tx(e,t,null,a)},Tt.createRoot=function(e,t){if(!$c(e))throw Error(r(299));var a=!1,c="",h=Bf;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(c=t.identifierPrefix),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=Dc(e,1,!1,null,null,a,!1,c,h),e[gs]=t.current,Li(e.nodeType===8?e.parentNode:e),new Uc(t)},Tt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=pd(t),e=e===null?null:e.stateNode,e},Tt.flushSync=function(e){return Ir(e)},Tt.hydrate=function(e,t,a){if(!Sl(t))throw Error(r(200));return Cl(null,e,t,!0,a)},Tt.hydrateRoot=function(e,t,a){if(!$c(e))throw Error(r(405));var c=a!=null&&a.hydratedSources||null,h=!1,f="",x=Bf;if(a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),t=zf(t,null,e,1,a??null,h,!1,f,x),e[gs]=t.current,Li(e),c)for(e=0;e<c.length;e++)a=c[e],h=a._getVersion,h=h(a._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[a,h]:t.mutableSourceEagerHydrationData.push(a,h);return new kl(t)},Tt.render=function(e,t,a){if(!Sl(t))throw Error(r(200));return Cl(null,e,t,!1,a)},Tt.unmountComponentAtNode=function(e){if(!Sl(e))throw Error(r(40));return e._reactRootContainer?(Ir(function(){Cl(null,null,e,!1,function(){e._reactRootContainer=null,e[gs]=null})}),!0):!1},Tt.unstable_batchedUpdates=Rc,Tt.unstable_renderSubtreeIntoContainer=function(e,t,a,c){if(!Sl(a))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return Cl(e,t,a,!1,c)},Tt.version="18.3.1-next-f1338f8080-20240426",Tt}var Zf;function ap(){if(Zf)return Bc.exports;Zf=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(s){console.error(s)}}return n(),Bc.exports=px(),Bc.exports}var em;function gx(){if(em)return Rl;em=1;var n=ap();return Rl.createRoot=n.createRoot,Rl.hydrateRoot=n.hydrateRoot,Rl}var xx=gx();const vx=n=>n instanceof Error?n.message+`
`+n.stack:JSON.stringify(n,null,2);class yx extends zn.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}render(){return this.state.hasError?i.jsxs("div",{className:"p-4 border border-red-500 rounded",children:[i.jsx("h2",{className:"text-red-500",children:"Something went wrong."}),i.jsx("pre",{className:"mt-2 text-sm",children:vx(this.state.error)})]}):this.props.children}}ap();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ca(){return ca=Object.assign?Object.assign.bind():function(n){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(n[l]=r[l])}return n},ca.apply(this,arguments)}var pr;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(pr||(pr={}));const tm="popstate";function wx(n){n===void 0&&(n={});function s(l,o){let{pathname:u,search:d,hash:m}=l.location;return su("",{pathname:u,search:d,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(l,o){return typeof o=="string"?o:$l(o)}return jx(s,r,null,n)}function Ye(n,s){if(n===!1||n===null||typeof n>"u")throw new Error(s)}function lp(n,s){if(!n){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function bx(){return Math.random().toString(36).substr(2,8)}function sm(n,s){return{usr:n.state,key:n.key,idx:s}}function su(n,s,r,l){return r===void 0&&(r=null),ca({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof s=="string"?oi(s):s,{state:r,key:s&&s.key||l||bx()})}function $l(n){let{pathname:s="/",search:r="",hash:l=""}=n;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),l&&l!=="#"&&(s+=l.charAt(0)==="#"?l:"#"+l),s}function oi(n){let s={};if(n){let r=n.indexOf("#");r>=0&&(s.hash=n.substr(r),n=n.substr(0,r));let l=n.indexOf("?");l>=0&&(s.search=n.substr(l),n=n.substr(0,l)),n&&(s.pathname=n)}return s}function jx(n,s,r,l){l===void 0&&(l={});let{window:o=document.defaultView,v5Compat:u=!1}=l,d=o.history,m=pr.Pop,p=null,g=y();g==null&&(g=0,d.replaceState(ca({},d.state,{idx:g}),""));function y(){return(d.state||{idx:null}).idx}function v(){m=pr.Pop;let w=y(),A=w==null?null:w-g;g=w,p&&p({action:m,location:P.location,delta:A})}function b(w,A){m=pr.Push;let M=su(P.location,w,A);g=y()+1;let L=sm(M,g),R=P.createHref(M);try{d.pushState(L,"",R)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;o.location.assign(R)}u&&p&&p({action:m,location:P.location,delta:1})}function E(w,A){m=pr.Replace;let M=su(P.location,w,A);g=y();let L=sm(M,g),R=P.createHref(M);d.replaceState(L,"",R),u&&p&&p({action:m,location:P.location,delta:0})}function N(w){let A=o.location.origin!=="null"?o.location.origin:o.location.href,M=typeof w=="string"?w:$l(w);return M=M.replace(/ $/,"%20"),Ye(A,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,A)}let P={get action(){return m},get location(){return n(o,d)},listen(w){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(tm,v),p=w,()=>{o.removeEventListener(tm,v),p=null}},createHref(w){return s(o,w)},createURL:N,encodeLocation(w){let A=N(w);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:b,replace:E,go(w){return d.go(w)}};return P}var rm;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(rm||(rm={}));function _x(n,s,r){return r===void 0&&(r="/"),Nx(n,s,r)}function Nx(n,s,r,l){let o=typeof s=="string"?oi(s):s,u=Mu(o.pathname||"/",r);if(u==null)return null;let d=op(n);kx(d);let m=null;for(let p=0;m==null&&p<d.length;++p){let g=Mx(u);m=Ix(d[p],g)}return m}function op(n,s,r,l){s===void 0&&(s=[]),r===void 0&&(r=[]),l===void 0&&(l="");let o=(u,d,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};p.relativePath.startsWith("/")&&(Ye(p.relativePath.startsWith(l),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+l+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(l.length));let g=xr([l,p.relativePath]),y=r.concat(p);u.children&&u.children.length>0&&(Ye(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),op(u.children,s,y,g)),!(u.path==null&&!u.index)&&s.push({path:g,score:Ax(g,u.index),routesMeta:y})};return n.forEach((u,d)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,d);else for(let p of cp(u.path))o(u,d,p)}),s}function cp(n){let s=n.split("/");if(s.length===0)return[];let[r,...l]=s,o=r.endsWith("?"),u=r.replace(/\?$/,"");if(l.length===0)return o?[u,""]:[u];let d=cp(l.join("/")),m=[];return m.push(...d.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...d),m.map(p=>n.startsWith("/")&&p===""?"/":p)}function kx(n){n.sort((s,r)=>s.score!==r.score?r.score-s.score:Ox(s.routesMeta.map(l=>l.childrenIndex),r.routesMeta.map(l=>l.childrenIndex)))}const Sx=/^:[\w-]+$/,Cx=3,Ex=2,Px=1,Rx=10,Tx=-2,nm=n=>n==="*";function Ax(n,s){let r=n.split("/"),l=r.length;return r.some(nm)&&(l+=Tx),s&&(l+=Ex),r.filter(o=>!nm(o)).reduce((o,u)=>o+(Sx.test(u)?Cx:u===""?Px:Rx),l)}function Ox(n,s){return n.length===s.length&&n.slice(0,-1).every((l,o)=>l===s[o])?n[n.length-1]-s[s.length-1]:0}function Ix(n,s,r){let{routesMeta:l}=n,o={},u="/",d=[];for(let m=0;m<l.length;++m){let p=l[m],g=m===l.length-1,y=u==="/"?s:s.slice(u.length)||"/",v=Lx({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},y),b=p.route;if(!v)return null;Object.assign(o,v.params),d.push({params:o,pathname:xr([u,v.pathname]),pathnameBase:zx(xr([u,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(u=xr([u,v.pathnameBase]))}return d}function Lx(n,s){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[r,l]=Dx(n.path,n.caseSensitive,n.end),o=s.match(r);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:l.reduce((g,y,v)=>{let{paramName:b,isOptional:E}=y;if(b==="*"){let P=m[v]||"";d=u.slice(0,u.length-P.length).replace(/(.)\/+$/,"$1")}const N=m[v];return E&&!N?g[b]=void 0:g[b]=(N||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:d,pattern:n}}function Dx(n,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),lp(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let l=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,p)=>(l.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(l.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,s?void 0:"i"),l]}function Mx(n){try{return n.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return lp(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),n}}function Mu(n,s){if(s==="/")return n;if(!n.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,l=n.charAt(r);return l&&l!=="/"?null:n.slice(r)||"/"}function Ux(n,s){s===void 0&&(s="/");let{pathname:r,search:l="",hash:o=""}=typeof n=="string"?oi(n):n;return{pathname:r?r.startsWith("/")?r:$x(r,s):s,search:qx(l),hash:Bx(o)}}function $x(n,s){let r=s.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function Hc(n,s,r,l){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(l)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Fx(n){return n.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function Uu(n,s){let r=Fx(n);return s?r.map((l,o)=>o===r.length-1?l.pathname:l.pathnameBase):r.map(l=>l.pathnameBase)}function $u(n,s,r,l){l===void 0&&(l=!1);let o;typeof n=="string"?o=oi(n):(o=ca({},n),Ye(!o.pathname||!o.pathname.includes("?"),Hc("?","pathname","search",o)),Ye(!o.pathname||!o.pathname.includes("#"),Hc("#","pathname","hash",o)),Ye(!o.search||!o.search.includes("#"),Hc("#","search","hash",o)));let u=n===""||o.pathname==="",d=u?"/":o.pathname,m;if(d==null)m=r;else{let v=s.length-1;if(!l&&d.startsWith("..")){let b=d.split("/");for(;b[0]==="..";)b.shift(),v-=1;o.pathname=b.join("/")}m=v>=0?s[v]:"/"}let p=Ux(o,m),g=d&&d!=="/"&&d.endsWith("/"),y=(u||d===".")&&r.endsWith("/");return!p.pathname.endsWith("/")&&(g||y)&&(p.pathname+="/"),p}const xr=n=>n.join("/").replace(/\/\/+/g,"/"),zx=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),qx=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Bx=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Wx(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const up=["post","put","patch","delete"];new Set(up);const Qx=["get",...up];new Set(Qx);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ua(){return ua=Object.assign?Object.assign.bind():function(n){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(n[l]=r[l])}return n},ua.apply(this,arguments)}const Fu=O.createContext(null),Hx=O.createContext(null),wr=O.createContext(null),Ql=O.createContext(null),br=O.createContext({outlet:null,matches:[],isDataRoute:!1}),dp=O.createContext(null);function Kx(n,s){let{relative:r}=s===void 0?{}:s;ci()||Ye(!1);let{basename:l,navigator:o}=O.useContext(wr),{hash:u,pathname:d,search:m}=fp(n,{relative:r}),p=d;return l!=="/"&&(p=d==="/"?l:xr([l,d])),o.createHref({pathname:p,search:m,hash:u})}function ci(){return O.useContext(Ql)!=null}function en(){return ci()||Ye(!1),O.useContext(Ql).location}function hp(n){O.useContext(wr).static||O.useLayoutEffect(n)}function tn(){let{isDataRoute:n}=O.useContext(br);return n?av():Vx()}function Vx(){ci()||Ye(!1);let n=O.useContext(Fu),{basename:s,future:r,navigator:l}=O.useContext(wr),{matches:o}=O.useContext(br),{pathname:u}=en(),d=JSON.stringify(Uu(o,r.v7_relativeSplatPath)),m=O.useRef(!1);return hp(()=>{m.current=!0}),O.useCallback(function(g,y){if(y===void 0&&(y={}),!m.current)return;if(typeof g=="number"){l.go(g);return}let v=$u(g,JSON.parse(d),u,y.relative==="path");n==null&&s!=="/"&&(v.pathname=v.pathname==="/"?s:xr([s,v.pathname])),(y.replace?l.replace:l.push)(v,y.state,y)},[s,l,d,u,n])}function fp(n,s){let{relative:r}=s===void 0?{}:s,{future:l}=O.useContext(wr),{matches:o}=O.useContext(br),{pathname:u}=en(),d=JSON.stringify(Uu(o,l.v7_relativeSplatPath));return O.useMemo(()=>$u(n,JSON.parse(d),u,r==="path"),[n,d,u,r])}function Gx(n,s){return Jx(n,s)}function Jx(n,s,r,l){ci()||Ye(!1);let{navigator:o,static:u}=O.useContext(wr),{matches:d}=O.useContext(br),m=d[d.length-1],p=m?m.params:{};m&&m.pathname;let g=m?m.pathnameBase:"/";m&&m.route;let y=en(),v;if(s){var b;let A=typeof s=="string"?oi(s):s;g==="/"||(b=A.pathname)!=null&&b.startsWith(g)||Ye(!1),v=A}else v=y;let E=v.pathname||"/",N=E;if(g!=="/"){let A=g.replace(/^\//,"").split("/");N="/"+E.replace(/^\//,"").split("/").slice(A.length).join("/")}let P=_x(n,{pathname:N}),w=tv(P&&P.map(A=>Object.assign({},A,{params:Object.assign({},p,A.params),pathname:xr([g,o.encodeLocation?o.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?g:xr([g,o.encodeLocation?o.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),d,r,l);return s&&w?O.createElement(Ql.Provider,{value:{location:ua({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:pr.Pop}},w):w}function Yx(){let n=iv(),s=Wx(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),r=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},s),r?O.createElement("pre",{style:o},r):null,null)}const Xx=O.createElement(Yx,null);class Zx extends O.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?O.createElement(br.Provider,{value:this.props.routeContext},O.createElement(dp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ev(n){let{routeContext:s,match:r,children:l}=n,o=O.useContext(Fu);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),O.createElement(br.Provider,{value:s},l)}function tv(n,s,r,l){var o;if(s===void 0&&(s=[]),r===void 0&&(r=null),l===void 0&&(l=null),n==null){var u;if(!r)return null;if(r.errors)n=r.matches;else if((u=l)!=null&&u.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)n=r.matches;else return null}let d=n,m=(o=r)==null?void 0:o.errors;if(m!=null){let y=d.findIndex(v=>v.route.id&&(m==null?void 0:m[v.route.id])!==void 0);y>=0||Ye(!1),d=d.slice(0,Math.min(d.length,y+1))}let p=!1,g=-1;if(r&&l&&l.v7_partialHydration)for(let y=0;y<d.length;y++){let v=d[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(g=y),v.route.id){let{loaderData:b,errors:E}=r,N=v.route.loader&&b[v.route.id]===void 0&&(!E||E[v.route.id]===void 0);if(v.route.lazy||N){p=!0,g>=0?d=d.slice(0,g+1):d=[d[0]];break}}}return d.reduceRight((y,v,b)=>{let E,N=!1,P=null,w=null;r&&(E=m&&v.route.id?m[v.route.id]:void 0,P=v.route.errorElement||Xx,p&&(g<0&&b===0?(lv("route-fallback"),N=!0,w=null):g===b&&(N=!0,w=v.route.hydrateFallbackElement||null)));let A=s.concat(d.slice(0,b+1)),M=()=>{let L;return E?L=P:N?L=w:v.route.Component?L=O.createElement(v.route.Component,null):v.route.element?L=v.route.element:L=y,O.createElement(ev,{match:v,routeContext:{outlet:y,matches:A,isDataRoute:r!=null},children:L})};return r&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?O.createElement(Zx,{location:r.location,revalidation:r.revalidation,component:P,error:E,children:M(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):M()},null)}var mp=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(mp||{}),pp=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(pp||{});function sv(n){let s=O.useContext(Fu);return s||Ye(!1),s}function rv(n){let s=O.useContext(Hx);return s||Ye(!1),s}function nv(n){let s=O.useContext(br);return s||Ye(!1),s}function gp(n){let s=nv(),r=s.matches[s.matches.length-1];return r.route.id||Ye(!1),r.route.id}function iv(){var n;let s=O.useContext(dp),r=rv(),l=gp();return s!==void 0?s:(n=r.errors)==null?void 0:n[l]}function av(){let{router:n}=sv(mp.UseNavigateStable),s=gp(pp.UseNavigateStable),r=O.useRef(!1);return hp(()=>{r.current=!0}),O.useCallback(function(o,u){u===void 0&&(u={}),r.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,ua({fromRouteId:s},u)))},[n,s])}const im={};function lv(n,s,r){im[n]||(im[n]=!0)}function ov(n,s){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function qn(n){let{to:s,replace:r,state:l,relative:o}=n;ci()||Ye(!1);let{future:u,static:d}=O.useContext(wr),{matches:m}=O.useContext(br),{pathname:p}=en(),g=tn(),y=$u(s,Uu(m,u.v7_relativeSplatPath),p,o==="path"),v=JSON.stringify(y);return O.useEffect(()=>g(JSON.parse(v),{replace:r,state:l,relative:o}),[g,v,o,r,l]),null}function Ut(n){Ye(!1)}function cv(n){let{basename:s="/",children:r=null,location:l,navigationType:o=pr.Pop,navigator:u,static:d=!1,future:m}=n;ci()&&Ye(!1);let p=s.replace(/^\/*/,"/"),g=O.useMemo(()=>({basename:p,navigator:u,static:d,future:ua({v7_relativeSplatPath:!1},m)}),[p,m,u,d]);typeof l=="string"&&(l=oi(l));let{pathname:y="/",search:v="",hash:b="",state:E=null,key:N="default"}=l,P=O.useMemo(()=>{let w=Mu(y,p);return w==null?null:{location:{pathname:w,search:v,hash:b,state:E,key:N},navigationType:o}},[p,y,v,b,E,N,o]);return P==null?null:O.createElement(wr.Provider,{value:g},O.createElement(Ql.Provider,{children:r,value:P}))}function uv(n){let{children:s,location:r}=n;return Gx(ru(s),r)}new Promise(()=>{});function ru(n,s){s===void 0&&(s=[]);let r=[];return O.Children.forEach(n,(l,o)=>{if(!O.isValidElement(l))return;let u=[...s,o];if(l.type===O.Fragment){r.push.apply(r,ru(l.props.children,u));return}l.type!==Ut&&Ye(!1),!l.props.index||!l.props.children||Ye(!1);let d={id:l.props.id||u.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,loader:l.props.loader,action:l.props.action,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(d.children=ru(l.props.children,u)),r.push(d)}),r}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nu(){return nu=Object.assign?Object.assign.bind():function(n){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(n[l]=r[l])}return n},nu.apply(this,arguments)}function dv(n,s){if(n==null)return{};var r={},l=Object.keys(n),o,u;for(u=0;u<l.length;u++)o=l[u],!(s.indexOf(o)>=0)&&(r[o]=n[o]);return r}function hv(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function fv(n,s){return n.button===0&&(!s||s==="_self")&&!hv(n)}function iu(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((s,r)=>{let l=n[r];return s.concat(Array.isArray(l)?l.map(o=>[r,o]):[[r,l]])},[]))}function mv(n,s){let r=iu(n);return s&&s.forEach((l,o)=>{r.has(o)||s.getAll(o).forEach(u=>{r.append(o,u)})}),r}const pv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gv="6";try{window.__reactRouterVersion=gv}catch{}const xv="startTransition",am=hx[xv];function vv(n){let{basename:s,children:r,future:l,window:o}=n,u=O.useRef();u.current==null&&(u.current=wx({window:o,v5Compat:!0}));let d=u.current,[m,p]=O.useState({action:d.action,location:d.location}),{v7_startTransition:g}=l||{},y=O.useCallback(v=>{g&&am?am(()=>p(v)):p(v)},[p,g]);return O.useLayoutEffect(()=>d.listen(y),[d,y]),O.useEffect(()=>ov(l),[l]),O.createElement(cv,{basename:s,children:r,location:m.location,navigationType:m.action,navigator:d,future:l})}const yv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ge=O.forwardRef(function(s,r){let{onClick:l,relative:o,reloadDocument:u,replace:d,state:m,target:p,to:g,preventScrollReset:y,viewTransition:v}=s,b=dv(s,pv),{basename:E}=O.useContext(wr),N,P=!1;if(typeof g=="string"&&wv.test(g)&&(N=g,yv))try{let L=new URL(window.location.href),R=g.startsWith("//")?new URL(L.protocol+g):new URL(g),$=Mu(R.pathname,E);R.origin===L.origin&&$!=null?g=$+R.search+R.hash:P=!0}catch{}let w=Kx(g,{relative:o}),A=bv(g,{replace:d,state:m,target:p,preventScrollReset:y,relative:o,viewTransition:v});function M(L){l&&l(L),L.defaultPrevented||A(L)}return O.createElement("a",nu({},b,{href:N||w,onClick:P||u?l:M,ref:r,target:p}))});var lm;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(lm||(lm={}));var om;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(om||(om={}));function bv(n,s){let{target:r,replace:l,state:o,preventScrollReset:u,relative:d,viewTransition:m}=s===void 0?{}:s,p=tn(),g=en(),y=fp(n,{relative:d});return O.useCallback(v=>{if(fv(v,r)){v.preventDefault();let b=l!==void 0?l:$l(g)===$l(y);p(n,{replace:b,state:o,preventScrollReset:u,relative:d,viewTransition:m})}},[g,p,y,l,o,r,n,u,d,m])}function jv(n){let s=O.useRef(iu(n)),r=O.useRef(!1),l=en(),o=O.useMemo(()=>mv(l.search,r.current?null:s.current),[l.search]),u=tn(),d=O.useCallback((m,p)=>{const g=iu(typeof m=="function"?m(o):m);r.current=!0,u("?"+g,p)},[u,o]);return[o,d]}var ui=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Yr=typeof window>"u"||"Deno"in globalThis;function Nt(){}function _v(n,s){return typeof n=="function"?n(s):n}function au(n){return typeof n=="number"&&n>=0&&n!==1/0}function xp(n,s){return Math.max(n+(s||0)-Date.now(),0)}function vr(n,s){return typeof n=="function"?n(s):n}function Ht(n,s){return typeof n=="function"?n(s):n}function cm(n,s){const{type:r="all",exact:l,fetchStatus:o,predicate:u,queryKey:d,stale:m}=n;if(d){if(l){if(s.queryHash!==zu(d,s.options))return!1}else if(!da(s.queryKey,d))return!1}if(r!=="all"){const p=s.isActive();if(r==="active"&&!p||r==="inactive"&&p)return!1}return!(typeof m=="boolean"&&s.isStale()!==m||o&&o!==s.state.fetchStatus||u&&!u(s))}function um(n,s){const{exact:r,status:l,predicate:o,mutationKey:u}=n;if(u){if(!s.options.mutationKey)return!1;if(r){if(Xr(s.options.mutationKey)!==Xr(u))return!1}else if(!da(s.options.mutationKey,u))return!1}return!(l&&s.state.status!==l||o&&!o(s))}function zu(n,s){return((s==null?void 0:s.queryKeyHashFn)||Xr)(n)}function Xr(n){return JSON.stringify(n,(s,r)=>lu(r)?Object.keys(r).sort().reduce((l,o)=>(l[o]=r[o],l),{}):r)}function da(n,s){return n===s?!0:typeof n!=typeof s?!1:n&&s&&typeof n=="object"&&typeof s=="object"?Object.keys(s).every(r=>da(n[r],s[r])):!1}function vp(n,s){if(n===s)return n;const r=dm(n)&&dm(s);if(r||lu(n)&&lu(s)){const l=r?n:Object.keys(n),o=l.length,u=r?s:Object.keys(s),d=u.length,m=r?[]:{},p=new Set(l);let g=0;for(let y=0;y<d;y++){const v=r?y:u[y];(!r&&p.has(v)||r)&&n[v]===void 0&&s[v]===void 0?(m[v]=void 0,g++):(m[v]=vp(n[v],s[v]),m[v]===n[v]&&n[v]!==void 0&&g++)}return o===d&&g===o?n:m}return s}function Fl(n,s){if(!s||Object.keys(n).length!==Object.keys(s).length)return!1;for(const r in n)if(n[r]!==s[r])return!1;return!0}function dm(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function lu(n){if(!hm(n))return!1;const s=n.constructor;if(s===void 0)return!0;const r=s.prototype;return!(!hm(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function hm(n){return Object.prototype.toString.call(n)==="[object Object]"}function Nv(n){return new Promise(s=>{setTimeout(s,n)})}function ou(n,s,r){return typeof r.structuralSharing=="function"?r.structuralSharing(n,s):r.structuralSharing!==!1?vp(n,s):s}function kv(n,s,r=0){const l=[...n,s];return r&&l.length>r?l.slice(1):l}function Sv(n,s,r=0){const l=[s,...n];return r&&l.length>r?l.slice(0,-1):l}var qu=Symbol();function yp(n,s){return!n.queryFn&&(s!=null&&s.initialPromise)?()=>s.initialPromise:!n.queryFn||n.queryFn===qu?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function wp(n,s){return typeof n=="function"?n(...s):!!n}var Br,ar,Wn,Gm,Cv=(Gm=class extends ui{constructor(){super();ge(this,Br);ge(this,ar);ge(this,Wn);ae(this,Wn,s=>{if(!Yr&&window.addEventListener){const r=()=>s();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){S(this,ar)||this.setEventListener(S(this,Wn))}onUnsubscribe(){var s;this.hasListeners()||((s=S(this,ar))==null||s.call(this),ae(this,ar,void 0))}setEventListener(s){var r;ae(this,Wn,s),(r=S(this,ar))==null||r.call(this),ae(this,ar,s(l=>{typeof l=="boolean"?this.setFocused(l):this.onFocus()}))}setFocused(s){S(this,Br)!==s&&(ae(this,Br,s),this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(r=>{r(s)})}isFocused(){var s;return typeof S(this,Br)=="boolean"?S(this,Br):((s=globalThis.document)==null?void 0:s.visibilityState)!=="hidden"}},Br=new WeakMap,ar=new WeakMap,Wn=new WeakMap,Gm),Bu=new Cv,Qn,lr,Hn,Jm,Ev=(Jm=class extends ui{constructor(){super();ge(this,Qn,!0);ge(this,lr);ge(this,Hn);ae(this,Hn,s=>{if(!Yr&&window.addEventListener){const r=()=>s(!0),l=()=>s(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",l,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",l)}}})}onSubscribe(){S(this,lr)||this.setEventListener(S(this,Hn))}onUnsubscribe(){var s;this.hasListeners()||((s=S(this,lr))==null||s.call(this),ae(this,lr,void 0))}setEventListener(s){var r;ae(this,Hn,s),(r=S(this,lr))==null||r.call(this),ae(this,lr,s(this.setOnline.bind(this)))}setOnline(s){S(this,Qn)!==s&&(ae(this,Qn,s),this.listeners.forEach(l=>{l(s)}))}isOnline(){return S(this,Qn)}},Qn=new WeakMap,lr=new WeakMap,Hn=new WeakMap,Jm),zl=new Ev;function cu(){let n,s;const r=new Promise((o,u)=>{n=o,s=u});r.status="pending",r.catch(()=>{});function l(o){Object.assign(r,o),delete r.resolve,delete r.reject}return r.resolve=o=>{l({status:"fulfilled",value:o}),n(o)},r.reject=o=>{l({status:"rejected",reason:o}),s(o)},r}function Pv(n){return Math.min(1e3*2**n,3e4)}function bp(n){return(n??"online")==="online"?zl.isOnline():!0}var jp=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function _p(n){let s=!1,r=0,l;const o=cu(),u=()=>o.status!=="pending",d=P=>{var w;u()||(b(new jp(P)),(w=n.abort)==null||w.call(n))},m=()=>{s=!0},p=()=>{s=!1},g=()=>Bu.isFocused()&&(n.networkMode==="always"||zl.isOnline())&&n.canRun(),y=()=>bp(n.networkMode)&&n.canRun(),v=P=>{u()||(l==null||l(),o.resolve(P))},b=P=>{u()||(l==null||l(),o.reject(P))},E=()=>new Promise(P=>{var w;l=A=>{(u()||g())&&P(A)},(w=n.onPause)==null||w.call(n)}).then(()=>{var P;l=void 0,u()||(P=n.onContinue)==null||P.call(n)}),N=()=>{if(u())return;let P;const w=r===0?n.initialPromise:void 0;try{P=w??n.fn()}catch(A){P=Promise.reject(A)}Promise.resolve(P).then(v).catch(A=>{var W;if(u())return;const M=n.retry??(Yr?0:3),L=n.retryDelay??Pv,R=typeof L=="function"?L(r,A):L,$=M===!0||typeof M=="number"&&r<M||typeof M=="function"&&M(r,A);if(s||!$){b(A);return}r++,(W=n.onFail)==null||W.call(n,r,A),Nv(R).then(()=>g()?void 0:E()).then(()=>{s?b(A):N()})})};return{promise:o,status:()=>o.status,cancel:d,continue:()=>(l==null||l(),o),cancelRetry:m,continueRetry:p,canStart:y,start:()=>(y()?N():E().then(N),o)}}var Rv=n=>setTimeout(n,0);function Tv(){let n=[],s=0,r=m=>{m()},l=m=>{m()},o=Rv;const u=m=>{s?n.push(m):o(()=>{r(m)})},d=()=>{const m=n;n=[],m.length&&o(()=>{l(()=>{m.forEach(p=>{r(p)})})})};return{batch:m=>{let p;s++;try{p=m()}finally{s--,s||d()}return p},batchCalls:m=>(...p)=>{u(()=>{m(...p)})},schedule:u,setNotifyFunction:m=>{r=m},setBatchNotifyFunction:m=>{l=m},setScheduler:m=>{o=m}}}var rt=Tv(),Wr,Ym,Np=(Ym=class{constructor(){ge(this,Wr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),au(this.gcTime)&&ae(this,Wr,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Yr?1/0:5*60*1e3))}clearGcTimeout(){S(this,Wr)&&(clearTimeout(S(this,Wr)),ae(this,Wr,void 0))}},Wr=new WeakMap,Ym),Kn,Vn,Qt,Qr,ot,ma,Hr,ts,ks,Xm,Av=(Xm=class extends Np{constructor(s){super();ge(this,ts);ge(this,Kn);ge(this,Vn);ge(this,Qt);ge(this,Qr);ge(this,ot);ge(this,ma);ge(this,Hr);ae(this,Hr,!1),ae(this,ma,s.defaultOptions),this.setOptions(s.options),this.observers=[],ae(this,Qr,s.client),ae(this,Qt,S(this,Qr).getQueryCache()),this.queryKey=s.queryKey,this.queryHash=s.queryHash,ae(this,Kn,Ov(this.options)),this.state=s.state??S(this,Kn),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var s;return(s=S(this,ot))==null?void 0:s.promise}setOptions(s){this.options={...S(this,ma),...s},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&S(this,Qt).remove(this)}setData(s,r){const l=ou(this.state.data,s,this.options);return ke(this,ts,ks).call(this,{data:l,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),l}setState(s,r){ke(this,ts,ks).call(this,{type:"setState",state:s,setStateOptions:r})}cancel(s){var l,o;const r=(l=S(this,ot))==null?void 0:l.promise;return(o=S(this,ot))==null||o.cancel(s),r?r.then(Nt).catch(Nt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(S(this,Kn))}isActive(){return this.observers.some(s=>Ht(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===qu||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>vr(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!xp(this.state.dataUpdatedAt,s)}onFocus(){var r;const s=this.observers.find(l=>l.shouldFetchOnWindowFocus());s==null||s.refetch({cancelRefetch:!1}),(r=S(this,ot))==null||r.continue()}onOnline(){var r;const s=this.observers.find(l=>l.shouldFetchOnReconnect());s==null||s.refetch({cancelRefetch:!1}),(r=S(this,ot))==null||r.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),S(this,Qt).notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(r=>r!==s),this.observers.length||(S(this,ot)&&(S(this,Hr)?S(this,ot).cancel({revert:!0}):S(this,ot).cancelRetry()),this.scheduleGc()),S(this,Qt).notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ke(this,ts,ks).call(this,{type:"invalidate"})}async fetch(s,r){var p,g,y,v,b,E,N,P,w,A,M,L;if(this.state.fetchStatus!=="idle"&&((p=S(this,ot))==null?void 0:p.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(S(this,ot))return S(this,ot).continueRetry(),S(this,ot).promise}if(s&&this.setOptions(s),!this.options.queryFn){const R=this.observers.find($=>$.options.queryFn);R&&this.setOptions(R.options)}const l=new AbortController,o=R=>{Object.defineProperty(R,"signal",{enumerable:!0,get:()=>(ae(this,Hr,!0),l.signal)})},u=()=>{const R=yp(this.options,r),W=(()=>{const se={client:S(this,Qr),queryKey:this.queryKey,meta:this.meta};return o(se),se})();return ae(this,Hr,!1),this.options.persister?this.options.persister(R,W,this):R(W)},m=(()=>{const R={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:S(this,Qr),state:this.state,fetchFn:u};return o(R),R})();(g=this.options.behavior)==null||g.onFetch(m,this),ae(this,Vn,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((y=m.fetchOptions)==null?void 0:y.meta))&&ke(this,ts,ks).call(this,{type:"fetch",meta:(v=m.fetchOptions)==null?void 0:v.meta}),ae(this,ot,_p({initialPromise:r==null?void 0:r.initialPromise,fn:m.fetchFn,abort:l.abort.bind(l),onFail:(R,$)=>{ke(this,ts,ks).call(this,{type:"failed",failureCount:R,error:$})},onPause:()=>{ke(this,ts,ks).call(this,{type:"pause"})},onContinue:()=>{ke(this,ts,ks).call(this,{type:"continue"})},retry:m.options.retry,retryDelay:m.options.retryDelay,networkMode:m.options.networkMode,canRun:()=>!0}));try{const R=await S(this,ot).start();if(R===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(R),(E=(b=S(this,Qt).config).onSuccess)==null||E.call(b,R,this),(P=(N=S(this,Qt).config).onSettled)==null||P.call(N,R,this.state.error,this),R}catch(R){if(R instanceof jp){if(R.silent)return S(this,ot).promise;if(R.revert){if(this.setState({...S(this,Vn),fetchStatus:"idle"}),this.state.data===void 0)throw R;return this.state.data}}throw ke(this,ts,ks).call(this,{type:"error",error:R}),(A=(w=S(this,Qt).config).onError)==null||A.call(w,R,this),(L=(M=S(this,Qt).config).onSettled)==null||L.call(M,this.state.data,R,this),R}finally{this.scheduleGc()}}},Kn=new WeakMap,Vn=new WeakMap,Qt=new WeakMap,Qr=new WeakMap,ot=new WeakMap,ma=new WeakMap,Hr=new WeakMap,ts=new WeakSet,ks=function(s){const r=l=>{switch(s.type){case"failed":return{...l,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...l,fetchStatus:"paused"};case"continue":return{...l,fetchStatus:"fetching"};case"fetch":return{...l,...kp(l.data,this.options),fetchMeta:s.meta??null};case"success":const o={...l,data:s.data,dataUpdateCount:l.dataUpdateCount+1,dataUpdatedAt:s.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ae(this,Vn,s.manual?o:void 0),o;case"error":const u=s.error;return{...l,error:u,errorUpdateCount:l.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:l.fetchFailureCount+1,fetchFailureReason:u,fetchStatus:"idle",status:"error"};case"invalidate":return{...l,isInvalidated:!0};case"setState":return{...l,...s.state}}};this.state=r(this.state),rt.batch(()=>{this.observers.forEach(l=>{l.onQueryUpdate()}),S(this,Qt).notify({query:this,type:"updated",action:s})})},Xm);function kp(n,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:bp(s.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function Ov(n){const s=typeof n.initialData=="function"?n.initialData():n.initialData,r=s!==void 0,l=r?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:r?l??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ds,Zm,Iv=(Zm=class extends ui{constructor(s={}){super();ge(this,ds);this.config=s,ae(this,ds,new Map)}build(s,r,l){const o=r.queryKey,u=r.queryHash??zu(o,r);let d=this.get(u);return d||(d=new Av({client:s,queryKey:o,queryHash:u,options:s.defaultQueryOptions(r),state:l,defaultOptions:s.getQueryDefaults(o)}),this.add(d)),d}add(s){S(this,ds).has(s.queryHash)||(S(this,ds).set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const r=S(this,ds).get(s.queryHash);r&&(s.destroy(),r===s&&S(this,ds).delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){rt.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return S(this,ds).get(s)}getAll(){return[...S(this,ds).values()]}find(s){const r={exact:!0,...s};return this.getAll().find(l=>cm(r,l))}findAll(s={}){const r=this.getAll();return Object.keys(s).length>0?r.filter(l=>cm(s,l)):r}notify(s){rt.batch(()=>{this.listeners.forEach(r=>{r(s)})})}onFocus(){rt.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){rt.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},ds=new WeakMap,Zm),hs,jt,Kr,fs,tr,ep,Lv=(ep=class extends Np{constructor(s){super();ge(this,fs);ge(this,hs);ge(this,jt);ge(this,Kr);this.mutationId=s.mutationId,ae(this,jt,s.mutationCache),ae(this,hs,[]),this.state=s.state||Sp(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){S(this,hs).includes(s)||(S(this,hs).push(s),this.clearGcTimeout(),S(this,jt).notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){ae(this,hs,S(this,hs).filter(r=>r!==s)),this.scheduleGc(),S(this,jt).notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){S(this,hs).length||(this.state.status==="pending"?this.scheduleGc():S(this,jt).remove(this))}continue(){var s;return((s=S(this,Kr))==null?void 0:s.continue())??this.execute(this.state.variables)}async execute(s){var u,d,m,p,g,y,v,b,E,N,P,w,A,M,L,R,$,W,se,le;const r=()=>{ke(this,fs,tr).call(this,{type:"continue"})};ae(this,Kr,_p({fn:()=>this.options.mutationFn?this.options.mutationFn(s):Promise.reject(new Error("No mutationFn found")),onFail:(we,_)=>{ke(this,fs,tr).call(this,{type:"failed",failureCount:we,error:_})},onPause:()=>{ke(this,fs,tr).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>S(this,jt).canRun(this)}));const l=this.state.status==="pending",o=!S(this,Kr).canStart();try{if(l)r();else{ke(this,fs,tr).call(this,{type:"pending",variables:s,isPaused:o}),await((d=(u=S(this,jt).config).onMutate)==null?void 0:d.call(u,s,this));const _=await((p=(m=this.options).onMutate)==null?void 0:p.call(m,s));_!==this.state.context&&ke(this,fs,tr).call(this,{type:"pending",context:_,variables:s,isPaused:o})}const we=await S(this,Kr).start();return await((y=(g=S(this,jt).config).onSuccess)==null?void 0:y.call(g,we,s,this.state.context,this)),await((b=(v=this.options).onSuccess)==null?void 0:b.call(v,we,s,this.state.context)),await((N=(E=S(this,jt).config).onSettled)==null?void 0:N.call(E,we,null,this.state.variables,this.state.context,this)),await((w=(P=this.options).onSettled)==null?void 0:w.call(P,we,null,s,this.state.context)),ke(this,fs,tr).call(this,{type:"success",data:we}),we}catch(we){try{throw await((M=(A=S(this,jt).config).onError)==null?void 0:M.call(A,we,s,this.state.context,this)),await((R=(L=this.options).onError)==null?void 0:R.call(L,we,s,this.state.context)),await((W=($=S(this,jt).config).onSettled)==null?void 0:W.call($,void 0,we,this.state.variables,this.state.context,this)),await((le=(se=this.options).onSettled)==null?void 0:le.call(se,void 0,we,s,this.state.context)),we}finally{ke(this,fs,tr).call(this,{type:"error",error:we})}}finally{S(this,jt).runNext(this)}}},hs=new WeakMap,jt=new WeakMap,Kr=new WeakMap,fs=new WeakSet,tr=function(s){const r=l=>{switch(s.type){case"failed":return{...l,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...l,isPaused:!0};case"continue":return{...l,isPaused:!1};case"pending":return{...l,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...l,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...l,data:void 0,error:s.error,failureCount:l.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=r(this.state),rt.batch(()=>{S(this,hs).forEach(l=>{l.onMutationUpdate(s)}),S(this,jt).notify({mutation:this,type:"updated",action:s})})},ep);function Sp(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Es,ss,pa,tp,Dv=(tp=class extends ui{constructor(s={}){super();ge(this,Es);ge(this,ss);ge(this,pa);this.config=s,ae(this,Es,new Set),ae(this,ss,new Map),ae(this,pa,0)}build(s,r,l){const o=new Lv({mutationCache:this,mutationId:++Pl(this,pa)._,options:s.defaultMutationOptions(r),state:l});return this.add(o),o}add(s){S(this,Es).add(s);const r=Tl(s);if(typeof r=="string"){const l=S(this,ss).get(r);l?l.push(s):S(this,ss).set(r,[s])}this.notify({type:"added",mutation:s})}remove(s){if(S(this,Es).delete(s)){const r=Tl(s);if(typeof r=="string"){const l=S(this,ss).get(r);if(l)if(l.length>1){const o=l.indexOf(s);o!==-1&&l.splice(o,1)}else l[0]===s&&S(this,ss).delete(r)}}this.notify({type:"removed",mutation:s})}canRun(s){const r=Tl(s);if(typeof r=="string"){const l=S(this,ss).get(r),o=l==null?void 0:l.find(u=>u.state.status==="pending");return!o||o===s}else return!0}runNext(s){var l;const r=Tl(s);if(typeof r=="string"){const o=(l=S(this,ss).get(r))==null?void 0:l.find(u=>u!==s&&u.state.isPaused);return(o==null?void 0:o.continue())??Promise.resolve()}else return Promise.resolve()}clear(){rt.batch(()=>{S(this,Es).forEach(s=>{this.notify({type:"removed",mutation:s})}),S(this,Es).clear(),S(this,ss).clear()})}getAll(){return Array.from(S(this,Es))}find(s){const r={exact:!0,...s};return this.getAll().find(l=>um(r,l))}findAll(s={}){return this.getAll().filter(r=>um(s,r))}notify(s){rt.batch(()=>{this.listeners.forEach(r=>{r(s)})})}resumePausedMutations(){const s=this.getAll().filter(r=>r.state.isPaused);return rt.batch(()=>Promise.all(s.map(r=>r.continue().catch(Nt))))}},Es=new WeakMap,ss=new WeakMap,pa=new WeakMap,tp);function Tl(n){var s;return(s=n.options.scope)==null?void 0:s.id}function fm(n){return{onFetch:(s,r)=>{var y,v,b,E,N;const l=s.options,o=(b=(v=(y=s.fetchOptions)==null?void 0:y.meta)==null?void 0:v.fetchMore)==null?void 0:b.direction,u=((E=s.state.data)==null?void 0:E.pages)||[],d=((N=s.state.data)==null?void 0:N.pageParams)||[];let m={pages:[],pageParams:[]},p=0;const g=async()=>{let P=!1;const w=L=>{Object.defineProperty(L,"signal",{enumerable:!0,get:()=>(s.signal.aborted?P=!0:s.signal.addEventListener("abort",()=>{P=!0}),s.signal)})},A=yp(s.options,s.fetchOptions),M=async(L,R,$)=>{if(P)return Promise.reject();if(R==null&&L.pages.length)return Promise.resolve(L);const se=(()=>{const Q={client:s.client,queryKey:s.queryKey,pageParam:R,direction:$?"backward":"forward",meta:s.options.meta};return w(Q),Q})(),le=await A(se),{maxPages:we}=s.options,_=$?Sv:kv;return{pages:_(L.pages,le,we),pageParams:_(L.pageParams,R,we)}};if(o&&u.length){const L=o==="backward",R=L?Mv:mm,$={pages:u,pageParams:d},W=R(l,$);m=await M($,W,L)}else{const L=n??u.length;do{const R=p===0?d[0]??l.initialPageParam:mm(l,m);if(p>0&&R==null)break;m=await M(m,R),p++}while(p<L)}return m};s.options.persister?s.fetchFn=()=>{var P,w;return(w=(P=s.options).persister)==null?void 0:w.call(P,g,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},r)}:s.fetchFn=g}}}function mm(n,{pages:s,pageParams:r}){const l=s.length-1;return s.length>0?n.getNextPageParam(s[l],s,r[l],r):void 0}function Mv(n,{pages:s,pageParams:r}){var l;return s.length>0?(l=n.getPreviousPageParam)==null?void 0:l.call(n,s[0],s,r[0],r):void 0}var He,or,cr,Gn,Jn,ur,Yn,Xn,sp,Uv=(sp=class{constructor(n={}){ge(this,He);ge(this,or);ge(this,cr);ge(this,Gn);ge(this,Jn);ge(this,ur);ge(this,Yn);ge(this,Xn);ae(this,He,n.queryCache||new Iv),ae(this,or,n.mutationCache||new Dv),ae(this,cr,n.defaultOptions||{}),ae(this,Gn,new Map),ae(this,Jn,new Map),ae(this,ur,0)}mount(){Pl(this,ur)._++,S(this,ur)===1&&(ae(this,Yn,Bu.subscribe(async n=>{n&&(await this.resumePausedMutations(),S(this,He).onFocus())})),ae(this,Xn,zl.subscribe(async n=>{n&&(await this.resumePausedMutations(),S(this,He).onOnline())})))}unmount(){var n,s;Pl(this,ur)._--,S(this,ur)===0&&((n=S(this,Yn))==null||n.call(this),ae(this,Yn,void 0),(s=S(this,Xn))==null||s.call(this),ae(this,Xn,void 0))}isFetching(n){return S(this,He).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return S(this,or).findAll({...n,status:"pending"}).length}getQueryData(n){var r;const s=this.defaultQueryOptions({queryKey:n});return(r=S(this,He).get(s.queryHash))==null?void 0:r.state.data}ensureQueryData(n){const s=this.defaultQueryOptions(n),r=S(this,He).build(this,s),l=r.state.data;return l===void 0?this.fetchQuery(n):(n.revalidateIfStale&&r.isStaleByTime(vr(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(l))}getQueriesData(n){return S(this,He).findAll(n).map(({queryKey:s,state:r})=>{const l=r.data;return[s,l]})}setQueryData(n,s,r){const l=this.defaultQueryOptions({queryKey:n}),o=S(this,He).get(l.queryHash),u=o==null?void 0:o.state.data,d=_v(s,u);if(d!==void 0)return S(this,He).build(this,l).setData(d,{...r,manual:!0})}setQueriesData(n,s,r){return rt.batch(()=>S(this,He).findAll(n).map(({queryKey:l})=>[l,this.setQueryData(l,s,r)]))}getQueryState(n){var r;const s=this.defaultQueryOptions({queryKey:n});return(r=S(this,He).get(s.queryHash))==null?void 0:r.state}removeQueries(n){const s=S(this,He);rt.batch(()=>{s.findAll(n).forEach(r=>{s.remove(r)})})}resetQueries(n,s){const r=S(this,He);return rt.batch(()=>(r.findAll(n).forEach(l=>{l.reset()}),this.refetchQueries({type:"active",...n},s)))}cancelQueries(n,s={}){const r={revert:!0,...s},l=rt.batch(()=>S(this,He).findAll(n).map(o=>o.cancel(r)));return Promise.all(l).then(Nt).catch(Nt)}invalidateQueries(n,s={}){return rt.batch(()=>(S(this,He).findAll(n).forEach(r=>{r.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},s)))}refetchQueries(n,s={}){const r={...s,cancelRefetch:s.cancelRefetch??!0},l=rt.batch(()=>S(this,He).findAll(n).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let u=o.fetch(void 0,r);return r.throwOnError||(u=u.catch(Nt)),o.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(l).then(Nt)}fetchQuery(n){const s=this.defaultQueryOptions(n);s.retry===void 0&&(s.retry=!1);const r=S(this,He).build(this,s);return r.isStaleByTime(vr(s.staleTime,r))?r.fetch(s):Promise.resolve(r.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Nt).catch(Nt)}fetchInfiniteQuery(n){return n.behavior=fm(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Nt).catch(Nt)}ensureInfiniteQueryData(n){return n.behavior=fm(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return zl.isOnline()?S(this,or).resumePausedMutations():Promise.resolve()}getQueryCache(){return S(this,He)}getMutationCache(){return S(this,or)}getDefaultOptions(){return S(this,cr)}setDefaultOptions(n){ae(this,cr,n)}setQueryDefaults(n,s){S(this,Gn).set(Xr(n),{queryKey:n,defaultOptions:s})}getQueryDefaults(n){const s=[...S(this,Gn).values()],r={};return s.forEach(l=>{da(n,l.queryKey)&&Object.assign(r,l.defaultOptions)}),r}setMutationDefaults(n,s){S(this,Jn).set(Xr(n),{mutationKey:n,defaultOptions:s})}getMutationDefaults(n){const s=[...S(this,Jn).values()],r={};return s.forEach(l=>{da(n,l.mutationKey)&&Object.assign(r,l.defaultOptions)}),r}defaultQueryOptions(n){if(n._defaulted)return n;const s={...S(this,cr).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return s.queryHash||(s.queryHash=zu(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===qu&&(s.enabled=!1),s}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...S(this,cr).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){S(this,He).clear(),S(this,or).clear()}},He=new WeakMap,or=new WeakMap,cr=new WeakMap,Gn=new WeakMap,Jn=new WeakMap,ur=new WeakMap,Yn=new WeakMap,Xn=new WeakMap,sp),At,Re,ga,_t,Vr,Zn,Ps,dr,xa,ei,ti,Gr,Jr,hr,si,Le,ta,uu,du,hu,fu,mu,pu,gu,Cp,rp,$v=(rp=class extends ui{constructor(s,r){super();ge(this,Le);ge(this,At);ge(this,Re);ge(this,ga);ge(this,_t);ge(this,Vr);ge(this,Zn);ge(this,Ps);ge(this,dr);ge(this,xa);ge(this,ei);ge(this,ti);ge(this,Gr);ge(this,Jr);ge(this,hr);ge(this,si,new Set);this.options=r,ae(this,At,s),ae(this,dr,null),ae(this,Ps,cu()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(S(this,Re).addObserver(this),pm(S(this,Re),this.options)?ke(this,Le,ta).call(this):this.updateResult(),ke(this,Le,fu).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return xu(S(this,Re),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return xu(S(this,Re),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ke(this,Le,mu).call(this),ke(this,Le,pu).call(this),S(this,Re).removeObserver(this)}setOptions(s){const r=this.options,l=S(this,Re);if(this.options=S(this,At).defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ht(this.options.enabled,S(this,Re))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ke(this,Le,gu).call(this),S(this,Re).setOptions(this.options),r._defaulted&&!Fl(this.options,r)&&S(this,At).getQueryCache().notify({type:"observerOptionsUpdated",query:S(this,Re),observer:this});const o=this.hasListeners();o&&gm(S(this,Re),l,this.options,r)&&ke(this,Le,ta).call(this),this.updateResult(),o&&(S(this,Re)!==l||Ht(this.options.enabled,S(this,Re))!==Ht(r.enabled,S(this,Re))||vr(this.options.staleTime,S(this,Re))!==vr(r.staleTime,S(this,Re)))&&ke(this,Le,uu).call(this);const u=ke(this,Le,du).call(this);o&&(S(this,Re)!==l||Ht(this.options.enabled,S(this,Re))!==Ht(r.enabled,S(this,Re))||u!==S(this,hr))&&ke(this,Le,hu).call(this,u)}getOptimisticResult(s){const r=S(this,At).getQueryCache().build(S(this,At),s),l=this.createResult(r,s);return zv(this,l)&&(ae(this,_t,l),ae(this,Zn,this.options),ae(this,Vr,S(this,Re).state)),l}getCurrentResult(){return S(this,_t)}trackResult(s,r){return new Proxy(s,{get:(l,o)=>(this.trackProp(o),r==null||r(o),o==="promise"&&!this.options.experimental_prefetchInRender&&S(this,Ps).status==="pending"&&S(this,Ps).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(l,o))})}trackProp(s){S(this,si).add(s)}getCurrentQuery(){return S(this,Re)}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const r=S(this,At).defaultQueryOptions(s),l=S(this,At).getQueryCache().build(S(this,At),r);return l.fetch().then(()=>this.createResult(l,r))}fetch(s){return ke(this,Le,ta).call(this,{...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),S(this,_t)))}createResult(s,r){var we;const l=S(this,Re),o=this.options,u=S(this,_t),d=S(this,Vr),m=S(this,Zn),g=s!==l?s.state:S(this,ga),{state:y}=s;let v={...y},b=!1,E;if(r._optimisticResults){const _=this.hasListeners(),Q=!_&&pm(s,r),U=_&&gm(s,l,r,o);(Q||U)&&(v={...v,...kp(y.data,s.options)}),r._optimisticResults==="isRestoring"&&(v.fetchStatus="idle")}let{error:N,errorUpdatedAt:P,status:w}=v;E=v.data;let A=!1;if(r.placeholderData!==void 0&&E===void 0&&w==="pending"){let _;u!=null&&u.isPlaceholderData&&r.placeholderData===(m==null?void 0:m.placeholderData)?(_=u.data,A=!0):_=typeof r.placeholderData=="function"?r.placeholderData((we=S(this,ti))==null?void 0:we.state.data,S(this,ti)):r.placeholderData,_!==void 0&&(w="success",E=ou(u==null?void 0:u.data,_,r),b=!0)}if(r.select&&E!==void 0&&!A)if(u&&E===(d==null?void 0:d.data)&&r.select===S(this,xa))E=S(this,ei);else try{ae(this,xa,r.select),E=r.select(E),E=ou(u==null?void 0:u.data,E,r),ae(this,ei,E),ae(this,dr,null)}catch(_){ae(this,dr,_)}S(this,dr)&&(N=S(this,dr),E=S(this,ei),P=Date.now(),w="error");const M=v.fetchStatus==="fetching",L=w==="pending",R=w==="error",$=L&&M,W=E!==void 0,le={status:w,fetchStatus:v.fetchStatus,isPending:L,isSuccess:w==="success",isError:R,isInitialLoading:$,isLoading:$,data:E,dataUpdatedAt:v.dataUpdatedAt,error:N,errorUpdatedAt:P,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>g.dataUpdateCount||v.errorUpdateCount>g.errorUpdateCount,isFetching:M,isRefetching:M&&!L,isLoadingError:R&&!W,isPaused:v.fetchStatus==="paused",isPlaceholderData:b,isRefetchError:R&&W,isStale:Wu(s,r),refetch:this.refetch,promise:S(this,Ps),isEnabled:Ht(r.enabled,s)!==!1};if(this.options.experimental_prefetchInRender){const _=te=>{le.status==="error"?te.reject(le.error):le.data!==void 0&&te.resolve(le.data)},Q=()=>{const te=ae(this,Ps,le.promise=cu());_(te)},U=S(this,Ps);switch(U.status){case"pending":s.queryHash===l.queryHash&&_(U);break;case"fulfilled":(le.status==="error"||le.data!==U.value)&&Q();break;case"rejected":(le.status!=="error"||le.error!==U.reason)&&Q();break}}return le}updateResult(){const s=S(this,_t),r=this.createResult(S(this,Re),this.options);if(ae(this,Vr,S(this,Re).state),ae(this,Zn,this.options),S(this,Vr).data!==void 0&&ae(this,ti,S(this,Re)),Fl(r,s))return;ae(this,_t,r);const l=()=>{if(!s)return!0;const{notifyOnChangeProps:o}=this.options,u=typeof o=="function"?o():o;if(u==="all"||!u&&!S(this,si).size)return!0;const d=new Set(u??S(this,si));return this.options.throwOnError&&d.add("error"),Object.keys(S(this,_t)).some(m=>{const p=m;return S(this,_t)[p]!==s[p]&&d.has(p)})};ke(this,Le,Cp).call(this,{listeners:l()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ke(this,Le,fu).call(this)}},At=new WeakMap,Re=new WeakMap,ga=new WeakMap,_t=new WeakMap,Vr=new WeakMap,Zn=new WeakMap,Ps=new WeakMap,dr=new WeakMap,xa=new WeakMap,ei=new WeakMap,ti=new WeakMap,Gr=new WeakMap,Jr=new WeakMap,hr=new WeakMap,si=new WeakMap,Le=new WeakSet,ta=function(s){ke(this,Le,gu).call(this);let r=S(this,Re).fetch(this.options,s);return s!=null&&s.throwOnError||(r=r.catch(Nt)),r},uu=function(){ke(this,Le,mu).call(this);const s=vr(this.options.staleTime,S(this,Re));if(Yr||S(this,_t).isStale||!au(s))return;const l=xp(S(this,_t).dataUpdatedAt,s)+1;ae(this,Gr,setTimeout(()=>{S(this,_t).isStale||this.updateResult()},l))},du=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(S(this,Re)):this.options.refetchInterval)??!1},hu=function(s){ke(this,Le,pu).call(this),ae(this,hr,s),!(Yr||Ht(this.options.enabled,S(this,Re))===!1||!au(S(this,hr))||S(this,hr)===0)&&ae(this,Jr,setInterval(()=>{(this.options.refetchIntervalInBackground||Bu.isFocused())&&ke(this,Le,ta).call(this)},S(this,hr)))},fu=function(){ke(this,Le,uu).call(this),ke(this,Le,hu).call(this,ke(this,Le,du).call(this))},mu=function(){S(this,Gr)&&(clearTimeout(S(this,Gr)),ae(this,Gr,void 0))},pu=function(){S(this,Jr)&&(clearInterval(S(this,Jr)),ae(this,Jr,void 0))},gu=function(){const s=S(this,At).getQueryCache().build(S(this,At),this.options);if(s===S(this,Re))return;const r=S(this,Re);ae(this,Re,s),ae(this,ga,s.state),this.hasListeners()&&(r==null||r.removeObserver(this),s.addObserver(this))},Cp=function(s){rt.batch(()=>{s.listeners&&this.listeners.forEach(r=>{r(S(this,_t))}),S(this,At).getQueryCache().notify({query:S(this,Re),type:"observerResultsUpdated"})})},rp);function Fv(n,s){return Ht(s.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&s.retryOnMount===!1)}function pm(n,s){return Fv(n,s)||n.state.data!==void 0&&xu(n,s,s.refetchOnMount)}function xu(n,s,r){if(Ht(s.enabled,n)!==!1&&vr(s.staleTime,n)!=="static"){const l=typeof r=="function"?r(n):r;return l==="always"||l!==!1&&Wu(n,s)}return!1}function gm(n,s,r,l){return(n!==s||Ht(l.enabled,n)===!1)&&(!r.suspense||n.state.status!=="error")&&Wu(n,r)}function Wu(n,s){return Ht(s.enabled,n)!==!1&&n.isStaleByTime(vr(s.staleTime,n))}function zv(n,s){return!Fl(n.getCurrentResult(),s)}var fr,mr,Ot,Rs,Ts,Ml,vu,np,qv=(np=class extends ui{constructor(r,l){super();ge(this,Ts);ge(this,fr);ge(this,mr);ge(this,Ot);ge(this,Rs);ae(this,fr,r),this.setOptions(l),this.bindMethods(),ke(this,Ts,Ml).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var o;const l=this.options;this.options=S(this,fr).defaultMutationOptions(r),Fl(this.options,l)||S(this,fr).getMutationCache().notify({type:"observerOptionsUpdated",mutation:S(this,Ot),observer:this}),l!=null&&l.mutationKey&&this.options.mutationKey&&Xr(l.mutationKey)!==Xr(this.options.mutationKey)?this.reset():((o=S(this,Ot))==null?void 0:o.state.status)==="pending"&&S(this,Ot).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=S(this,Ot))==null||r.removeObserver(this)}onMutationUpdate(r){ke(this,Ts,Ml).call(this),ke(this,Ts,vu).call(this,r)}getCurrentResult(){return S(this,mr)}reset(){var r;(r=S(this,Ot))==null||r.removeObserver(this),ae(this,Ot,void 0),ke(this,Ts,Ml).call(this),ke(this,Ts,vu).call(this)}mutate(r,l){var o;return ae(this,Rs,l),(o=S(this,Ot))==null||o.removeObserver(this),ae(this,Ot,S(this,fr).getMutationCache().build(S(this,fr),this.options)),S(this,Ot).addObserver(this),S(this,Ot).execute(r)}},fr=new WeakMap,mr=new WeakMap,Ot=new WeakMap,Rs=new WeakMap,Ts=new WeakSet,Ml=function(){var l;const r=((l=S(this,Ot))==null?void 0:l.state)??Sp();ae(this,mr,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},vu=function(r){rt.batch(()=>{var l,o,u,d,m,p,g,y;if(S(this,Rs)&&this.hasListeners()){const v=S(this,mr).variables,b=S(this,mr).context;(r==null?void 0:r.type)==="success"?((o=(l=S(this,Rs)).onSuccess)==null||o.call(l,r.data,v,b),(d=(u=S(this,Rs)).onSettled)==null||d.call(u,r.data,null,v,b)):(r==null?void 0:r.type)==="error"&&((p=(m=S(this,Rs)).onError)==null||p.call(m,r.error,v,b),(y=(g=S(this,Rs)).onSettled)==null||y.call(g,void 0,r.error,v,b))}this.listeners.forEach(v=>{v(S(this,mr))})})},np),Ep=O.createContext(void 0),ms=n=>{const s=O.useContext(Ep);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},Bv=({client:n,children:s})=>(O.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),i.jsx(Ep.Provider,{value:n,children:s})),Pp=O.createContext(!1),Wv=()=>O.useContext(Pp);Pp.Provider;function Qv(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var Hv=O.createContext(Qv()),Kv=()=>O.useContext(Hv),Vv=(n,s)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(s.isReset()||(n.retryOnMount=!1))},Gv=n=>{O.useEffect(()=>{n.clearReset()},[n])},Jv=({result:n,errorResetBoundary:s,throwOnError:r,query:l,suspense:o})=>n.isError&&!s.isReset()&&!n.isFetching&&l&&(o&&n.data===void 0||wp(r,[n.error,l])),Yv=n=>{if(n.suspense){const s=l=>l==="static"?l:Math.max(l??1e3,1e3),r=n.staleTime;n.staleTime=typeof r=="function"?(...l)=>s(r(...l)):s(r),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},Xv=(n,s)=>n.isLoading&&n.isFetching&&!s,Zv=(n,s)=>(n==null?void 0:n.suspense)&&s.isPending,xm=(n,s,r)=>s.fetchOptimistic(n).catch(()=>{r.clearReset()});function ey(n,s,r){var v,b,E,N,P;const l=Wv(),o=Kv(),u=ms(),d=u.defaultQueryOptions(n);(b=(v=u.getDefaultOptions().queries)==null?void 0:v._experimental_beforeQuery)==null||b.call(v,d),d._optimisticResults=l?"isRestoring":"optimistic",Yv(d),Vv(d,o),Gv(o);const m=!u.getQueryCache().get(d.queryHash),[p]=O.useState(()=>new s(u,d)),g=p.getOptimisticResult(d),y=!l&&n.subscribed!==!1;if(O.useSyncExternalStore(O.useCallback(w=>{const A=y?p.subscribe(rt.batchCalls(w)):Nt;return p.updateResult(),A},[p,y]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),O.useEffect(()=>{p.setOptions(d)},[d,p]),Zv(d,g))throw xm(d,p,o);if(Jv({result:g,errorResetBoundary:o,throwOnError:d.throwOnError,query:u.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw g.error;if((N=(E=u.getDefaultOptions().queries)==null?void 0:E._experimental_afterQuery)==null||N.call(E,d,g),d.experimental_prefetchInRender&&!Yr&&Xv(g,l)){const w=m?xm(d,p,o):(P=u.getQueryCache().get(d.queryHash))==null?void 0:P.promise;w==null||w.catch(Nt).finally(()=>{p.updateResult()})}return d.notifyOnChangeProps?g:p.trackResult(g)}function ct(n,s){return ey(n,$v)}function Je(n,s){const r=ms(),[l]=O.useState(()=>new qv(r,n));O.useEffect(()=>{l.setOptions(n)},[l,n]);const o=O.useSyncExternalStore(O.useCallback(d=>l.subscribe(rt.batchCalls(d)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),u=O.useCallback((d,m)=>{l.mutate(d,m).catch(Nt)},[l]);if(o.error&&wp(l.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:u,mutateAsync:o.mutate}}const ty="modulepreload",sy=function(n){return"/"+n},vm={},va=function(s,r,l){let o=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),m=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=Promise.allSettled(r.map(p=>{if(p=sy(p),p in vm)return;vm[p]=!0;const g=p.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const v=document.createElement("link");if(v.rel=g?"stylesheet":ty,g||(v.as="script"),v.crossOrigin="",v.href=p,m&&v.setAttribute("nonce",m),document.head.appendChild(v),g)return new Promise((b,E)=>{v.addEventListener("load",b),v.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${p}`)))})}))}function u(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return o.then(d=>{for(const m of d||[])m.status==="rejected"&&u(m.reason);return s().catch(u)})},ry=n=>{let s;return n?s=n:typeof fetch>"u"?s=(...r)=>va(async()=>{const{default:l}=await Promise.resolve().then(()=>di);return{default:l}},void 0).then(({default:l})=>l(...r)):s=fetch,(...r)=>s(...r)};class Qu extends Error{constructor(s,r="FunctionsError",l){super(s),this.name=r,this.context=l}}class ny extends Qu{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}}class ym extends Qu{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}}class wm extends Qu{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}}var yu;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(yu||(yu={}));var iy=function(n,s,r,l){function o(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function m(y){try{g(l.next(y))}catch(v){d(v)}}function p(y){try{g(l.throw(y))}catch(v){d(v)}}function g(y){y.done?u(y.value):o(y.value).then(m,p)}g((l=l.apply(n,s||[])).next())})};class ay{constructor(s,{headers:r={},customFetch:l,region:o=yu.Any}={}){this.url=s,this.headers=r,this.region=o,this.fetch=ry(l)}setAuth(s){this.headers.Authorization=`Bearer ${s}`}invoke(s,r={}){var l;return iy(this,void 0,void 0,function*(){try{const{headers:o,method:u,body:d}=r;let m={},{region:p}=r;p||(p=this.region);const g=new URL(`${this.url}/${s}`);p&&p!=="any"&&(m["x-region"]=p,g.searchParams.set("forceFunctionRegion",p));let y;d&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",y=d):typeof d=="string"?(m["Content-Type"]="text/plain",y=d):typeof FormData<"u"&&d instanceof FormData?y=d:(m["Content-Type"]="application/json",y=JSON.stringify(d)));const v=yield this.fetch(g.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),o),body:y}).catch(P=>{throw new ny(P)}),b=v.headers.get("x-relay-error");if(b&&b==="true")throw new ym(v);if(!v.ok)throw new wm(v);let E=((l=v.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),N;return E==="application/json"?N=yield v.json():E==="application/octet-stream"?N=yield v.blob():E==="text/event-stream"?N=v:E==="multipart/form-data"?N=yield v.formData():N=yield v.text(),{data:N,error:null,response:v}}catch(o){return{data:null,error:o,response:o instanceof wm||o instanceof ym?o.context:void 0}}})}}var lt={},Pn={},Rn={},Tn={},An={},On={},ly=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ri=ly();const oy=ri.fetch,Rp=ri.fetch.bind(ri),Tp=ri.Headers,cy=ri.Request,uy=ri.Response,di=Object.freeze(Object.defineProperty({__proto__:null,Headers:Tp,Request:cy,Response:uy,default:Rp,fetch:oy},Symbol.toStringTag,{value:"Module"})),dy=ox(di);var Al={},bm;function Ap(){if(bm)return Al;bm=1,Object.defineProperty(Al,"__esModule",{value:!0});class n extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Al.default=n,Al}var jm;function Op(){if(jm)return On;jm=1;var n=On&&On.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(On,"__esModule",{value:!0});const s=n(dy),r=n(Ap());class l{constructor(u){var d,m;this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=new Headers(u.headers),this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=(d=u.shouldThrowOnError)!==null&&d!==void 0?d:!1,this.signal=u.signal,this.isMaybeSingle=(m=u.isMaybeSingle)!==null&&m!==void 0?m:!1,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=s.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,d){return this.headers=new Headers(this.headers),this.headers.set(u,d),this}then(u,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const m=this.fetch;let p=m(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var y,v,b,E;let N=null,P=null,w=null,A=g.status,M=g.statusText;if(g.ok){if(this.method!=="HEAD"){const W=await g.text();W===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((y=this.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?P=W:P=JSON.parse(W))}const R=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),$=(b=g.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");R&&$&&$.length>1&&(w=parseInt($[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(P)&&(P.length>1?(N={code:"PGRST116",details:`Results contain ${P.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},P=null,w=null,A=406,M="Not Acceptable"):P.length===1?P=P[0]:P=null)}else{const R=await g.text();try{N=JSON.parse(R),Array.isArray(N)&&g.status===404&&(P=[],N=null,A=200,M="OK")}catch{g.status===404&&R===""?(A=204,M="No Content"):N={message:R}}if(N&&this.isMaybeSingle&&(!((E=N==null?void 0:N.details)===null||E===void 0)&&E.includes("0 rows"))&&(N=null,A=200,M="OK"),N&&this.shouldThrowOnError)throw new r.default(N)}return{error:N,data:P,count:w,status:A,statusText:M}});return this.shouldThrowOnError||(p=p.catch(g=>{var y,v,b;return{error:{message:`${(y=g==null?void 0:g.name)!==null&&y!==void 0?y:"FetchError"}: ${g==null?void 0:g.message}`,details:`${(v=g==null?void 0:g.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(b=g==null?void 0:g.code)!==null&&b!==void 0?b:""}`},data:null,count:null,status:0,statusText:""}})),p.then(u,d)}returns(){return this}overrideTypes(){return this}}return On.default=l,On}var _m;function Ip(){if(_m)return An;_m=1;var n=An&&An.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(An,"__esModule",{value:!0});const s=n(Op());class r extends s.default{select(o){let u=!1;const d=(o??"*").split("").map(m=>/\s/.test(m)&&!u?"":(m==='"'&&(u=!u),m)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:u=!0,nullsFirst:d,foreignTable:m,referencedTable:p=m}={}){const g=p?`${p}.order`:"order",y=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${y?`${y},`:""}${o}.${u?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:u,referencedTable:d=u}={}){const m=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(m,`${o}`),this}range(o,u,{foreignTable:d,referencedTable:m=d}={}){const p=typeof m>"u"?"offset":`${m}.offset`,g=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(p,`${o}`),this.url.searchParams.set(g,`${u-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:u=!1,settings:d=!1,buffers:m=!1,wal:p=!1,format:g="text"}={}){var y;const v=[o?"analyze":null,u?"verbose":null,d?"settings":null,m?"buffers":null,p?"wal":null].filter(Boolean).join("|"),b=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${b}"; options=${v};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return An.default=r,An}var Nm;function Hu(){if(Nm)return Tn;Nm=1;var n=Tn&&Tn.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Tn,"__esModule",{value:!0});const s=n(Ip());class r extends s.default{eq(o,u){return this.url.searchParams.append(o,`eq.${u}`),this}neq(o,u){return this.url.searchParams.append(o,`neq.${u}`),this}gt(o,u){return this.url.searchParams.append(o,`gt.${u}`),this}gte(o,u){return this.url.searchParams.append(o,`gte.${u}`),this}lt(o,u){return this.url.searchParams.append(o,`lt.${u}`),this}lte(o,u){return this.url.searchParams.append(o,`lte.${u}`),this}like(o,u){return this.url.searchParams.append(o,`like.${u}`),this}likeAllOf(o,u){return this.url.searchParams.append(o,`like(all).{${u.join(",")}}`),this}likeAnyOf(o,u){return this.url.searchParams.append(o,`like(any).{${u.join(",")}}`),this}ilike(o,u){return this.url.searchParams.append(o,`ilike.${u}`),this}ilikeAllOf(o,u){return this.url.searchParams.append(o,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(o,u){return this.url.searchParams.append(o,`ilike(any).{${u.join(",")}}`),this}is(o,u){return this.url.searchParams.append(o,`is.${u}`),this}in(o,u){const d=Array.from(new Set(u)).map(m=>typeof m=="string"&&new RegExp("[,()]").test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(o,`in.(${d})`),this}contains(o,u){return typeof u=="string"?this.url.searchParams.append(o,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(o,`cs.{${u.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(u)}`),this}containedBy(o,u){return typeof u=="string"?this.url.searchParams.append(o,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(o,`cd.{${u.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(u)}`),this}rangeGt(o,u){return this.url.searchParams.append(o,`sr.${u}`),this}rangeGte(o,u){return this.url.searchParams.append(o,`nxl.${u}`),this}rangeLt(o,u){return this.url.searchParams.append(o,`sl.${u}`),this}rangeLte(o,u){return this.url.searchParams.append(o,`nxr.${u}`),this}rangeAdjacent(o,u){return this.url.searchParams.append(o,`adj.${u}`),this}overlaps(o,u){return typeof u=="string"?this.url.searchParams.append(o,`ov.${u}`):this.url.searchParams.append(o,`ov.{${u.join(",")}}`),this}textSearch(o,u,{config:d,type:m}={}){let p="";m==="plain"?p="pl":m==="phrase"?p="ph":m==="websearch"&&(p="w");const g=d===void 0?"":`(${d})`;return this.url.searchParams.append(o,`${p}fts${g}.${u}`),this}match(o){return Object.entries(o).forEach(([u,d])=>{this.url.searchParams.append(u,`eq.${d}`)}),this}not(o,u,d){return this.url.searchParams.append(o,`not.${u}.${d}`),this}or(o,{foreignTable:u,referencedTable:d=u}={}){const m=d?`${d}.or`:"or";return this.url.searchParams.append(m,`(${o})`),this}filter(o,u,d){return this.url.searchParams.append(o,`${u}.${d}`),this}}return Tn.default=r,Tn}var km;function Lp(){if(km)return Rn;km=1;var n=Rn&&Rn.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Rn,"__esModule",{value:!0});const s=n(Hu());class r{constructor(o,{headers:u={},schema:d,fetch:m}){this.url=o,this.headers=new Headers(u),this.schema=d,this.fetch=m}select(o,{head:u=!1,count:d}={}){const m=u?"HEAD":"GET";let p=!1;const g=(o??"*").split("").map(y=>/\s/.test(y)&&!p?"":(y==='"'&&(p=!p),y)).join("");return this.url.searchParams.set("select",g),d&&this.headers.append("Prefer",`count=${d}`),new s.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:u,defaultToNull:d=!0}={}){var m;const p="POST";if(u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const g=o.reduce((y,v)=>y.concat(Object.keys(v)),[]);if(g.length>0){const y=[...new Set(g)].map(v=>`"${v}"`);this.url.searchParams.set("columns",y.join(","))}}return new s.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(o,{onConflict:u,ignoreDuplicates:d=!1,count:m,defaultToNull:p=!0}={}){var g;const y="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),m&&this.headers.append("Prefer",`count=${m}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const v=o.reduce((b,E)=>b.concat(Object.keys(E)),[]);if(v.length>0){const b=[...new Set(v)].map(E=>`"${E}"`);this.url.searchParams.set("columns",b.join(","))}}return new s.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(o,{count:u}={}){var d;const m="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new s.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:o}={}){var u;const d="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new s.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Rn.default=r,Rn}var Sm;function hy(){if(Sm)return Pn;Sm=1;var n=Pn&&Pn.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Pn,"__esModule",{value:!0});const s=n(Lp()),r=n(Hu());class l{constructor(u,{headers:d={},schema:m,fetch:p}={}){this.url=u,this.headers=new Headers(d),this.schemaName=m,this.fetch=p}from(u){const d=new URL(`${this.url}/${u}`);return new s.default(d,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new l(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,d={},{head:m=!1,get:p=!1,count:g}={}){var y;let v;const b=new URL(`${this.url}/rpc/${u}`);let E;m||p?(v=m?"HEAD":"GET",Object.entries(d).filter(([P,w])=>w!==void 0).map(([P,w])=>[P,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([P,w])=>{b.searchParams.append(P,w)})):(v="POST",E=d);const N=new Headers(this.headers);return g&&N.set("Prefer",`count=${g}`),new r.default({method:v,url:b,headers:N,schema:this.schemaName,body:E,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}}return Pn.default=l,Pn}var Cm;function fy(){if(Cm)return lt;Cm=1;var n=lt&&lt.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(lt,"__esModule",{value:!0}),lt.PostgrestError=lt.PostgrestBuilder=lt.PostgrestTransformBuilder=lt.PostgrestFilterBuilder=lt.PostgrestQueryBuilder=lt.PostgrestClient=void 0;const s=n(hy());lt.PostgrestClient=s.default;const r=n(Lp());lt.PostgrestQueryBuilder=r.default;const l=n(Hu());lt.PostgrestFilterBuilder=l.default;const o=n(Ip());lt.PostgrestTransformBuilder=o.default;const u=n(Op());lt.PostgrestBuilder=u.default;const d=n(Ap());return lt.PostgrestError=d.default,lt.default={PostgrestClient:s.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:l.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:u.default,PostgrestError:d.default},lt}var my=fy();const py=ip(my),{PostgrestClient:gy,PostgrestQueryBuilder:T1,PostgrestFilterBuilder:A1,PostgrestTransformBuilder:O1,PostgrestBuilder:I1,PostgrestError:L1}=py;class xy{static detectEnvironment(){var s;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((s=navigator.userAgent)===null||s===void 0)&&s.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const s=this.detectEnvironment();if(s.constructor)return s.constructor;let r=s.error||"WebSocket not supported in this environment.";throw s.workaround&&(r+=`

Suggested solution: ${s.workaround}`),new Error(r)}static createWebSocket(s,r){const l=this.getWebSocketConstructor();return new l(s,r)}static isWebSocketSupported(){try{const s=this.detectEnvironment();return s.type==="native"||s.type==="ws"}catch{return!1}}}const vy="2.15.1",yy=`realtime-js/${vy}`,wy="1.0.0",wu=1e4,by=1e3,jy=100;var ia;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(ia||(ia={}));var tt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(tt||(tt={}));var rs;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(rs||(rs={}));var bu;(function(n){n.websocket="websocket"})(bu||(bu={}));var qr;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(qr||(qr={}));class _y{constructor(){this.HEADER_LENGTH=1}decode(s,r){return s.constructor===ArrayBuffer?r(this._binaryDecode(s)):r(typeof s=="string"?JSON.parse(s):{})}_binaryDecode(s){const r=new DataView(s),l=new TextDecoder;return this._decodeBroadcast(s,r,l)}_decodeBroadcast(s,r,l){const o=r.getUint8(1),u=r.getUint8(2);let d=this.HEADER_LENGTH+2;const m=l.decode(s.slice(d,d+o));d=d+o;const p=l.decode(s.slice(d,d+u));d=d+u;const g=JSON.parse(l.decode(s.slice(d,s.byteLength)));return{ref:null,topic:m,event:p,payload:g}}}class Dp{constructor(s,r){this.callback=s,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ue;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Ue||(Ue={}));const Em=(n,s,r={})=>{var l;const o=(l=r.skipTypes)!==null&&l!==void 0?l:[];return Object.keys(s).reduce((u,d)=>(u[d]=Ny(d,n,s,o),u),{})},Ny=(n,s,r,l)=>{const o=s.find(m=>m.name===n),u=o==null?void 0:o.type,d=r[n];return u&&!l.includes(u)?Mp(u,d):ju(d)},Mp=(n,s)=>{if(n.charAt(0)==="_"){const r=n.slice(1,n.length);return Ey(s,r)}switch(n){case Ue.bool:return ky(s);case Ue.float4:case Ue.float8:case Ue.int2:case Ue.int4:case Ue.int8:case Ue.numeric:case Ue.oid:return Sy(s);case Ue.json:case Ue.jsonb:return Cy(s);case Ue.timestamp:return Py(s);case Ue.abstime:case Ue.date:case Ue.daterange:case Ue.int4range:case Ue.int8range:case Ue.money:case Ue.reltime:case Ue.text:case Ue.time:case Ue.timestamptz:case Ue.timetz:case Ue.tsrange:case Ue.tstzrange:return ju(s);default:return ju(s)}},ju=n=>n,ky=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Sy=n=>{if(typeof n=="string"){const s=parseFloat(n);if(!Number.isNaN(s))return s}return n},Cy=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(s){return console.log(`JSON parse error: ${s}`),n}return n},Ey=(n,s)=>{if(typeof n!="string")return n;const r=n.length-1,l=n[r];if(n[0]==="{"&&l==="}"){let u;const d=n.slice(1,r);try{u=JSON.parse("["+d+"]")}catch{u=d?d.split(","):[]}return u.map(m=>Mp(s,m))}return n},Py=n=>typeof n=="string"?n.replace(" ","T"):n,Up=n=>{let s=n;return s=s.replace(/^ws/i,"http"),s=s.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),s.replace(/\/+$/,"")+"/api/broadcast"};class Kc{constructor(s,r,l={},o=wu){this.channel=s,this.event=r,this.payload=l,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,r){var l;return this._hasReceived(s)&&r((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:s,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:r}){this.recHooks.filter(l=>l.status===s).forEach(l=>l.callback(r))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var Pm;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Pm||(Pm={}));class aa{constructor(s,r){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},o=>{const{onJoin:u,onLeave:d,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=aa.syncState(this.state,o,u,d),this.pendingDiffs.forEach(p=>{this.state=aa.syncDiff(this.state,p,u,d)}),this.pendingDiffs=[],m()}),this.channel._on(l.diff,{},o=>{const{onJoin:u,onLeave:d,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=aa.syncDiff(this.state,o,u,d),m())}),this.onJoin((o,u,d)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:u,newPresences:d})}),this.onLeave((o,u,d)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:u,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,r,l,o){const u=this.cloneDeep(s),d=this.transformState(r),m={},p={};return this.map(u,(g,y)=>{d[g]||(p[g]=y)}),this.map(d,(g,y)=>{const v=u[g];if(v){const b=y.map(w=>w.presence_ref),E=v.map(w=>w.presence_ref),N=y.filter(w=>E.indexOf(w.presence_ref)<0),P=v.filter(w=>b.indexOf(w.presence_ref)<0);N.length>0&&(m[g]=N),P.length>0&&(p[g]=P)}else m[g]=y}),this.syncDiff(u,{joins:m,leaves:p},l,o)}static syncDiff(s,r,l,o){const{joins:u,leaves:d}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return l||(l=()=>{}),o||(o=()=>{}),this.map(u,(m,p)=>{var g;const y=(g=s[m])!==null&&g!==void 0?g:[];if(s[m]=this.cloneDeep(p),y.length>0){const v=s[m].map(E=>E.presence_ref),b=y.filter(E=>v.indexOf(E.presence_ref)<0);s[m].unshift(...b)}l(m,y,p)}),this.map(d,(m,p)=>{let g=s[m];if(!g)return;const y=p.map(v=>v.presence_ref);g=g.filter(v=>y.indexOf(v.presence_ref)<0),s[m]=g,o(m,g,p),g.length===0&&delete s[m]}),s}static map(s,r){return Object.getOwnPropertyNames(s).map(l=>r(l,s[l]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((r,l)=>{const o=s[l];return"metas"in o?r[l]=o.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):r[l]=o,r},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Rm;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Rm||(Rm={}));var la;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(la||(la={}));var Cs;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Cs||(Cs={}));class Ku{constructor(s,r={config:{}},l){this.topic=s,this.params=r,this.socket=l,this.bindings={},this.state=tt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Kc(this,rs.join,this.params,this.timeout),this.rejoinTimer=new Dp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=tt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=tt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=tt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rs.reply,{},(o,u)=>{this._trigger(this._replyEventName(u),o)}),this.presence=new aa(this),this.broadcastEndpointURL=Up(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(s,r=this.timeout){var l,o;if(this.socket.isConnected()||this.socket.connect(),this.state==tt.closed){const{config:{broadcast:u,presence:d,private:m}}=this.params,p=(o=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(b=>b.filter))!==null&&o!==void 0?o:[],g=!!this.bindings[la.PRESENCE]&&this.bindings[la.PRESENCE].length>0,y={},v={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:g}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(b=>s==null?void 0:s(Cs.CHANNEL_ERROR,b)),this._onClose(()=>s==null?void 0:s(Cs.CLOSED)),this.updateJoinPayload(Object.assign({config:v},y)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:b})=>{var E;if(this.socket.setAuth(),b===void 0){s==null||s(Cs.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,P=(E=N==null?void 0:N.length)!==null&&E!==void 0?E:0,w=[];for(let A=0;A<P;A++){const M=N[A],{filter:{event:L,schema:R,table:$,filter:W}}=M,se=b&&b[A];if(se&&se.event===L&&se.schema===R&&se.table===$&&se.filter===W)w.push(Object.assign(Object.assign({},M),{id:se.id}));else{this.unsubscribe(),this.state=tt.errored,s==null||s(Cs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,s&&s(Cs.SUBSCRIBED);return}}).receive("error",b=>{this.state=tt.errored,s==null||s(Cs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{s==null||s(Cs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(s,r={}){return await this.send({type:"presence",event:"track",payload:s},r.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,r,l){return this.state===tt.joined&&s===la.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(s,r,l)}async send(s,r={}){var l,o;if(!this._canPush()&&s.type==="broadcast"){const{event:u,payload:d}=s,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:d,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(l=r.timeout)!==null&&l!==void 0?l:this.timeout);return await((o=g.body)===null||o===void 0?void 0:o.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var d,m,p;const g=this._push(s.type,s,r.timeout||this.timeout);s.type==="broadcast"&&!(!((p=(m=(d=this.params)===null||d===void 0?void 0:d.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&u("ok"),g.receive("ok",()=>u("ok")),g.receive("error",()=>u("error")),g.receive("timeout",()=>u("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=tt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rs.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(o=>{l=new Kc(this,rs.leave,{},s),l.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l==null||l.destroy()})}teardown(){this.pushBuffer.forEach(s=>s.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=tt.closed,this.bindings={}}async _fetchWithTimeout(s,r,l){const o=new AbortController,u=setTimeout(()=>o.abort(),l),d=await this.socket.fetch(s,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(u),d}_push(s,r,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${s}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Kc(this,s,r,l);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(s){if(s.startTimeout(),this.pushBuffer.push(s),this.pushBuffer.length>jy){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(s,r,l){return r}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,r,l){var o,u;const d=s.toLocaleLowerCase(),{close:m,error:p,leave:g,join:y}=rs;if(l&&[m,p,g,y].indexOf(d)>=0&&l!==this._joinRef())return;let b=this._onMessage(d,r,l);if(r&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(E=>{var N,P,w;return((N=E.filter)===null||N===void 0?void 0:N.event)==="*"||((w=(P=E.filter)===null||P===void 0?void 0:P.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===d}).map(E=>E.callback(b,l)):(u=this.bindings[d])===null||u===void 0||u.filter(E=>{var N,P,w,A,M,L;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in E){const R=E.id,$=(N=E.filter)===null||N===void 0?void 0:N.event;return R&&((P=r.ids)===null||P===void 0?void 0:P.includes(R))&&($==="*"||($==null?void 0:$.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const R=(M=(A=E==null?void 0:E.filter)===null||A===void 0?void 0:A.event)===null||M===void 0?void 0:M.toLocaleLowerCase();return R==="*"||R===((L=r==null?void 0:r.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===d}).map(E=>{if(typeof b=="object"&&"ids"in b){const N=b.data,{schema:P,table:w,commit_timestamp:A,type:M,errors:L}=N;b=Object.assign(Object.assign({},{schema:P,table:w,commit_timestamp:A,eventType:M,new:{},old:{},errors:L}),this._getPayloadRecords(N))}E.callback(b,l)})}_isClosed(){return this.state===tt.closed}_isJoined(){return this.state===tt.joined}_isJoining(){return this.state===tt.joining}_isLeaving(){return this.state===tt.leaving}_replyEventName(s){return`chan_reply_${s}`}_on(s,r,l){const o=s.toLocaleLowerCase(),u={type:o,filter:r,callback:l};return this.bindings[o]?this.bindings[o].push(u):this.bindings[o]=[u],this}_off(s,r){const l=s.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(o=>{var u;return!(((u=o.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===l&&Ku.isEqual(o.filter,r))})),this}static isEqual(s,r){if(Object.keys(s).length!==Object.keys(r).length)return!1;for(const l in s)if(s[l]!==r[l])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(rs.close,{},s)}_onError(s){this._on(rs.error,{},r=>s(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=tt.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const r={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(r.new=Em(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(r.old=Em(s.columns,s.old_record)),r}}const Tm=()=>{},Ol={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ry=[1e3,2e3,5e3,1e4],Ty=1e4,Ay=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Oy{constructor(s,r){var l;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=wu,this.transport=null,this.heartbeatIntervalMs=Ol.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Tm,this.ref=0,this.reconnectTimer=null,this.logger=Tm,this.conn=null,this.sendBuffer=[],this.serializer=new _y,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let u;return o?u=o:typeof fetch>"u"?u=(...d)=>va(async()=>{const{default:m}=await Promise.resolve().then(()=>di);return{default:m}},void 0).then(({default:m})=>m(...d)).catch(m=>{throw new Error(`Failed to load @supabase/node-fetch: ${m.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):u=fetch,(...d)=>u(...d)},!(!((l=r==null?void 0:r.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${s}/${bu.websocket}`,this.httpEndpoint=Up(s),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=xy.createWebSocket(this.endpointURL())}catch(s){this._setConnectionState("disconnected");const r=s.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:wy}))}disconnect(s,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},s?this.conn.close(s,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(s){const r=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const s=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),s}log(s,r,l){this.logger(s,r,l)}connectionState(){switch(this.conn&&this.conn.readyState){case ia.connecting:return qr.Connecting;case ia.open:return qr.Open;case ia.closing:return qr.Closing;default:return qr.Closed}}isConnected(){return this.connectionState()===qr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(s,r={config:{}}){const l=`realtime:${s}`,o=this.getChannels().find(u=>u.topic===l);if(o)return o;{const u=new Ku(`realtime:${s}`,r,this);return this.channels.push(u),u}}push(s){const{topic:r,event:l,payload:o,ref:u}=s,d=()=>{this.encode(s,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${r} ${l} (${u})`,o),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(s=null){this._authPromise=this._performAuth(s);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var s;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(s=this.conn)===null||s===void 0||s.close(by,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ol.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(s){this.heartbeatCallback=s}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let r=this.channels.find(l=>l.topic===s&&(l._isJoined()||l._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${s}"`),r.unsubscribe())}_remove(s){this.channels=this.channels.filter(r=>r.topic!==s.topic)}_onConnMessage(s){this.decode(s.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:l,event:o,payload:u,ref:d}=r,m=d?`(${d})`:"",p=u.status||"";this.log("receive",`${p} ${l} ${o} ${m}`.trim(),u),this.channels.filter(g=>g._isMember(l)).forEach(g=>g._trigger(o,u,d)),this._triggerStateCallbacks("message",r)})}_clearTimer(s){var r;s==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):s==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(s=>s.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const s=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(s),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(s){var r;this._setConnectionState("disconnected"),this.log("transport","close",s),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",s)}_onConnError(s){this._setConnectionState("disconnected"),this.log("transport",`${s}`),this._triggerChanError(),this._triggerStateCallbacks("error",s)}_triggerChanError(){this.channels.forEach(s=>s._trigger(rs.error))}_appendParams(s,r){if(Object.keys(r).length===0)return s;const l=s.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${s}${l}${o}`}_workerObjectUrl(s){let r;if(s)r=s;else{const l=new Blob([Ay],{type:"application/javascript"});r=URL.createObjectURL(l)}return r}_setConnectionState(s,r=!1){this._connectionState=s,s==="connecting"?this._wasManualDisconnect=!1:s==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(s=null){let r;s?r=s:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(l=>{const o={access_token:r,version:yy};r&&l.updateJoinPayload(o),l.joinedOnce&&l._isJoined()&&l._push(rs.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(s="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${s}`,r)})}_triggerStateCallbacks(s,r){try{this.stateChangeCallbacks[s].forEach(l=>{try{l(r)}catch(o){this.log("error",`error in ${s} callback`,o)}})}catch(l){this.log("error",`error triggering ${s} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new Dp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ol.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(s){var r,l,o,u,d,m,p,g;if(this.transport=(r=s==null?void 0:s.transport)!==null&&r!==void 0?r:null,this.timeout=(l=s==null?void 0:s.timeout)!==null&&l!==void 0?l:wu,this.heartbeatIntervalMs=(o=s==null?void 0:s.heartbeatIntervalMs)!==null&&o!==void 0?o:Ol.HEARTBEAT_INTERVAL,this.worker=(u=s==null?void 0:s.worker)!==null&&u!==void 0?u:!1,this.accessToken=(d=s==null?void 0:s.accessToken)!==null&&d!==void 0?d:null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=s==null?void 0:s.reconnectAfterMs)!==null&&m!==void 0?m:y=>Ry[y-1]||Ty,this.encode=(p=s==null?void 0:s.encode)!==null&&p!==void 0?p:(y,v)=>v(JSON.stringify(y)),this.decode=(g=s==null?void 0:s.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=s==null?void 0:s.workerUrl}}}class Vu extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}}function st(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Iy extends Vu{constructor(s,r,l){super(s),this.name="StorageApiError",this.status=r,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class _u extends Vu{constructor(s,r){super(s),this.name="StorageUnknownError",this.originalError=r}}var Ly=function(n,s,r,l){function o(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function m(y){try{g(l.next(y))}catch(v){d(v)}}function p(y){try{g(l.throw(y))}catch(v){d(v)}}function g(y){y.done?u(y.value):o(y.value).then(m,p)}g((l=l.apply(n,s||[])).next())})};const $p=n=>{let s;return n?s=n:typeof fetch>"u"?s=(...r)=>va(async()=>{const{default:l}=await Promise.resolve().then(()=>di);return{default:l}},void 0).then(({default:l})=>l(...r)):s=fetch,(...r)=>s(...r)},Dy=()=>Ly(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield va(()=>Promise.resolve().then(()=>di),void 0)).Response:Response}),Nu=n=>{if(Array.isArray(n))return n.map(r=>Nu(r));if(typeof n=="function"||n!==Object(n))return n;const s={};return Object.entries(n).forEach(([r,l])=>{const o=r.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));s[o]=Nu(l)}),s},My=n=>{if(typeof n!="object"||n===null)return!1;const s=Object.getPrototypeOf(n);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var sn=function(n,s,r,l){function o(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function m(y){try{g(l.next(y))}catch(v){d(v)}}function p(y){try{g(l.throw(y))}catch(v){d(v)}}function g(y){y.done?u(y.value):o(y.value).then(m,p)}g((l=l.apply(n,s||[])).next())})};const Vc=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Uy=(n,s,r)=>sn(void 0,void 0,void 0,function*(){const l=yield Dy();n instanceof l&&!(r!=null&&r.noResolveJson)?n.json().then(o=>{const u=n.status||500,d=(o==null?void 0:o.statusCode)||u+"";s(new Iy(Vc(o),u,d))}).catch(o=>{s(new _u(Vc(o),o))}):s(new _u(Vc(n),n))}),$y=(n,s,r,l)=>{const o={method:n,headers:(s==null?void 0:s.headers)||{}};return n==="GET"||!l?o:(My(l)?(o.headers=Object.assign({"Content-Type":"application/json"},s==null?void 0:s.headers),o.body=JSON.stringify(l)):o.body=l,s!=null&&s.duplex&&(o.duplex=s.duplex),Object.assign(Object.assign({},o),r))};function ya(n,s,r,l,o,u){return sn(this,void 0,void 0,function*(){return new Promise((d,m)=>{n(r,$y(s,l,o,u)).then(p=>{if(!p.ok)throw p;return l!=null&&l.noResolveJson?p:p.json()}).then(p=>d(p)).catch(p=>Uy(p,m,l))})})}function ql(n,s,r,l){return sn(this,void 0,void 0,function*(){return ya(n,"GET",s,r,l)})}function us(n,s,r,l,o){return sn(this,void 0,void 0,function*(){return ya(n,"POST",s,l,o,r)})}function ku(n,s,r,l,o){return sn(this,void 0,void 0,function*(){return ya(n,"PUT",s,l,o,r)})}function Fy(n,s,r,l){return sn(this,void 0,void 0,function*(){return ya(n,"HEAD",s,Object.assign(Object.assign({},r),{noResolveJson:!0}),l)})}function Fp(n,s,r,l,o){return sn(this,void 0,void 0,function*(){return ya(n,"DELETE",s,l,o,r)})}var bt=function(n,s,r,l){function o(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function m(y){try{g(l.next(y))}catch(v){d(v)}}function p(y){try{g(l.throw(y))}catch(v){d(v)}}function g(y){y.done?u(y.value):o(y.value).then(m,p)}g((l=l.apply(n,s||[])).next())})};const zy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Am={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class qy{constructor(s,r={},l,o){this.url=s,this.headers=r,this.bucketId=l,this.fetch=$p(o)}uploadOrUpdate(s,r,l,o){return bt(this,void 0,void 0,function*(){try{let u;const d=Object.assign(Object.assign({},Am),o);let m=Object.assign(Object.assign({},this.headers),s==="POST"&&{"x-upsert":String(d.upsert)});const p=d.metadata;typeof Blob<"u"&&l instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),p&&u.append("metadata",this.encodeMetadata(p)),u.append("",l)):typeof FormData<"u"&&l instanceof FormData?(u=l,u.append("cacheControl",d.cacheControl),p&&u.append("metadata",this.encodeMetadata(p))):(u=l,m["cache-control"]=`max-age=${d.cacheControl}`,m["content-type"]=d.contentType,p&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),o!=null&&o.headers&&(m=Object.assign(Object.assign({},m),o.headers));const g=this._removeEmptyFolders(r),y=this._getFinalPath(g),v=yield(s=="PUT"?ku:us)(this.fetch,`${this.url}/object/${y}`,u,Object.assign({headers:m},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{data:{path:g,id:v.Id,fullPath:v.Key},error:null}}catch(u){if(st(u))return{data:null,error:u};throw u}})}upload(s,r,l){return bt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",s,r,l)})}uploadToSignedUrl(s,r,l,o){return bt(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(s),d=this._getFinalPath(u),m=new URL(this.url+`/object/upload/sign/${d}`);m.searchParams.set("token",r);try{let p;const g=Object.assign({upsert:Am.upsert},o),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&l instanceof Blob?(p=new FormData,p.append("cacheControl",g.cacheControl),p.append("",l)):typeof FormData<"u"&&l instanceof FormData?(p=l,p.append("cacheControl",g.cacheControl)):(p=l,y["cache-control"]=`max-age=${g.cacheControl}`,y["content-type"]=g.contentType);const v=yield ku(this.fetch,m.toString(),p,{headers:y});return{data:{path:u,fullPath:v.Key},error:null}}catch(p){if(st(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(s,r){return bt(this,void 0,void 0,function*(){try{let l=this._getFinalPath(s);const o=Object.assign({},this.headers);r!=null&&r.upsert&&(o["x-upsert"]="true");const u=yield us(this.fetch,`${this.url}/object/upload/sign/${l}`,{},{headers:o}),d=new URL(this.url+u.url),m=d.searchParams.get("token");if(!m)throw new Vu("No token returned by API");return{data:{signedUrl:d.toString(),path:s,token:m},error:null}}catch(l){if(st(l))return{data:null,error:l};throw l}})}update(s,r,l){return bt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",s,r,l)})}move(s,r,l){return bt(this,void 0,void 0,function*(){try{return{data:yield us(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:s,destinationKey:r,destinationBucket:l==null?void 0:l.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(st(o))return{data:null,error:o};throw o}})}copy(s,r,l){return bt(this,void 0,void 0,function*(){try{return{data:{path:(yield us(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:s,destinationKey:r,destinationBucket:l==null?void 0:l.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(st(o))return{data:null,error:o};throw o}})}createSignedUrl(s,r,l){return bt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(s),u=yield us(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:r},l!=null&&l.transform?{transform:l.transform}:{}),{headers:this.headers});const d=l!=null&&l.download?`&download=${l.download===!0?"":l.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${d}`)},{data:u,error:null}}catch(o){if(st(o))return{data:null,error:o};throw o}})}createSignedUrls(s,r,l){return bt(this,void 0,void 0,function*(){try{const o=yield us(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:s},{headers:this.headers}),u=l!=null&&l.download?`&download=${l.download===!0?"":l.download}`:"";return{data:o.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${u}`):null})),error:null}}catch(o){if(st(o))return{data:null,error:o};throw o}})}download(s,r){return bt(this,void 0,void 0,function*(){const o=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),d=u?`?${u}`:"";try{const m=this._getFinalPath(s);return{data:yield(yield ql(this.fetch,`${this.url}/${o}/${m}${d}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(m){if(st(m))return{data:null,error:m};throw m}})}info(s){return bt(this,void 0,void 0,function*(){const r=this._getFinalPath(s);try{const l=yield ql(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Nu(l),error:null}}catch(l){if(st(l))return{data:null,error:l};throw l}})}exists(s){return bt(this,void 0,void 0,function*(){const r=this._getFinalPath(s);try{return yield Fy(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(l){if(st(l)&&l instanceof _u){const o=l.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:l}}throw l}})}getPublicUrl(s,r){const l=this._getFinalPath(s),o=[],u=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";u!==""&&o.push(u);const m=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",p=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});p!==""&&o.push(p);let g=o.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${l}${g}`)}}}remove(s){return bt(this,void 0,void 0,function*(){try{return{data:yield Fp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:s},{headers:this.headers}),error:null}}catch(r){if(st(r))return{data:null,error:r};throw r}})}list(s,r,l){return bt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},zy),r),{prefix:s||""});return{data:yield us(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},l),error:null}}catch(o){if(st(o))return{data:null,error:o};throw o}})}listV2(s,r){return bt(this,void 0,void 0,function*(){try{const l=Object.assign({},s);return{data:yield us(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,l,{headers:this.headers},r),error:null}}catch(l){if(st(l))return{data:null,error:l};throw l}})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const r=[];return s.width&&r.push(`width=${s.width}`),s.height&&r.push(`height=${s.height}`),s.resize&&r.push(`resize=${s.resize}`),s.format&&r.push(`format=${s.format}`),s.quality&&r.push(`quality=${s.quality}`),r.join("&")}}const By="2.11.0",Wy={"X-Client-Info":`storage-js/${By}`};var In=function(n,s,r,l){function o(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function m(y){try{g(l.next(y))}catch(v){d(v)}}function p(y){try{g(l.throw(y))}catch(v){d(v)}}function g(y){y.done?u(y.value):o(y.value).then(m,p)}g((l=l.apply(n,s||[])).next())})};class Qy{constructor(s,r={},l,o){const u=new URL(s);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href,this.headers=Object.assign(Object.assign({},Wy),r),this.fetch=$p(l)}listBuckets(){return In(this,void 0,void 0,function*(){try{return{data:yield ql(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(s){if(st(s))return{data:null,error:s};throw s}})}getBucket(s){return In(this,void 0,void 0,function*(){try{return{data:yield ql(this.fetch,`${this.url}/bucket/${s}`,{headers:this.headers}),error:null}}catch(r){if(st(r))return{data:null,error:r};throw r}})}createBucket(s,r={public:!1}){return In(this,void 0,void 0,function*(){try{return{data:yield us(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(st(l))return{data:null,error:l};throw l}})}updateBucket(s,r){return In(this,void 0,void 0,function*(){try{return{data:yield ku(this.fetch,`${this.url}/bucket/${s}`,{id:s,name:s,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(st(l))return{data:null,error:l};throw l}})}emptyBucket(s){return In(this,void 0,void 0,function*(){try{return{data:yield us(this.fetch,`${this.url}/bucket/${s}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(st(r))return{data:null,error:r};throw r}})}deleteBucket(s){return In(this,void 0,void 0,function*(){try{return{data:yield Fp(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(r){if(st(r))return{data:null,error:r};throw r}})}}class Hy extends Qy{constructor(s,r={},l,o){super(s,r,l,o)}from(s){return new qy(this.url,this.headers,s,this.fetch)}}const Ky="2.56.0";let sa="";typeof Deno<"u"?sa="deno":typeof document<"u"?sa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?sa="react-native":sa="node";const Vy={"X-Client-Info":`supabase-js-${sa}/${Ky}`},Gy={headers:Vy},Jy={schema:"public"},Yy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Xy={};var Zy=function(n,s,r,l){function o(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function m(y){try{g(l.next(y))}catch(v){d(v)}}function p(y){try{g(l.throw(y))}catch(v){d(v)}}function g(y){y.done?u(y.value):o(y.value).then(m,p)}g((l=l.apply(n,s||[])).next())})};const ew=n=>{let s;return n?s=n:typeof fetch>"u"?s=Rp:s=fetch,(...r)=>s(...r)},tw=()=>typeof Headers>"u"?Tp:Headers,sw=(n,s,r)=>{const l=ew(r),o=tw();return(u,d)=>Zy(void 0,void 0,void 0,function*(){var m;const p=(m=yield s())!==null&&m!==void 0?m:n;let g=new o(d==null?void 0:d.headers);return g.has("apikey")||g.set("apikey",n),g.has("Authorization")||g.set("Authorization",`Bearer ${p}`),l(u,Object.assign(Object.assign({},d),{headers:g}))})};var rw=function(n,s,r,l){function o(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function m(y){try{g(l.next(y))}catch(v){d(v)}}function p(y){try{g(l.throw(y))}catch(v){d(v)}}function g(y){y.done?u(y.value):o(y.value).then(m,p)}g((l=l.apply(n,s||[])).next())})};function nw(n){return n.endsWith("/")?n:n+"/"}function iw(n,s){var r,l;const{db:o,auth:u,realtime:d,global:m}=n,{db:p,auth:g,realtime:y,global:v}=s,b={db:Object.assign(Object.assign({},p),o),auth:Object.assign(Object.assign({},g),u),realtime:Object.assign(Object.assign({},y),d),storage:{},global:Object.assign(Object.assign(Object.assign({},v),m),{headers:Object.assign(Object.assign({},(r=v==null?void 0:v.headers)!==null&&r!==void 0?r:{}),(l=m==null?void 0:m.headers)!==null&&l!==void 0?l:{})}),accessToken:()=>rw(this,void 0,void 0,function*(){return""})};return n.accessToken?b.accessToken=n.accessToken:delete b.accessToken,b}const zp="2.71.1",$n=30*1e3,Su=3,Gc=Su*$n,aw="http://localhost:9999",lw="supabase.auth.token",ow={"X-Client-Info":`gotrue-js/${zp}`},Cu="X-Supabase-Api-Version",qp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,uw=10*60*1e3;class Gu extends Error{constructor(s,r,l){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=l}}function Ne(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class dw extends Gu{constructor(s,r,l){super(s,r,l),this.name="AuthApiError",this.status=r,this.code=l}}function hw(n){return Ne(n)&&n.name==="AuthApiError"}class Bp extends Gu{constructor(s,r){super(s),this.name="AuthUnknownError",this.originalError=r}}class jr extends Gu{constructor(s,r,l,o){super(s,l,o),this.name=r,this.status=l}}class sr extends jr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function fw(n){return Ne(n)&&n.name==="AuthSessionMissingError"}class Il extends jr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ll extends jr{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}}class Dl extends jr{constructor(s,r=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function mw(n){return Ne(n)&&n.name==="AuthImplicitGrantRedirectError"}class Om extends jr{constructor(s,r=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Eu extends jr{constructor(s,r){super(s,"AuthRetryableFetchError",r,void 0)}}function Jc(n){return Ne(n)&&n.name==="AuthRetryableFetchError"}class Im extends jr{constructor(s,r,l){super(s,"AuthWeakPasswordError",r,"weak_password"),this.reasons=l}}class Pu extends jr{constructor(s){super(s,"AuthInvalidJwtError",400,"invalid_jwt")}}const Bl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Lm=` 	
\r=`.split(""),pw=(()=>{const n=new Array(128);for(let s=0;s<n.length;s+=1)n[s]=-1;for(let s=0;s<Lm.length;s+=1)n[Lm[s].charCodeAt(0)]=-2;for(let s=0;s<Bl.length;s+=1)n[Bl[s].charCodeAt(0)]=s;return n})();function Dm(n,s,r){if(n!==null)for(s.queue=s.queue<<8|n,s.queuedBits+=8;s.queuedBits>=6;){const l=s.queue>>s.queuedBits-6&63;r(Bl[l]),s.queuedBits-=6}else if(s.queuedBits>0)for(s.queue=s.queue<<6-s.queuedBits,s.queuedBits=6;s.queuedBits>=6;){const l=s.queue>>s.queuedBits-6&63;r(Bl[l]),s.queuedBits-=6}}function Wp(n,s,r){const l=pw[n];if(l>-1)for(s.queue=s.queue<<6|l,s.queuedBits+=6;s.queuedBits>=8;)r(s.queue>>s.queuedBits-8&255),s.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Mm(n){const s=[],r=d=>{s.push(String.fromCodePoint(d))},l={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},u=d=>{vw(d,l,r)};for(let d=0;d<n.length;d+=1)Wp(n.charCodeAt(d),o,u);return s.join("")}function gw(n,s){if(n<=127){s(n);return}else if(n<=2047){s(192|n>>6),s(128|n&63);return}else if(n<=65535){s(224|n>>12),s(128|n>>6&63),s(128|n&63);return}else if(n<=1114111){s(240|n>>18),s(128|n>>12&63),s(128|n>>6&63),s(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function xw(n,s){for(let r=0;r<n.length;r+=1){let l=n.charCodeAt(r);if(l>55295&&l<=56319){const o=(l-55296)*1024&65535;l=(n.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}gw(l,s)}}function vw(n,s,r){if(s.utf8seq===0){if(n<=127){r(n);return}for(let l=1;l<6;l+=1)if((n>>7-l&1)===0){s.utf8seq=l;break}if(s.utf8seq===2)s.codepoint=n&31;else if(s.utf8seq===3)s.codepoint=n&15;else if(s.utf8seq===4)s.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");s.utf8seq-=1}else if(s.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");s.codepoint=s.codepoint<<6|n&63,s.utf8seq-=1,s.utf8seq===0&&r(s.codepoint)}}function yw(n){const s=[],r={queue:0,queuedBits:0},l=o=>{s.push(o)};for(let o=0;o<n.length;o+=1)Wp(n.charCodeAt(o),r,l);return new Uint8Array(s)}function ww(n){const s=[];return xw(n,r=>s.push(r)),new Uint8Array(s)}function bw(n){const s=[],r={queue:0,queuedBits:0},l=o=>{s.push(o)};return n.forEach(o=>Dm(o,r,l)),Dm(null,r,l),s.join("")}function jw(n){return Math.round(Date.now()/1e3)+n}function _w(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const s=Math.random()*16|0;return(n=="x"?s:s&3|8).toString(16)})}const es=()=>typeof window<"u"&&typeof document<"u",Ur={tested:!1,writable:!1},Qp=()=>{if(!es())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ur.tested)return Ur.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ur.tested=!0,Ur.writable=!0}catch{Ur.tested=!0,Ur.writable=!1}return Ur.writable};function Nw(n){const s={},r=new URL(n);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,u)=>{s[u]=o})}catch{}return r.searchParams.forEach((l,o)=>{s[o]=l}),s}const Hp=n=>{let s;return n?s=n:typeof fetch>"u"?s=(...r)=>va(async()=>{const{default:l}=await Promise.resolve().then(()=>di);return{default:l}},void 0).then(({default:l})=>l(...r)):s=fetch,(...r)=>s(...r)},kw=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Fn=async(n,s,r)=>{await n.setItem(s,JSON.stringify(r))},$r=async(n,s)=>{const r=await n.getItem(s);if(!r)return null;try{return JSON.parse(r)}catch{return r}},er=async(n,s)=>{await n.removeItem(s)};class Hl{constructor(){this.promise=new Hl.promiseConstructor((s,r)=>{this.resolve=s,this.reject=r})}}Hl.promiseConstructor=Promise;function Yc(n){const s=n.split(".");if(s.length!==3)throw new Pu("Invalid JWT structure");for(let l=0;l<s.length;l++)if(!cw.test(s[l]))throw new Pu("JWT not in base64url format");return{header:JSON.parse(Mm(s[0])),payload:JSON.parse(Mm(s[1])),signature:yw(s[2]),raw:{header:s[0],payload:s[1]}}}async function Sw(n){return await new Promise(s=>{setTimeout(()=>s(null),n)})}function Cw(n,s){return new Promise((l,o)=>{(async()=>{for(let u=0;u<1/0;u++)try{const d=await n(u);if(!s(u,null,d)){l(d);return}}catch(d){if(!s(u,d)){o(d);return}}})()})}function Ew(n){return("0"+n.toString(16)).substr(-2)}function Pw(){const s=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=r.length;let o="";for(let u=0;u<56;u++)o+=r.charAt(Math.floor(Math.random()*l));return o}return crypto.getRandomValues(s),Array.from(s,Ew).join("")}async function Rw(n){const r=new TextEncoder().encode(n),l=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(l);return Array.from(o).map(u=>String.fromCharCode(u)).join("")}async function Tw(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const r=await Rw(n);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ln(n,s,r=!1){const l=Pw();let o=l;r&&(o+="/PASSWORD_RECOVERY"),await Fn(n,`${s}-code-verifier`,o);const u=await Tw(l);return[u,l===u?"plain":"s256"]}const Aw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ow(n){const s=n.headers.get(Cu);if(!s||!s.match(Aw))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch{return null}}function Iw(n){if(!n)throw new Error("Missing exp claim");const s=Math.floor(Date.now()/1e3);if(n<=s)throw new Error("JWT has expired")}function Lw(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Dw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Dn(n){if(!Dw.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xc(){const n={};return new Proxy(n,{get:(s,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const l=r.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(s,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(s,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Um(n){return JSON.parse(JSON.stringify(n))}var Mw=function(n,s){var r={};for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&s.indexOf(l)<0&&(r[l]=n[l]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,l=Object.getOwnPropertySymbols(n);o<l.length;o++)s.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(n,l[o])&&(r[l[o]]=n[l[o]]);return r};const zr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Uw=[502,503,504];async function $m(n){var s;if(!kw(n))throw new Eu(zr(n),0);if(Uw.includes(n.status))throw new Eu(zr(n),n.status);let r;try{r=await n.json()}catch(u){throw new Bp(zr(u),u)}let l;const o=Ow(n);if(o&&o.getTime()>=qp["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?l=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(l=r.error_code),l){if(l==="weak_password")throw new Im(zr(r),n.status,((s=r.weak_password)===null||s===void 0?void 0:s.reasons)||[]);if(l==="session_not_found")throw new sr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((u,d)=>u&&typeof d=="string",!0))throw new Im(zr(r),n.status,r.weak_password.reasons);throw new dw(zr(r),n.status||500,l)}const $w=(n,s,r,l)=>{const o={method:n,headers:(s==null?void 0:s.headers)||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s==null?void 0:s.headers),o.body=JSON.stringify(l),Object.assign(Object.assign({},o),r))};async function Ee(n,s,r,l){var o;const u=Object.assign({},l==null?void 0:l.headers);u[Cu]||(u[Cu]=qp["2024-01-01"].name),l!=null&&l.jwt&&(u.Authorization=`Bearer ${l.jwt}`);const d=(o=l==null?void 0:l.query)!==null&&o!==void 0?o:{};l!=null&&l.redirectTo&&(d.redirect_to=l.redirectTo);const m=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",p=await Fw(n,s,r+m,{headers:u,noResolveJson:l==null?void 0:l.noResolveJson},{},l==null?void 0:l.body);return l!=null&&l.xform?l==null?void 0:l.xform(p):{data:Object.assign({},p),error:null}}async function Fw(n,s,r,l,o,u){const d=$w(s,l,o,u);let m;try{m=await n(r,Object.assign({},d))}catch(p){throw console.error(p),new Eu(zr(p),0)}if(m.ok||await $m(m),l!=null&&l.noResolveJson)return m;try{return await m.json()}catch(p){await $m(p)}}function Ss(n){var s;let r=null;Ww(n)&&(r=Object.assign({},n),n.expires_at||(r.expires_at=jw(n.expires_in)));const l=(s=n.user)!==null&&s!==void 0?s:n;return{data:{session:r,user:l},error:null}}function Fm(n){const s=Ss(n);return!s.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((r,l)=>r&&typeof l=="string",!0)&&(s.data.weak_password=n.weak_password),s}function rr(n){var s;return{data:{user:(s=n.user)!==null&&s!==void 0?s:n},error:null}}function zw(n){return{data:n,error:null}}function qw(n){const{action_link:s,email_otp:r,hashed_token:l,redirect_to:o,verification_type:u}=n,d=Mw(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:s,email_otp:r,hashed_token:l,redirect_to:o,verification_type:u},p=Object.assign({},d);return{data:{properties:m,user:p},error:null}}function Bw(n){return n}function Ww(n){return n.access_token&&n.refresh_token&&n.expires_in}const Zc=["global","local","others"];var Qw=function(n,s){var r={};for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&s.indexOf(l)<0&&(r[l]=n[l]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,l=Object.getOwnPropertySymbols(n);o<l.length;o++)s.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(n,l[o])&&(r[l[o]]=n[l[o]]);return r};class Hw{constructor({url:s="",headers:r={},fetch:l}){this.url=s,this.headers=r,this.fetch=Hp(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(s,r=Zc[0]){if(Zc.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zc.join(", ")}`);try{return await Ee(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(l){if(Ne(l))return{data:null,error:l};throw l}}async inviteUserByEmail(s,r={}){try{return await Ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:s,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:rr})}catch(l){if(Ne(l))return{data:{user:null},error:l};throw l}}async generateLink(s){try{const{options:r}=s,l=Qw(s,["options"]),o=Object.assign(Object.assign({},l),r);return"newEmail"in l&&(o.new_email=l==null?void 0:l.newEmail,delete o.newEmail),await Ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:qw,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ne(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(s){try{return await Ee(this.fetch,"POST",`${this.url}/admin/users`,{body:s,headers:this.headers,xform:rr})}catch(r){if(Ne(r))return{data:{user:null},error:r};throw r}}async listUsers(s){var r,l,o,u,d,m,p;try{const g={nextPage:null,lastPage:0,total:0},y=await Ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(r=s==null?void 0:s.page)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:"",per_page:(u=(o=s==null?void 0:s.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:Bw});if(y.error)throw y.error;const v=await y.json(),b=(d=y.headers.get("x-total-count"))!==null&&d!==void 0?d:0,E=(p=(m=y.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return E.length>0&&(E.forEach(N=>{const P=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(N.split(";")[1].split("=")[1]);g[`${w}Page`]=P}),g.total=parseInt(b)),{data:Object.assign(Object.assign({},v),g),error:null}}catch(g){if(Ne(g))return{data:{users:[]},error:g};throw g}}async getUserById(s){Dn(s);try{return await Ee(this.fetch,"GET",`${this.url}/admin/users/${s}`,{headers:this.headers,xform:rr})}catch(r){if(Ne(r))return{data:{user:null},error:r};throw r}}async updateUserById(s,r){Dn(s);try{return await Ee(this.fetch,"PUT",`${this.url}/admin/users/${s}`,{body:r,headers:this.headers,xform:rr})}catch(l){if(Ne(l))return{data:{user:null},error:l};throw l}}async deleteUser(s,r=!1){Dn(s);try{return await Ee(this.fetch,"DELETE",`${this.url}/admin/users/${s}`,{headers:this.headers,body:{should_soft_delete:r},xform:rr})}catch(l){if(Ne(l))return{data:{user:null},error:l};throw l}}async _listFactors(s){Dn(s.userId);try{const{data:r,error:l}=await Ee(this.fetch,"GET",`${this.url}/admin/users/${s.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:l}}catch(r){if(Ne(r))return{data:null,error:r};throw r}}async _deleteFactor(s){Dn(s.userId),Dn(s.id);try{return{data:await Ee(this.fetch,"DELETE",`${this.url}/admin/users/${s.userId}/factors/${s.id}`,{headers:this.headers}),error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}}}function zm(n={}){return{getItem:s=>n[s]||null,setItem:(s,r)=>{n[s]=r},removeItem:s=>{delete n[s]}}}function Kw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Mn={debug:!!(globalThis&&Qp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Kp extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}class Vw extends Kp{}async function Gw(n,s,r){Mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,s);const l=new globalThis.AbortController;return s>0&&setTimeout(()=>{l.abort(),Mn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},s),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async o=>{if(o){Mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,o.name);try{return await r()}finally{Mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,o.name)}}else{if(s===0)throw Mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Vw(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Mn.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Kw();const Jw={url:aw,storageKey:lw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ow,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function qm(n,s,r){return await r()}const Un={};class ha{constructor(s){var r,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ha.nextInstanceID,ha.nextInstanceID+=1,this.instanceID>0&&es()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},Jw),s);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Hw({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Hp(o.fetch),this.lock=o.lock||qm,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:es()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Gw:this.lock=qm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Qp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zm(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=zm(this.memoryStorage)),es()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}get jwks(){var s,r;return(r=(s=Un[this.storageKey])===null||s===void 0?void 0:s.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(s){Un[this.storageKey]=Object.assign(Object.assign({},Un[this.storageKey]),{jwks:s})}get jwks_cached_at(){var s,r;return(r=(s=Un[this.storageKey])===null||s===void 0?void 0:s.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(s){Un[this.storageKey]=Object.assign(Object.assign({},Un[this.storageKey]),{cachedAt:s})}_debug(...s){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${zp}) ${new Date().toISOString()}`,...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var s;try{const r=Nw(window.location.href);let l="none";if(this._isImplicitGrantCallback(r)?l="implicit":await this._isPKCECallback(r)&&(l="pkce"),es()&&this.detectSessionInUrl&&l!=="none"){const{data:o,error:u}=await this._getSessionFromURL(r,l);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),mw(u)){const p=(s=u.details)===null||s===void 0?void 0:s.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:d,redirectType:m}=o;return this._debug("#_initialize()","detected session in URL",d,"redirect type",m),await this._saveSession(d),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ne(r)?{error:r}:{error:new Bp("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var r,l,o;try{const u=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(r=s==null?void 0:s.options)===null||r===void 0?void 0:r.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(o=s==null?void 0:s.options)===null||o===void 0?void 0:o.captchaToken}},xform:Ss}),{data:d,error:m}=u;if(m||!d)return{data:{user:null,session:null},error:m};const p=d.session,g=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:g,session:p},error:null}}catch(u){if(Ne(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(s){var r,l,o;try{let u;if("email"in s){const{email:y,password:v,options:b}=s;let E=null,N=null;this.flowType==="pkce"&&([E,N]=await Ln(this.storage,this.storageKey)),u=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:y,password:v,data:(r=b==null?void 0:b.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:E,code_challenge_method:N},xform:Ss})}else if("phone"in s){const{phone:y,password:v,options:b}=s;u=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:v,data:(l=b==null?void 0:b.data)!==null&&l!==void 0?l:{},channel:(o=b==null?void 0:b.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:Ss})}else throw new Ll("You must provide either an email or phone number and a password");const{data:d,error:m}=u;if(m||!d)return{data:{user:null,session:null},error:m};const p=d.session,g=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:g,session:p},error:null}}catch(u){if(Ne(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(s){try{let r;if("email"in s){const{email:u,password:d,options:m}=s;r=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:d,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Fm})}else if("phone"in s){const{phone:u,password:d,options:m}=s;r=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:d,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Fm})}else throw new Ll("You must provide either an email or phone number and a password");const{data:l,error:o}=r;return o?{data:{user:null,session:null},error:o}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Il}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:o})}catch(r){if(Ne(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(s){var r,l,o,u;return await this._handleProviderSignIn(s.provider,{redirectTo:(r=s.options)===null||r===void 0?void 0:r.redirectTo,scopes:(l=s.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=s.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(u=s.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(s))}async signInWithWeb3(s){const{chain:r}=s;if(r==="solana")return await this.signInWithSolana(s);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(s){var r,l,o,u,d,m,p,g,y,v,b,E;let N,P;if("message"in s)N=s.message,P=s.signature;else{const{chain:w,wallet:A,statement:M,options:L}=s;let R;if(es())if(typeof A=="object")R=A;else{const W=window;if("solana"in W&&typeof W.solana=="object"&&("signIn"in W.solana&&typeof W.solana.signIn=="function"||"signMessage"in W.solana&&typeof W.solana.signMessage=="function"))R=W.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(L!=null&&L.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=A}const $=new URL((r=L==null?void 0:L.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in R&&R.signIn){const W=await R.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},L==null?void 0:L.signInWithSolana),{version:"1",domain:$.host,uri:$.href}),M?{statement:M}:null));let se;if(Array.isArray(W)&&W[0]&&typeof W[0]=="object")se=W[0];else if(W&&typeof W=="object"&&"signedMessage"in W&&"signature"in W)se=W;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in se&&"signature"in se&&(typeof se.signedMessage=="string"||se.signedMessage instanceof Uint8Array)&&se.signature instanceof Uint8Array)N=typeof se.signedMessage=="string"?se.signedMessage:new TextDecoder().decode(se.signedMessage),P=se.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in R)||typeof R.signMessage!="function"||!("publicKey"in R)||typeof R!="object"||!R.publicKey||!("toBase58"in R.publicKey)||typeof R.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${$.host} wants you to sign in with your Solana account:`,R.publicKey.toBase58(),...M?["",M,""]:[""],"Version: 1",`URI: ${$.href}`,`Issued At: ${(o=(l=L==null?void 0:L.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((u=L==null?void 0:L.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${L.signInWithSolana.notBefore}`]:[],...!((d=L==null?void 0:L.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${L.signInWithSolana.expirationTime}`]:[],...!((m=L==null?void 0:L.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${L.signInWithSolana.chainId}`]:[],...!((p=L==null?void 0:L.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${L.signInWithSolana.nonce}`]:[],...!((g=L==null?void 0:L.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${L.signInWithSolana.requestId}`]:[],...!((v=(y=L==null?void 0:L.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||v===void 0)&&v.length?["Resources",...L.signInWithSolana.resources.map(se=>`- ${se}`)]:[]].join(`
`);const W=await R.signMessage(new TextEncoder().encode(N),"utf8");if(!W||!(W instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");P=W}}try{const{data:w,error:A}=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:bw(P)},!((b=s.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(E=s.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:Ss});if(A)throw A;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new Il}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:A})}catch(w){if(Ne(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(s){const r=await $r(this.storage,`${this.storageKey}-code-verifier`),[l,o]=(r??"").split("/");try{const{data:u,error:d}=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:s,code_verifier:l},xform:Ss});if(await er(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new Il}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:o??null}),error:d})}catch(u){if(Ne(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(s){try{const{options:r,provider:l,token:o,access_token:u,nonce:d}=s,m=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:o,access_token:u,nonce:d,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ss}),{data:p,error:g}=m;return g?{data:{user:null,session:null},error:g}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new Il}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:g})}catch(r){if(Ne(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(s){var r,l,o,u,d;try{if("email"in s){const{email:m,options:p}=s;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await Ln(this.storage,this.storageKey));const{error:v}=await Ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},create_user:(l=p==null?void 0:p.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:g,code_challenge_method:y},redirectTo:p==null?void 0:p.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in s){const{phone:m,options:p}=s,{data:g,error:y}=await Ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(o=p==null?void 0:p.data)!==null&&o!==void 0?o:{},create_user:(u=p==null?void 0:p.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(d=p==null?void 0:p.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:y}}throw new Ll("You must provide either an email or phone number.")}catch(m){if(Ne(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(s){var r,l;try{let o,u;"options"in s&&(o=(r=s.options)===null||r===void 0?void 0:r.redirectTo,u=(l=s.options)===null||l===void 0?void 0:l.captchaToken);const{data:d,error:m}=await Ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:u}}),redirectTo:o,xform:Ss});if(m)throw m;if(!d)throw new Error("An error occurred on token verification.");const p=d.session,g=d.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:g,session:p},error:null}}catch(o){if(Ne(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(s){var r,l,o;try{let u=null,d=null;return this.flowType==="pkce"&&([u,d]=await Ln(this.storage,this.storageKey)),await Ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(l=(r=s.options)===null||r===void 0?void 0:r.redirectTo)!==null&&l!==void 0?l:void 0}),!((o=s==null?void 0:s.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:d}),headers:this.headers,xform:zw})}catch(u){if(Ne(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:r},error:l}=s;if(l)throw l;if(!r)throw new sr;const{error:o}=await Ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:o}})}catch(s){if(Ne(s))return{data:{user:null,session:null},error:s};throw s}}async resend(s){try{const r=`${this.url}/resend`;if("email"in s){const{email:l,type:o,options:u}=s,{error:d}=await Ee(this.fetch,"POST",r,{headers:this.headers,body:{email:l,type:o,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in s){const{phone:l,type:o,options:u}=s,{data:d,error:m}=await Ee(this.fetch,"POST",r,{headers:this.headers,body:{phone:l,type:o,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:m}}throw new Ll("You must provide either an email or phone number and a type")}catch(r){if(Ne(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(s,r){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await l,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=r();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await s(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const r=await $r(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?s=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const l=s.expires_at?s.expires_at*1e3-Date.now()<Gc:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",s.expires_at),!l){if(this.userStorage){const d=await $r(this.userStorage,this.storageKey+"-user");d!=null&&d.user?s.user=d.user:s.user=Xc()}if(this.storage.isServer&&s.user){let d=this.suppressGetSessionWarning;s=new Proxy(s,{get:(p,g,y)=>(!d&&g==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(p,g,y))})}return{data:{session:s},error:null}}const{session:o,error:u}=await this._callRefreshToken(s.refresh_token);return u?{data:{session:null},error:u}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(s){return s?await this._getUser(s):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(s){try{return s?await Ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:s,xform:rr}):await this._useSession(async r=>{var l,o,u;const{data:d,error:m}=r;if(m)throw m;return!(!((l=d.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new sr}:await Ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0,xform:rr})})}catch(r){if(Ne(r))return fw(r)&&(await this._removeSession(),await er(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(s,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(s,r))}async _updateUser(s,r={}){try{return await this._useSession(async l=>{const{data:o,error:u}=l;if(u)throw u;if(!o.session)throw new sr;const d=o.session;let m=null,p=null;this.flowType==="pkce"&&s.email!=null&&([m,p]=await Ln(this.storage,this.storageKey));const{data:g,error:y}=await Ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:m,code_challenge_method:p}),jwt:d.access_token,xform:rr});if(y)throw y;return d.user=g.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(l){if(Ne(l))return{data:{user:null},error:l};throw l}}async setSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new sr;const r=Date.now()/1e3;let l=r,o=!0,u=null;const{payload:d}=Yc(s.access_token);if(d.exp&&(l=d.exp,o=l<=r),o){const{session:m,error:p}=await this._callRefreshToken(s.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!m)return{data:{user:null,session:null},error:null};u=m}else{const{data:m,error:p}=await this._getUser(s.access_token);if(p)throw p;u={access_token:s.access_token,refresh_token:s.refresh_token,user:m.user,token_type:"bearer",expires_in:l-r,expires_at:l},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(r){if(Ne(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async r=>{var l;if(!s){const{data:d,error:m}=r;if(m)throw m;s=(l=d.session)!==null&&l!==void 0?l:void 0}if(!(s!=null&&s.refresh_token))throw new sr;const{session:o,error:u}=await this._callRefreshToken(s.refresh_token);return u?{data:{user:null,session:null},error:u}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Ne(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(s,r){try{if(!es())throw new Dl("No browser detected.");if(s.error||s.error_description||s.error_code)throw new Dl(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Om("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Dl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!s.code)throw new Om("No code detected.");const{data:M,error:L}=await this._exchangeCodeForSession(s.code);if(L)throw L;const R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:M.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:o,access_token:u,refresh_token:d,expires_in:m,expires_at:p,token_type:g}=s;if(!u||!m||!d||!g)throw new Dl("No session defined in URL");const y=Math.round(Date.now()/1e3),v=parseInt(m);let b=y+v;p&&(b=parseInt(p));const E=b-y;E*1e3<=$n&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${v}s`);const N=b-v;y-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,b,y):y-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,b,y);const{data:P,error:w}=await this._getUser(u);if(w)throw w;const A={provider_token:l,provider_refresh_token:o,access_token:u,expires_in:v,expires_at:b,refresh_token:d,token_type:g,user:P.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:A,redirectType:s.type},error:null}}catch(l){if(Ne(l))return{data:{session:null,redirectType:null},error:l};throw l}}_isImplicitGrantCallback(s){return!!(s.access_token||s.error_description)}async _isPKCECallback(s){const r=await $r(this.storage,`${this.storageKey}-code-verifier`);return!!(s.code&&r)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async r=>{var l;const{data:o,error:u}=r;if(u)return{error:u};const d=(l=o.session)===null||l===void 0?void 0:l.access_token;if(d){const{error:m}=await this.admin.signOut(d,s);if(m&&!(hw(m)&&(m.status===404||m.status===401||m.status===403)))return{error:m}}return s!=="others"&&(await this._removeSession(),await er(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(s){const r=_w(),l={id:r,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,l),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:l}}}async _emitInitialSession(s){return await this._useSession(async r=>{var l,o;try{const{data:{session:u},error:d}=r;if(d)throw d;await((l=this.stateChangeEmitters.get(s))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",s,"session",u)}catch(u){await((o=this.stateChangeEmitters.get(s))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",u),console.error(u)}})}async resetPasswordForEmail(s,r={}){let l=null,o=null;this.flowType==="pkce"&&([l,o]=await Ln(this.storage,this.storageKey,!0));try{return await Ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:s,code_challenge:l,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(u){if(Ne(u))return{data:null,error:u};throw u}}async getUserIdentities(){var s;try{const{data:r,error:l}=await this.getUser();if(l)throw l;return{data:{identities:(s=r.user.identities)!==null&&s!==void 0?s:[]},error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}}async linkIdentity(s){var r;try{const{data:l,error:o}=await this._useSession(async u=>{var d,m,p,g,y;const{data:v,error:b}=u;if(b)throw b;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,s.provider,{redirectTo:(d=s.options)===null||d===void 0?void 0:d.redirectTo,scopes:(m=s.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=s.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await Ee(this.fetch,"GET",E,{headers:this.headers,jwt:(y=(g=v.session)===null||g===void 0?void 0:g.access_token)!==null&&y!==void 0?y:void 0})});if(o)throw o;return es()&&!(!((r=s.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(l==null?void 0:l.url),{data:{provider:s.provider,url:l==null?void 0:l.url},error:null}}catch(l){if(Ne(l))return{data:{provider:s.provider,url:null},error:l};throw l}}async unlinkIdentity(s){try{return await this._useSession(async r=>{var l,o;const{data:u,error:d}=r;if(d)throw d;return await Ee(this.fetch,"DELETE",`${this.url}/user/identities/${s.identity_id}`,{headers:this.headers,jwt:(o=(l=u.session)===null||l===void 0?void 0:l.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(Ne(r))return{data:null,error:r};throw r}}async _refreshAccessToken(s){const r=`#_refreshAccessToken(${s.substring(0,5)}...)`;this._debug(r,"begin");try{const l=Date.now();return await Cw(async o=>(o>0&&await Sw(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await Ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:s},headers:this.headers,xform:Ss})),(o,u)=>{const d=200*Math.pow(2,o);return u&&Jc(u)&&Date.now()+d-l<$n})}catch(l){if(this._debug(r,"error",l),Ne(l))return{data:{session:null,user:null},error:l};throw l}finally{this._debug(r,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,r){const l=await this._getUrlForProvider(`${this.url}/authorize`,s,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",r,"url",l),es()&&!r.skipBrowserRedirect&&window.location.assign(l),{data:{provider:s,url:l},error:null}}async _recoverAndRefresh(){var s,r;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const o=await $r(this.storage,this.storageKey);if(o&&this.userStorage){let d=await $r(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:o.user},await Fn(this.userStorage,this.storageKey+"-user",d)),o.user=(s=d==null?void 0:d.user)!==null&&s!==void 0?s:Xc()}else if(o&&!o.user&&!o.user){const d=await $r(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(o.user=d.user,await er(this.storage,this.storageKey+"-user"),await Fn(this.storage,this.storageKey,o)):o.user=Xc()}if(this._debug(l,"session from storage",o),!this._isValidSession(o)){this._debug(l,"session is not valid"),o!==null&&await this._removeSession();return}const u=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Gc;if(this._debug(l,`session has${u?"":" not"} expired with margin of ${Gc}s`),u){if(this.autoRefreshToken&&o.refresh_token){const{error:d}=await this._callRefreshToken(o.refresh_token);d&&(console.error(d),Jc(d)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:m}=await this._getUser(o.access_token);!m&&(d!=null&&d.user)?(o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(l,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(l,"error",o),console.error(o);return}finally{this._debug(l,"end")}}async _callRefreshToken(s){var r,l;if(!s)throw new sr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${s.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Hl;const{data:u,error:d}=await this._refreshAccessToken(s);if(d)throw d;if(!u.session)throw new sr;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const m={session:u.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(u){if(this._debug(o,"error",u),Ne(u)){const d={session:null,error:u};return Jc(u)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(d),d}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(u),u}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(s,r,l=!0){const o=`#_notifyAllSubscribers(${s})`;this._debug(o,"begin",r,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:s,session:r});const u=[],d=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(s,r)}catch(p){u.push(p)}});if(await Promise.all(d),u.length>0){for(let m=0;m<u.length;m+=1)console.error(u[m]);throw u[0]}}finally{this._debug(o,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0;const r=Object.assign({},s),l=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&r.user&&await Fn(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const u=Um(o);await Fn(this.storage,this.storageKey,u)}else{const o=Um(r);await Fn(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await er(this.storage,this.storageKey),await er(this.storage,this.storageKey+"-code-verifier"),await er(this.storage,this.storageKey+"-user"),this.userStorage&&await er(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&es()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",s)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),$n);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async r=>{const{data:{session:l}}=r;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((l.expires_at*1e3-s)/$n);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${$n}ms, refresh threshold is ${Su} ticks`),o<=Su&&await this._callRefreshToken(l.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof Kp)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!es()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const r=`#_onVisibilityChanged(${s})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,r,l){const o=[`provider=${encodeURIComponent(r)}`];if(l!=null&&l.redirectTo&&o.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l!=null&&l.scopes&&o.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[u,d]=await Ln(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(d)}`});o.push(m.toString())}if(l!=null&&l.queryParams){const u=new URLSearchParams(l.queryParams);o.push(u.toString())}return l!=null&&l.skipBrowserRedirect&&o.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${s}?${o.join("&")}`}async _unenroll(s){try{return await this._useSession(async r=>{var l;const{data:o,error:u}=r;return u?{data:null,error:u}:await Ee(this.fetch,"DELETE",`${this.url}/factors/${s.factorId}`,{headers:this.headers,jwt:(l=o==null?void 0:o.session)===null||l===void 0?void 0:l.access_token})})}catch(r){if(Ne(r))return{data:null,error:r};throw r}}async _enroll(s){try{return await this._useSession(async r=>{var l,o;const{data:u,error:d}=r;if(d)return{data:null,error:d};const m=Object.assign({friendly_name:s.friendlyName,factor_type:s.factorType},s.factorType==="phone"?{phone:s.phone}:{issuer:s.issuer}),{data:p,error:g}=await Ee(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(l=u==null?void 0:u.session)===null||l===void 0?void 0:l.access_token});return g?{data:null,error:g}:(s.factorType==="totp"&&(!((o=p==null?void 0:p.totp)===null||o===void 0)&&o.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(r){if(Ne(r))return{data:null,error:r};throw r}}async _verify(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var l;const{data:o,error:u}=r;if(u)return{data:null,error:u};const{data:d,error:m}=await Ee(this.fetch,"POST",`${this.url}/factors/${s.factorId}/verify`,{body:{code:s.code,challenge_id:s.challengeId},headers:this.headers,jwt:(l=o==null?void 0:o.session)===null||l===void 0?void 0:l.access_token});return m?{data:null,error:m}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:m})})}catch(r){if(Ne(r))return{data:null,error:r};throw r}})}async _challenge(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var l;const{data:o,error:u}=r;return u?{data:null,error:u}:await Ee(this.fetch,"POST",`${this.url}/factors/${s.factorId}/challenge`,{body:{channel:s.channel},headers:this.headers,jwt:(l=o==null?void 0:o.session)===null||l===void 0?void 0:l.access_token})})}catch(r){if(Ne(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(s){const{data:r,error:l}=await this._challenge({factorId:s.factorId});return l?{data:null,error:l}:await this._verify({factorId:s.factorId,challengeId:r.id,code:s.code})}async _listFactors(){const{data:{user:s},error:r}=await this.getUser();if(r)return{data:null,error:r};const l=(s==null?void 0:s.factors)||[],o=l.filter(d=>d.factor_type==="totp"&&d.status==="verified"),u=l.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:l,totp:o,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async s=>{var r,l;const{data:{session:o},error:u}=s;if(u)return{data:null,error:u};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Yc(o.access_token);let m=null;d.aal&&(m=d.aal);let p=m;((l=(r=o.user.factors)===null||r===void 0?void 0:r.filter(v=>v.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(p="aal2");const y=d.amr||[];return{data:{currentLevel:m,nextLevel:p,currentAuthenticationMethods:y},error:null}}))}async fetchJwk(s,r={keys:[]}){let l=r.keys.find(m=>m.kid===s);if(l)return l;const o=Date.now();if(l=this.jwks.keys.find(m=>m.kid===s),l&&this.jwks_cached_at+uw>o)return l;const{data:u,error:d}=await Ee(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=o,l=u.keys.find(m=>m.kid===s),!l)?null:l}async getClaims(s,r={}){try{let l=s;if(!l){const{data:E,error:N}=await this.getSession();if(N||!E.session)return{data:null,error:N};l=E.session.access_token}const{header:o,payload:u,signature:d,raw:{header:m,payload:p}}=Yc(l);r!=null&&r.allowExpired||Iw(u.exp);const g=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!g){const{error:E}=await this.getUser(l);if(E)throw E;return{data:{claims:u,header:o,signature:d},error:null}}const y=Lw(o.alg),v=await crypto.subtle.importKey("jwk",g,y,!0,["verify"]);if(!await crypto.subtle.verify(y,v,d,ww(`${m}.${p}`)))throw new Pu("Invalid JWT signature");return{data:{claims:u,header:o,signature:d},error:null}}catch(l){if(Ne(l))return{data:null,error:l};throw l}}}ha.nextInstanceID=0;const Yw=ha;class Xw extends Yw{constructor(s){super(s)}}var Zw=function(n,s,r,l){function o(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function m(y){try{g(l.next(y))}catch(v){d(v)}}function p(y){try{g(l.throw(y))}catch(v){d(v)}}function g(y){y.done?u(y.value):o(y.value).then(m,p)}g((l=l.apply(n,s||[])).next())})};class eb{constructor(s,r,l){var o,u,d;if(this.supabaseUrl=s,this.supabaseKey=r,!s)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const m=nw(s),p=new URL(m);this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const g=`sb-${p.hostname.split(".")[0]}-auth-token`,y={db:Jy,realtime:Xy,auth:Object.assign(Object.assign({},Yy),{storageKey:g}),global:Gy},v=iw(l??{},y);this.storageKey=(o=v.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(u=v.global.headers)!==null&&u!==void 0?u:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(b,E)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(E)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=v.auth)!==null&&d!==void 0?d:{},this.headers,v.global.fetch),this.fetch=sw(r,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new gy(new URL("rest/v1",p).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new Hy(this.storageUrl.href,this.headers,this.fetch,l==null?void 0:l.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new ay(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,r={},l={}){return this.rest.rpc(s,r,l)}channel(s,r={config:{}}){return this.realtime.channel(s,r)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var s,r;return Zw(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:l}=yield this.auth.getSession();return(r=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:r,detectSessionInUrl:l,storage:o,storageKey:u,flowType:d,lock:m,debug:p},g,y){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Xw({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),g),storageKey:u,autoRefreshToken:s,persistSession:r,detectSessionInUrl:l,storage:o,flowType:d,lock:m,debug:p,fetch:y,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(s){return new Oy(this.realtimeUrl.href,Object.assign(Object.assign({},s),{params:Object.assign({apikey:this.supabaseKey},s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,l)=>{this._handleTokenChanged(r,"CLIENT",l==null?void 0:l.access_token)})}_handleTokenChanged(s,r,l){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==l?this.changedAccessToken=l:s==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const tb=(n,s,r)=>new eb(n,s,r);function sb(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const s=n.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}sb()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const rb="https://dgssrzejerppvpuxxnly.supabase.co",nb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRnc3NyemVqZXJwcHZwdXh4bmx5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU2ODIxMzEsImV4cCI6MjA3MTI1ODEzMX0.qCxeLMcq2AOf3j_0dA5TeWK-xG2-5TT3KO2lcAxcOqw",ue=tb(rb,nb),Vp=O.createContext(void 0);function ib({children:n}){const[s,r]=O.useState(null),[l,o]=O.useState(null),[u,d]=O.useState(!0);O.useEffect(()=>{let E=!0;(async()=>{try{console.log("[Auth] Getting initial session...");const{data:{session:w},error:A}=await ue.auth.getSession();if(A){console.error("[Auth] Error getting initial session:",A),E&&(o(null),r(null),d(!1));return}if(console.log("[Auth] Initial session loaded:",!!w),E){if(o(w),w!=null&&w.user){console.log("[Auth] Fetching user profile for:",w.user.id);const M=await m(w.user.id);E&&r(M)}else r(null);d(!1)}}catch(w){console.error("[Auth] Error in getInitialSession:",w),E&&(o(null),r(null),d(!1))}})();const{data:{subscription:P}}=ue.auth.onAuthStateChange((w,A)=>{var M,L;console.log("[Auth] Auth state change:",w,"Session:",!!A),E&&(o(A),A!=null&&A.user&&(w==="SIGNED_IN"||w==="TOKEN_REFRESHED")?(console.log("[Auth] User signed in, will fetch profile:",A.user.id),r({id:A.user.id,email:A.user.email||"",name:((M=A.user.user_metadata)==null?void 0:M.name)||((L=A.user.email)==null?void 0:L.split("@")[0])||"",role:"REQUESTER",created_at:A.user.created_at||new Date().toISOString(),updated_at:A.user.updated_at||new Date().toISOString()}),setTimeout(async()=>{try{const R=await m(A.user.id);E&&R&&r(R)}catch(R){console.error("[Auth] Error fetching user data after sign in:",R)}},0)):w==="SIGNED_OUT"&&(console.log("[Auth] User signed out"),r(null)),d(!1))});return()=>{E=!1,P.unsubscribe()}},[]);const m=async E=>{try{console.log("[Auth] Fetching user data for ID:",E);const{data:N,error:P}=await ue.from("users").select("*").eq("id",E).maybeSingle();if(P){if(console.error("[Auth] Error fetching user data:",P),P.code==="PGRST116")return console.log("[Auth] User not found in users table:",E),null;throw P}return console.log("[Auth] User data fetched successfully:",!!N),N}catch(N){return console.error("[Auth] Error fetching user data:",N),null}},b={user:s,session:l,loading:u,signIn:async(E,N)=>{console.log("[Auth] Signing in user:",E),d(!0);try{const{data:P,error:w}=await ue.auth.signInWithPassword({email:E,password:N});if(w)return console.error("[Auth] Sign in error:",w),d(!1),{data:P,error:w};if(console.log("[Auth] Sign in successful:",!!P.user),P.session)try{console.log("[Auth] Logging signin activity..."),await ue.functions.invoke("activity-logger",{body:{action:"log_signin",details:{method:"email",timestamp:new Date().toISOString()}},headers:{Authorization:`Bearer ${P.session.access_token}`}}),console.log("[Auth] Signin activity logged successfully")}catch(A){console.warn("[Auth] Failed to log signin activity:",A)}return{data:P,error:null}}catch(P){return console.error("[Auth] Sign in exception:",P),d(!1),{data:null,error:P}}},signUp:async(E,N,P)=>{console.log("[Auth] Signing up user:",E,"name:",P),d(!0);try{const w=window.location.origin;console.log("[Auth] Using redirect URL:",`${w}/auth/callback`);const{data:A,error:M}=await ue.auth.signUp({email:E,password:N,options:{data:{full_name:P,name:P},emailRedirectTo:`${w}/auth/callback`}});if(M)return console.error("[Auth] Sign up auth error:",M),d(!1),{data:A,error:M};if(console.log("[Auth] Sign up auth successful:",!!A.user,"Session:",!!A.session),A.user&&!A.session){console.log("[Auth] Email confirmation required for:",E);const L={...A,needsEmailConfirmation:!0,confirmationMessage:`🎉 Account created successfully! Please check your email (${E}) and click the confirmation link to activate your account. The confirmation email should arrive within a few minutes.`};return d(!1),{data:L,error:null}}else if(A.user&&A.session)return console.log("[Auth] User signed up and immediately signed in (no email confirmation required)"),d(!1),{data:A,error:null};return console.log("[Auth] User profile will be created automatically by database trigger"),{data:A,error:null}}catch(w){return console.error("[Auth] Sign up exception:",w),d(!1),{data:null,error:w}}},signOut:async()=>{await ue.auth.signOut()},updateProfile:async E=>{if(!s)return;const{error:N}=await ue.from("users").update(E).eq("id",s.id);if(N)throw N;r({...s,...E})}};return i.jsx(Vp.Provider,{value:b,children:n})}function vt(){const n=O.useContext(Vp);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ab={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=(n,s)=>{const r=O.forwardRef(({color:l="currentColor",size:o=24,strokeWidth:u=2,absoluteStrokeWidth:d,className:m="",children:p,...g},y)=>O.createElement("svg",{ref:y,...ab,width:o,height:o,stroke:l,strokeWidth:d?Number(u)*24/Number(o):u,className:["lucide",`lucide-${lb(n)}`,m].join(" "),...g},[...s.map(([v,b])=>O.createElement(v,b)),...Array.isArray(p)?p:[p]]));return r.displayName=`${n}`,r};/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=xe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=xe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=xe("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=xe("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=xe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=xe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=xe("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=xe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=xe("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=xe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=xe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=xe("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=xe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=xe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=xe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=xe("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=xe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=xe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=xe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=xe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=xe("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=xe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=xe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=xe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=xe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=xe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=xe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=xe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=xe("MessageSquareX",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"m14.5 7.5-5 5",key:"3lb6iw"}],["path",{d:"m9.5 7.5 5 5",key:"ko136h"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=xe("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=xe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=xe("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=xe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=xe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=xe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=xe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=xe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=xe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=xe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=xe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=xe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=xe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=xe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=xe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=xe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=xe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function Zr({isActive:n=!1,size:s="sm",text:r,className:l=""}){const o={sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5"},u={sm:"text-xs",md:"text-sm",lg:"text-base"};return i.jsxs("div",{className:`inline-flex items-center space-x-1 ${l}`,children:[i.jsx(Ul,{className:`${o[s]} text-purple-500 ${n?"animate-pulse":""}`}),r&&i.jsx("span",{className:`${u[s]} text-purple-600 font-medium`,children:r})]})}function kb(){const[n,s]=O.useState(!0),[r,l]=O.useState({board:[[" "," "," "],[" "," "," "],[" "," "," "]],winner:" ",gameOver:!1,message:'Click "New Game" to start!',currentPlayer:"X"}),[o,u]=O.useState(!1),[d,m]=O.useState(!1),[p,g]=O.useState(null),[y,v]=O.useState(!0),[b,E]=O.useState({wins:0,losses:0,ties:0}),[N,P]=O.useState(null),w=()=>{s(!n)},A=async()=>{try{const q=await fetch("http://localhost:8080/api/tictactoe/start",{method:"POST",headers:{"Content-Type":"application/json"}});if(q.ok){const J=await q.json();if(J.success&&J.data&&J.gameId)return g(J.gameId),J.data}}catch{console.log("Java backend not available, falling back to Edge Function"),v(!1)}return null},M=async()=>{const{data:q,error:J}=await ue.functions.invoke("tictactoe-game",{body:{action:"start"}});if(J)throw new Error("Failed to start game with Edge Function");if(q!=null&&q.success&&(q!=null&&q.data))return q.data;throw new Error("Invalid response from Edge Function")},L=async(q,J)=>{if(!p)return null;try{const G=await fetch("http://localhost:8080/api/tictactoe/move",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gameId:p,row:q,col:J})});if(G.ok){const ne=await G.json();if(ne.success&&ne.data)return ne.data}}catch{console.log("Java backend move failed, falling back to Edge Function"),v(!1)}return null},R=async(q,J)=>{const{data:G,error:ne}=await ue.functions.invoke("tictactoe-game",{body:{action:"move",board:r.board,row:q,col:J}});if(ne)throw new Error("Failed to make move with Edge Function");if(G!=null&&G.success&&(G!=null&&G.data))return G.data;throw new Error("Invalid response from Edge Function")},$=async()=>{if(!p)return null;try{const q=await fetch("http://localhost:8080/api/tictactoe/ai-move",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gameId:p})});if(q.ok){const J=await q.json();if(J.success&&J.data)return J.data}}catch{console.log("Java backend AI move failed, falling back to Edge Function"),v(!1)}return null},W=async()=>{const{data:q,error:J}=await ue.functions.invoke("tictactoe-game",{body:{action:"ai-move",board:r.board}});if(J)throw new Error("Failed to get AI move with Edge Function");if(q!=null&&q.success&&(q!=null&&q.data))return q.data;throw new Error("Invalid response from Edge Function")},se=async()=>{u(!0);try{let q=null;y&&(q=await A()),q||(q=await M()),l({...q,message:"Your turn! You are X, AI is O."})}catch(q){console.error("Error starting game:",q)}finally{u(!1)}},le=async(q,J)=>{if(r.gameOver||r.board[q][J]!==" "||d||o)return;const G=r.board.map((H,re)=>H.map((X,k)=>re===q&&k===J?"X":X)),ne={...r,board:G,currentPlayer:"O",message:"Your move made! AI is thinking..."};l(ne),u(!0);try{let H=null;if(y&&(H=await L(q,J)),H||(H=await R(q,J)),(H==null?void 0:H.message)==="Invalid move"){l(r),u(!1);return}const re=we(G,"X"),X=G.every(k=>k.every(z=>z!==" "));if(re){l({...ne,winner:"X",gameOver:!0,message:"Congratulations! You won!"}),Q("X"),u(!1);return}if(X){l({...ne,winner:" ",gameOver:!0,message:"It's a tie!"}),Q(" "),u(!1);return}m(!0),l({...ne,message:"Your turn!"}),setTimeout(async()=>{try{let k=null;if(y&&(k=await $()),k||(k=await W()),(!k||k.row<0||k.row>2||k.col<0||k.col>2)&&(console.warn("AI calculation failed, using fallback logic"),k=_(G)),k&&G[k.row][k.col]!==" "&&(console.warn("AI attempted invalid move, finding alternative"),k=_(G)),!k){console.error("No available moves for AI - game should be over"),l({...ne,winner:" ",gameOver:!0,message:"It's a tie!"}),Q(" "),m(!1),u(!1);return}const z=G.map((_e,Pe)=>_e.map((Se,Ie)=>Pe===k.row&&Ie===k.col&&Se===" "?"O":Se)),he=we(z,"O"),me=z.every(_e=>_e.every(Pe=>Pe!==" ")),pe={board:z,winner:he?"O":" ",gameOver:he||me,message:he?"AI wins! Try again.":me?"It's a tie!":"Your turn!",currentPlayer:"X"};l(pe),pe.gameOver&&Q(pe.winner)}catch(k){console.error("Error getting AI move:",k);const z=_(G);if(z){console.log("Using fallback move after error:",z);const he=G.map((Pe,Se)=>Pe.map((Ie,B)=>Se===z.row&&B===z.col&&Ie===" "?"O":Ie)),me=we(he,"O"),pe=he.every(Pe=>Pe.every(Se=>Se!==" ")),_e={board:he,winner:me?"O":" ",gameOver:me||pe,message:me?"AI wins! Try again.":pe?"It's a tie!":"Your turn!",currentPlayer:"X"};l(_e),_e.gameOver&&Q(_e.winner)}else l({...ne,winner:" ",gameOver:!0,message:"It's a tie!"}),Q(" ")}finally{m(!1),u(!1)}},500)}catch(H){console.error("Error making move:",H),l(r),u(!1)}},we=(q,J)=>{for(let G=0;G<3;G++)if(q[G][0]===J&&q[G][1]===J&&q[G][2]===J)return!0;for(let G=0;G<3;G++)if(q[0][G]===J&&q[1][G]===J&&q[2][G]===J)return!0;return q[0][0]===J&&q[1][1]===J&&q[2][2]===J||q[0][2]===J&&q[1][1]===J&&q[2][0]===J},_=q=>{const J=[];for(let ne=0;ne<3;ne++)for(let H=0;H<3;H++)q[ne][H]===" "&&J.push({row:ne,col:H});if(J.length===0)return null;const G=Math.floor(Math.random()*J.length);return J[G]},Q=q=>{E(J=>({wins:q==="X"?J.wins+1:J.wins,losses:q==="O"?J.losses+1:J.losses,ties:q===" "?J.ties+1:J.ties}))},U=q=>q==="X"?i.jsx("span",{className:"text-blue-600 font-bold text-lg select-none",children:"✕"}):q==="O"?i.jsx("span",{className:"text-red-600 font-bold text-lg select-none",children:"⭕"}):null,te=(q,J)=>{const G="w-11 h-11 border-2 border-slate-400 flex items-center justify-center cursor-pointer hover:bg-blue-50 transition-colors text-lg font-bold";return r.board[q][J]!==" "||r.gameOver||d||o?G+" cursor-not-allowed bg-slate-50":G+" hover:bg-blue-100 bg-white"};return i.jsx("div",{className:"fixed right-4 top-1/2 -translate-y-1/2 z-50",children:i.jsx("div",{className:`bg-white shadow-xl border border-blue-200 transition-all duration-300 overflow-hidden ${n?"w-14 h-14 rounded-full":"w-80 h-[420px]"}`,children:n?i.jsx("button",{onClick:w,className:"w-full h-full flex items-center justify-center hover:bg-blue-50 rounded-full transition-colors group",title:"Play Tic-Tac-Toe",children:i.jsx("div",{className:"bg-blue-100 p-2 rounded-full group-hover:bg-blue-200 transition-colors",children:i.jsx(Qm,{className:"h-6 w-6 text-blue-600"})})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"bg-blue-100 p-1.5 rounded-full",children:i.jsx(Qm,{className:"h-4 w-4 text-blue-600"})}),i.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Tic-Tac-Toe"})]}),i.jsx("button",{onClick:w,className:"p-1 hover:bg-white/50 rounded transition-colors",title:"Minimize",children:i.jsx(Zp,{className:"h-4 w-4 text-slate-600"})})]}),i.jsxs("div",{className:"p-3 flex flex-col h-full",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-1 mb-2 text-xs flex-shrink-0",children:[i.jsxs("div",{className:"bg-blue-50 p-1 text-center",children:[i.jsx("div",{className:"font-bold text-blue-600 text-xs",children:b.wins}),i.jsx("div",{className:"text-blue-500 text-xs",children:"Wins"})]}),i.jsxs("div",{className:"bg-red-50 p-1 text-center",children:[i.jsx("div",{className:"font-bold text-red-600 text-xs",children:b.losses}),i.jsx("div",{className:"text-red-500 text-xs",children:"Losses"})]}),i.jsxs("div",{className:"bg-purple-50 p-1 text-center",children:[i.jsx("div",{className:"font-bold text-purple-600 text-xs",children:b.ties}),i.jsx("div",{className:"text-purple-500 text-xs",children:"Ties"})]})]}),i.jsxs("div",{className:"flex items-center justify-between mb-2 text-xs flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(hi,{className:"h-3 w-3 text-blue-600 mr-1"}),i.jsx("span",{className:"text-slate-700",children:"You (X)"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Wl,{className:`h-3 w-3 text-red-600 mr-1 ${d?"animate-pulse":""}`}),i.jsx("span",{className:"text-slate-700",children:"AI (O)"})]})]}),i.jsx("div",{className:"text-center mb-2 flex-shrink-0",children:i.jsx("div",{className:"text-xs text-slate-600 p-1 bg-slate-50",children:r.message})}),i.jsx("div",{className:"flex justify-center mb-3 flex-1 items-center",children:i.jsx("div",{className:"grid grid-cols-3 gap-1 bg-slate-200 p-2 w-40 h-40",children:r.board.map((q,J)=>q.map((G,ne)=>i.jsx("div",{className:te(J,ne),onClick:()=>le(J,ne),children:U(G)},`${J}-${ne}`)))})}),i.jsx("div",{className:"flex space-x-2 flex-shrink-0 mb-2",children:i.jsxs("button",{onClick:se,disabled:o||d,className:"flex-1 bg-blue-600 text-white px-3 py-2 text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:[i.jsx(bb,{className:"h-4 w-4 mr-1"}),"New Game"]})}),i.jsx("div",{className:"mt-2 pt-2 border-t border-slate-200 flex-shrink-0",children:i.jsx("div",{className:"text-center",children:i.jsxs("div",{className:"text-xs text-slate-500 flex items-center justify-center",children:[i.jsx(Wl,{className:"h-3 w-3 mr-1"}),i.jsx("span",{children:"Minimax AI"})]})})})]})]})})})}let Sb={data:""},Cb=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||Sb,Eb=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Pb=/\/\*[^]*?\*\/|  +/g,Km=/\n+/g,ir=(n,s)=>{let r="",l="",o="";for(let u in n){let d=n[u];u[0]=="@"?u[1]=="i"?r=u+" "+d+";":l+=u[1]=="f"?ir(d,u):u+"{"+ir(d,u[1]=="k"?"":s)+"}":typeof d=="object"?l+=ir(d,s?s.replace(/([^,])+/g,m=>u.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,p=>/&/.test(p)?p.replace(/&/g,m):m?m+" "+p:p)):u):d!=null&&(u=/^--/.test(u)?u:u.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=ir.p?ir.p(u,d):u+":"+d+";")}return r+(s&&o?s+"{"+o+"}":o)+l},Ns={},ng=n=>{if(typeof n=="object"){let s="";for(let r in n)s+=r+ng(n[r]);return s}return n},Rb=(n,s,r,l,o)=>{let u=ng(n),d=Ns[u]||(Ns[u]=(p=>{let g=0,y=11;for(;g<p.length;)y=101*y+p.charCodeAt(g++)>>>0;return"go"+y})(u));if(!Ns[d]){let p=u!==n?n:(g=>{let y,v,b=[{}];for(;y=Eb.exec(g.replace(Pb,""));)y[4]?b.shift():y[3]?(v=y[3].replace(Km," ").trim(),b.unshift(b[0][v]=b[0][v]||{})):b[0][y[1]]=y[2].replace(Km," ").trim();return b[0]})(n);Ns[d]=ir(o?{["@keyframes "+d]:p}:p,r?"":"."+d)}let m=r&&Ns.g?Ns.g:null;return r&&(Ns.g=Ns[d]),((p,g,y,v)=>{v?g.data=g.data.replace(v,p):g.data.indexOf(p)===-1&&(g.data=y?p+g.data:g.data+p)})(Ns[d],s,l,m),d},Tb=(n,s,r)=>n.reduce((l,o,u)=>{let d=s[u];if(d&&d.call){let m=d(r),p=m&&m.props&&m.props.className||/^go/.test(m)&&m;d=p?"."+p:m&&typeof m=="object"?m.props?"":ir(m,""):m===!1?"":m}return l+o+(d??"")},"");function Kl(n){let s=this||{},r=n.call?n(s.p):n;return Rb(r.unshift?r.raw?Tb(r,[].slice.call(arguments,1),s.p):r.reduce((l,o)=>Object.assign(l,o&&o.call?o(s.p):o),{}):r,Cb(s.target),s.g,s.o,s.k)}let ig,Ou,Iu;Kl.bind({g:1});let Os=Kl.bind({k:1});function Ab(n,s,r,l){ir.p=s,ig=n,Ou=r,Iu=l}function _r(n,s){let r=this||{};return function(){let l=arguments;function o(u,d){let m=Object.assign({},u),p=m.className||o.className;r.p=Object.assign({theme:Ou&&Ou()},m),r.o=/ *go\d+/.test(p),m.className=Kl.apply(r,l)+(p?" "+p:"");let g=n;return n[0]&&(g=m.as||n,delete m.as),Iu&&g[0]&&Iu(m),ig(g,m)}return o}}var Ob=n=>typeof n=="function",Lu=(n,s)=>Ob(n)?n(s):n,Ib=(()=>{let n=0;return()=>(++n).toString()})(),Lb=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let s=matchMedia("(prefers-reduced-motion: reduce)");n=!s||s.matches}return n}})(),Db=20,ag="default",lg=(n,s)=>{let{toastLimit:r}=n.settings;switch(s.type){case 0:return{...n,toasts:[s.toast,...n.toasts].slice(0,r)};case 1:return{...n,toasts:n.toasts.map(d=>d.id===s.toast.id?{...d,...s.toast}:d)};case 2:let{toast:l}=s;return lg(n,{type:n.toasts.find(d=>d.id===l.id)?1:0,toast:l});case 3:let{toastId:o}=s;return{...n,toasts:n.toasts.map(d=>d.id===o||o===void 0?{...d,dismissed:!0,visible:!1}:d)};case 4:return s.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(d=>d.id!==s.toastId)};case 5:return{...n,pausedAt:s.time};case 6:let u=s.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(d=>({...d,pauseDuration:d.pauseDuration+u}))}}},Mb=[],Ub={toasts:[],pausedAt:void 0,settings:{toastLimit:Db}},Bn={},og=(n,s=ag)=>{Bn[s]=lg(Bn[s]||Ub,n),Mb.forEach(([r,l])=>{r===s&&l(Bn[s])})},cg=n=>Object.keys(Bn).forEach(s=>og(n,s)),$b=n=>Object.keys(Bn).find(s=>Bn[s].toasts.some(r=>r.id===n)),Xu=(n=ag)=>s=>{og(s,n)},Fb=(n,s="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:s,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...r,id:(r==null?void 0:r.id)||Ib()}),wa=n=>(s,r)=>{let l=Fb(s,n,r);return Xu(l.toasterId||$b(l.id))({type:2,toast:l}),l.id},ht=(n,s)=>wa("blank")(n,s);ht.error=wa("error");ht.success=wa("success");ht.loading=wa("loading");ht.custom=wa("custom");ht.dismiss=(n,s)=>{let r={type:3,toastId:n};s?Xu(s)(r):cg(r)};ht.dismissAll=n=>ht.dismiss(void 0,n);ht.remove=(n,s)=>{let r={type:4,toastId:n};s?Xu(s)(r):cg(r)};ht.removeAll=n=>ht.remove(void 0,n);ht.promise=(n,s,r)=>{let l=ht.loading(s.loading,{...r,...r==null?void 0:r.loading});return typeof n=="function"&&(n=n()),n.then(o=>{let u=s.success?Lu(s.success,o):void 0;return u?ht.success(u,{id:l,...r,...r==null?void 0:r.success}):ht.dismiss(l),o}).catch(o=>{let u=s.error?Lu(s.error,o):void 0;u?ht.error(u,{id:l,...r,...r==null?void 0:r.error}):ht.dismiss(l)}),n};var zb=Os`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,qb=Os`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Bb=Os`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Wb=_r("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${zb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${qb} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Bb} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Qb=Os`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Hb=_r("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${Qb} 1s linear infinite;
`,Kb=Os`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Vb=Os`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Gb=_r("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Kb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Vb} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Jb=_r("div")`
  position: absolute;
`,Yb=_r("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Xb=Os`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Zb=_r("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Xb} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,e1=({toast:n})=>{let{icon:s,type:r,iconTheme:l}=n;return s!==void 0?typeof s=="string"?O.createElement(Zb,null,s):s:r==="blank"?null:O.createElement(Yb,null,O.createElement(Hb,{...l}),r!=="loading"&&O.createElement(Jb,null,r==="error"?O.createElement(Wb,{...l}):O.createElement(Gb,{...l})))},t1=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,s1=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,r1="0%{opacity:0;} 100%{opacity:1;}",n1="0%{opacity:1;} 100%{opacity:0;}",i1=_r("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,a1=_r("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,l1=(n,s)=>{let r=n.includes("top")?1:-1,[l,o]=Lb()?[r1,n1]:[t1(r),s1(r)];return{animation:s?`${Os(l)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Os(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};O.memo(({toast:n,position:s,style:r,children:l})=>{let o=n.height?l1(n.position||s||"top-center",n.visible):{opacity:0},u=O.createElement(e1,{toast:n}),d=O.createElement(a1,{...n.ariaProps},Lu(n.message,n));return O.createElement(i1,{className:n.className,style:{...o,...r,...n.style}},typeof l=="function"?l({icon:u,message:d}):O.createElement(O.Fragment,null,u,d))});Ab(O.createElement);Kl`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var ee=ht;function o1(){const[n,s]=zn.useState(null),[r,l]=zn.useState(!1),[o,u]=zn.useState(!1),d=async()=>{try{const v=await fetch("http://localhost:8080/api/quotes/random",{method:"GET",headers:{"Content-Type":"application/json"}});if(v.ok){const b=await v.json();if(b.success)return b.data}}catch{console.log("Java backend not available, falling back to Edge Function")}return null},m=async()=>{const{data:v,error:b}=await ue.functions.invoke("quote-generator",{body:{action:"random"}});if(b)throw new Error("Failed to fetch quote from Edge Function");if(v!=null&&v.success&&(v!=null&&v.data))return v.data;throw new Error("Invalid response from Edge Function")},p=async()=>{l(!0),u(!1);try{let v=await d();v||(v=await m()),s(v),ee.success("New inspiring quote generated!")}catch(v){console.error("Error fetching quote:",v),ee.error("Failed to generate quote. Please try again.")}finally{l(!1)}},g=()=>{n&&(u(!o),ee.success(o?"Removed from favorites":"Added to favorites"))},y=async()=>{if(!n)return;const v=`"${n.text}" - ${n.author}`;if(navigator.share)try{await navigator.share({title:"Inspiring Quote",text:v})}catch{}else try{await navigator.clipboard.writeText(v),ee.success("Quote copied to clipboard!")}catch{ee.error("Failed to copy quote")}};return zn.useEffect(()=>{p()},[]),i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[i.jsx(kb,{}),i.jsx("header",{className:"bg-white/80 backdrop-blur-sm border-b border-slate-200 sticky top-0 z-50",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center py-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ft,{className:"h-8 w-8 text-blue-600"}),i.jsx("span",{className:"text-2xl font-bold text-slate-900",children:"Common Resource Exchange"})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx(Ge,{to:"/login",className:"text-slate-600 hover:text-slate-900 px-4 py-2 rounded-lg transition-colors",children:"Sign In"}),i.jsx(Ge,{to:"/register",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:"Get Started"})]})]})})}),i.jsx("section",{className:"pt-20 pb-16",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[i.jsxs("div",{className:"text-center lg:text-left",children:[i.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-slate-900 mb-6",children:["Share Resources,",i.jsx("br",{}),i.jsx("span",{className:"text-blue-600",children:"Build Community"})]}),i.jsx("div",{className:"flex items-center justify-center lg:justify-start mb-4",children:i.jsx(Zr,{size:"md",text:"Now with AI-Powered Features",className:"bg-purple-50 px-3 py-1 rounded-full border border-purple-200"})}),i.jsx("p",{className:"text-xl text-slate-600 mb-8 max-w-3xl",children:"Connect with your community to share, borrow, and exchange resources. From books and tools to skills and services, make the most of what we have together."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center lg:justify-start",children:[i.jsxs(Ge,{to:"/register",className:"bg-blue-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-blue-700 transition-colors shadow-lg inline-flex items-center justify-center",children:["Start Sharing",i.jsx(eu,{className:"ml-2 h-5 w-5"})]}),i.jsx(Ge,{to:"/login",className:"border-2 border-slate-300 text-slate-700 px-8 py-4 rounded-lg text-lg font-semibold hover:border-slate-400 hover:bg-white transition-colors inline-flex items-center justify-center",children:"Sign In"})]})]}),i.jsx("div",{className:"hidden lg:block",children:i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:"/images/little_free_library_community_book_exchange.jpg",alt:"Community book sharing through Little Free Library",className:"rounded-2xl shadow-2xl w-full h-96 object-cover"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-blue-900/20 to-transparent rounded-2xl"})]})})]})})}),i.jsx("section",{className:"py-20 bg-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-4",children:"How It Works"}),i.jsx("p",{className:"text-xl text-slate-600 max-w-2xl mx-auto",children:"Simple, secure, and community-focused resource sharing"})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"text-center p-8 rounded-2xl bg-gradient-to-br from-blue-50 to-slate-50 border border-slate-200",children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx("img",{src:"/images/colorful-little-free-library-community-book-sharing.jpg",alt:"Colorful Little Free Library for book sharing",className:"w-full h-32 object-cover rounded-xl mb-4"}),i.jsx("div",{className:"bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto -mt-8 relative z-10",children:i.jsx(ft,{className:"h-8 w-8 text-blue-600"})})]}),i.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"List Resources"}),i.jsx("p",{className:"text-slate-600",children:"Share what you have - books, tools, equipment, or services. Set your own terms and availability."})]}),i.jsxs("div",{className:"text-center p-8 rounded-2xl bg-gradient-to-br from-green-50 to-slate-50 border border-slate-200",children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx("img",{src:"/images/community_book_sharing_library_kids.jpg",alt:"People sharing books at community library",className:"w-full h-32 object-cover rounded-xl mb-4"}),i.jsx("div",{className:"bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto -mt-8 relative z-10",children:i.jsx(gr,{className:"h-8 w-8 text-green-600"})})]}),i.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Connect & Request"}),i.jsx("p",{className:"text-slate-600",children:"Browse available resources and send requests. Connect directly with owners to coordinate exchanges."})]}),i.jsxs("div",{className:"text-center p-8 rounded-2xl bg-gradient-to-br from-purple-50 to-slate-50 border border-slate-200",children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx("img",{src:"/images/tool_sharing_workshop_community_illustration.jpg",alt:"Tool sharing workshop community illustration",className:"w-full h-32 object-cover rounded-xl mb-4"}),i.jsx("div",{className:"bg-purple-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto -mt-8 relative z-10",children:i.jsx(Au,{className:"h-8 w-8 text-purple-600"})})]}),i.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Rate & Review"}),i.jsx("p",{className:"text-slate-600",children:"Build trust through ratings and reviews. Help create a positive community experience for everyone."})]})]})]})}),i.jsx("section",{className:"py-20 bg-gradient-to-br from-slate-50 to-blue-50",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"Why Choose Our Platform?"}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"bg-blue-100 w-10 h-10 rounded-lg flex items-center justify-center mt-1",children:i.jsx(yr,{className:"h-5 w-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Secure & Trusted"}),i.jsx("p",{className:"text-slate-600",children:"Role-based access control and verified user profiles ensure safe exchanges."})]})]}),i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"bg-green-100 w-10 h-10 rounded-lg flex items-center justify-center mt-1",children:i.jsx(kt,{className:"h-5 w-5 text-green-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Real-time Communication"}),i.jsx("p",{className:"text-slate-600",children:"Instant messaging and notifications keep you connected throughout the exchange process."})]})]}),i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"bg-purple-100 w-10 h-10 rounded-lg flex items-center justify-center mt-1",children:i.jsx(Yu,{className:"h-5 w-5 text-purple-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Community Driven"}),i.jsx("p",{className:"text-slate-600",children:"Built for communities, by communities. Promote sustainability and resource sharing."})]})]})]})]}),i.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl border border-slate-200",children:[i.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-6 text-center",children:"Platform Stats"}),i.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"500+"}),i.jsx("div",{className:"text-slate-600",children:"Active Users"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:"1,200+"}),i.jsx("div",{className:"text-slate-600",children:"Resources Shared"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:"800+"}),i.jsx("div",{className:"text-slate-600",children:"Successful Exchanges"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:"4.8/5"}),i.jsx("div",{className:"text-slate-600",children:"Average Rating"})]})]})]})]})})}),i.jsx("section",{className:"py-20 bg-gradient-to-br from-slate-50 to-blue-50",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-4",children:"Bringing Resources to Life"}),i.jsx("p",{className:"text-xl text-slate-600 max-w-2xl mx-auto",children:"Showcase your resources with beautiful images and connect with community members who share your values"})]}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center mb-16",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-3xl font-bold text-slate-900 mb-6",children:"Make Your Resources Stand Out"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"bg-blue-100 w-6 h-6 rounded-full flex items-center justify-center mt-1",children:i.jsx("span",{className:"text-blue-600 text-sm font-bold",children:"✓"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-900",children:"High-Quality Image Uploads"}),i.jsx("p",{className:"text-slate-600",children:"Upload up to 5 images per resource to show every detail"})]})]}),i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"bg-green-100 w-6 h-6 rounded-full flex items-center justify-center mt-1",children:i.jsx("span",{className:"text-green-600 text-sm font-bold",children:"✓"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-900",children:"Visual Discovery"}),i.jsx("p",{className:"text-slate-600",children:"Browse resources with beautiful image galleries"})]})]}),i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"bg-purple-100 w-6 h-6 rounded-full flex items-center justify-center mt-1",children:i.jsx("span",{className:"text-purple-600 text-sm font-bold",children:"✓"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-900",children:"Secure Storage"}),i.jsx("p",{className:"text-slate-600",children:"Your images are safely stored and optimized for fast loading"})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("img",{src:"/images/professional-man-workshop-tools-pegboard.jpg",alt:"Professional workshop with organized tools",className:"rounded-xl shadow-lg w-full h-32 object-cover"}),i.jsx("img",{src:"/images/red_little_free_library_books_community.jpg",alt:"Community book sharing library",className:"rounded-xl shadow-lg w-full h-40 object-cover"})]}),i.jsxs("div",{className:"space-y-4 mt-8",children:[i.jsx("img",{src:"/images/community_tool_sharing_event_west_seattle.jpg",alt:"Community tool sharing event",className:"rounded-xl shadow-lg w-full h-40 object-cover"}),i.jsx("img",{src:"/images/little_free_library_community_book_sharing_fall.jpg",alt:"Fall season book sharing library",className:"rounded-xl shadow-lg w-full h-32 object-cover"})]})]})]})]})}),i.jsx("section",{className:"py-20 bg-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx(Zr,{size:"lg",text:"AI-Powered Features"})}),i.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-4",children:"Smart Technology, Simplified"}),i.jsx("p",{className:"text-xl text-slate-600 max-w-2xl mx-auto",children:"Experience the future of resource sharing with intelligent features that make listing and finding resources effortless"})]}),i.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"text-center p-8 rounded-2xl bg-gradient-to-br from-purple-50 to-blue-50 border border-purple-200",children:[i.jsx("div",{className:"bg-purple-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(Wl,{className:"h-8 w-8 text-purple-600"})}),i.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Auto-Description"}),i.jsx("p",{className:"text-slate-600 mb-4",children:"Upload an image and let AI generate detailed, helpful descriptions for your resources automatically."}),i.jsxs("div",{className:"inline-flex items-center text-sm text-purple-600 font-medium",children:[i.jsx(Ul,{className:"h-4 w-4 mr-1"}),"AI-Powered"]})]}),i.jsxs("div",{className:"text-center p-8 rounded-2xl bg-gradient-to-br from-blue-50 to-green-50 border border-blue-200",children:[i.jsx("div",{className:"bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(ft,{className:"h-8 w-8 text-blue-600"})}),i.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Smart Categories"}),i.jsx("p",{className:"text-slate-600 mb-4",children:"AI analyzes your resource details and suggests the perfect category, making organization effortless."}),i.jsxs("div",{className:"inline-flex items-center text-sm text-blue-600 font-medium",children:[i.jsx(Nb,{className:"h-4 w-4 mr-1"}),"Intelligent Sorting"]})]}),i.jsxs("div",{className:"text-center p-8 rounded-2xl bg-gradient-to-br from-green-50 to-purple-50 border border-green-200",children:[i.jsx("div",{className:"bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(Ul,{className:"h-8 w-8 text-green-600"})}),i.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Enhanced Search"}),i.jsx("p",{className:"text-slate-600 mb-4",children:"Get intelligent search suggestions and find exactly what you need with AI-powered discovery."}),i.jsxs("div",{className:"inline-flex items-center text-sm text-green-600 font-medium",children:[i.jsx(Wl,{className:"h-4 w-4 mr-1"}),"Smart Discovery"]})]})]}),i.jsx("div",{className:"text-center mt-12",children:i.jsxs(Ge,{to:"/register",className:"inline-flex items-center bg-purple-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-purple-700 transition-colors shadow-lg",children:[i.jsx(Ul,{className:"mr-2 h-5 w-5"}),"Try AI Features Now",i.jsx(eu,{className:"ml-2 h-5 w-5"})]})})]})}),i.jsx("section",{className:"py-20 bg-blue-600",children:i.jsxs("div",{className:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8",children:[i.jsx("h2",{className:"text-4xl font-bold text-white mb-6",children:"Ready to Start Sharing?"}),i.jsx("p",{className:"text-xl text-blue-100 mb-8",children:"Join our community today and discover the power of collaborative resource sharing."}),i.jsxs(Ge,{to:"/register",className:"bg-white text-blue-600 px-8 py-4 rounded-lg text-lg font-semibold hover:bg-blue-50 transition-colors shadow-lg inline-flex items-center",children:["Create Account",i.jsx(eu,{className:"ml-2 h-5 w-5"})]})]})}),i.jsx("section",{className:"py-20 bg-gradient-to-br from-purple-50 to-blue-50",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsxs("div",{className:"flex items-center justify-center mb-4",children:[i.jsx("div",{className:"bg-purple-100 p-3 rounded-full mr-3",children:i.jsx(tu,{className:"h-8 w-8 text-purple-600"})}),i.jsx("h2",{className:"text-4xl font-bold text-slate-900",children:"Daily Inspiration"})]}),i.jsx("p",{className:"text-xl text-slate-600 max-w-2xl mx-auto",children:"Get inspired with quotes about community, collaboration, and sharing that align with our platform's values."})]}),i.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-8 mb-6",children:r?i.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mb-4"}),i.jsx("p",{className:"text-slate-600 text-lg",children:"Generating inspiring quote..."})]}):n?i.jsxs("div",{className:"text-center",children:[i.jsxs("blockquote",{className:"text-2xl md:text-3xl font-medium text-slate-800 leading-relaxed mb-8",children:['"',n.text,'"']}),i.jsxs("div",{className:"flex items-center justify-center mb-6",children:[i.jsx("div",{className:"bg-slate-100 p-2 rounded-full mr-3",children:i.jsx(hi,{className:"h-5 w-5 text-slate-600"})}),i.jsxs("cite",{className:"text-xl text-slate-600 font-semibold",children:["— ",n.author]})]}),i.jsxs("div",{className:"flex items-center justify-center space-x-4 flex-wrap",children:[i.jsxs("button",{onClick:g,className:`flex items-center px-4 py-2 rounded-lg transition-colors ${o?"bg-red-100 text-red-600 hover:bg-red-200":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[i.jsx(fb,{className:`h-4 w-4 mr-2 ${o?"fill-current":""}`}),o?"Favorited":"Add to Favorites"]}),i.jsxs("button",{onClick:y,className:"flex items-center px-4 py-2 bg-blue-100 text-blue-600 hover:bg-blue-200 rounded-lg transition-colors",children:[i.jsx(tu,{className:"h-4 w-4 mr-2"}),"Share Quote"]})]})]}):i.jsxs("div",{className:"text-center py-16",children:[i.jsx(tu,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-500 text-lg",children:"Click the button below to generate your first inspiring quote!"})]})}),i.jsx("div",{className:"text-center",children:i.jsxs("button",{onClick:p,disabled:r,className:"bg-purple-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-lg inline-flex items-center",children:[i.jsx(eg,{className:`h-5 w-5 mr-2 ${r?"animate-spin":""}`}),r?"Generating...":"Generate New Quote"]})})]})}),i.jsx("footer",{className:"bg-slate-900 text-white py-12",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-4 md:mb-0",children:[i.jsx(ft,{className:"h-6 w-6"}),i.jsx("span",{className:"text-lg font-semibold",children:"Common Resource Exchange"})]}),i.jsx("div",{className:"text-slate-400",children:i.jsx("p",{children:"© 2025 Common Resource Exchange. Built by Salvador V S."})})]})})})]})}function c1(){const[n,s]=O.useState(""),[r,l]=O.useState(""),[o,u]=O.useState(!1),[d,m]=O.useState(!1),{signIn:p}=vt(),g=tn(),y=async v=>{if(v.preventDefault(),!n||!r){ee.error("Please fill in all fields");return}m(!0);try{const{data:b,error:E}=await p(n,r);E?E.message.includes("Email not confirmed")?(ee.error(`⚠️ Email verification required!

Please check your inbox for ${n} and click the confirmation link before signing in.`,{duration:1e4,style:{background:"#f59e0b",color:"#fff",maxWidth:"450px",whiteSpace:"pre-line"}}),setTimeout(()=>{ee("💡 Pro Tip: Don't forget to check your spam/junk folder!",{duration:8e3,icon:"💡",style:{background:"#8b5cf6",color:"#fff"}})},3e3)):E.message.includes("Invalid login credentials")?ee.error("Invalid email or password. Please check your credentials and try again.",{duration:6e3,style:{background:"#ef4444",color:"#fff"}}):ee.error(E.message||"Failed to sign in"):(ee.success("Welcome back!",{duration:4e3,style:{background:"#10b981",color:"#fff"}}),g("/dashboard"))}catch{ee.error("An unexpected error occurred. Please try again.")}finally{m(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-md w-full space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs(Ge,{to:"/",className:"inline-flex items-center space-x-2 mb-6",children:[i.jsx(ft,{className:"h-8 w-8 text-blue-600"}),i.jsx("span",{className:"text-2xl font-bold text-slate-900",children:"Common Resource Exchange"})]}),i.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Welcome back"}),i.jsx("p",{className:"text-slate-600",children:"Sign in to your account to continue"})]}),i.jsxs("div",{className:"bg-white py-8 px-6 shadow-xl rounded-2xl border border-slate-200",children:[i.jsxs("form",{className:"space-y-6",onSubmit:y,children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-2",children:"Email address"}),i.jsx("input",{id:"email",type:"email",required:!0,value:n,onChange:v=>s(v.target.value),className:"w-full px-3 py-3 border border-slate-300 rounded-lg shadow-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your email"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-2",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{id:"password",type:o?"text":"password",required:!0,value:r,onChange:v=>l(v.target.value),className:"w-full px-3 py-3 pr-10 border border-slate-300 rounded-lg shadow-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your password"}),i.jsx("button",{type:"button",onClick:()=>u(!o),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600",children:o?i.jsx(Ru,{className:"h-5 w-5"}):i.jsx(ni,{className:"h-5 w-5"})})]})]}),i.jsx("button",{type:"submit",disabled:d,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:d?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):i.jsxs(i.Fragment,{children:[i.jsx(xb,{className:"h-5 w-5 mr-2"}),"Sign In"]})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-slate-600",children:["Don't have an account?"," ",i.jsx(Ge,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign up here"})]})})]}),i.jsxs("div",{className:"bg-slate-100 p-4 rounded-lg border border-slate-200",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-700 mb-2",children:"Demo Accounts"}),i.jsxs("div",{className:"text-xs text-slate-600 space-y-1",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Super Admin (Salvador V S):"})," childetartaglia732@gmail.com"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Regular User:"})," Use the registration form to create an account"]})]})]})]})})}function u1(){const[n,s]=O.useState({name:"",email:"",password:"",confirmPassword:""}),[r,l]=O.useState(!1),[o,u]=O.useState(!1),[d,m]=O.useState(!1),{signUp:p}=vt(),g=tn(),y=b=>{s({...n,[b.target.name]:b.target.value})},v=async b=>{if(b.preventDefault(),!n.name||!n.email||!n.password||!n.confirmPassword){ee.error("Please fill in all fields");return}if(n.password!==n.confirmPassword){ee.error("Passwords do not match");return}if(n.password.length<6){ee.error("Password must be at least 6 characters long");return}m(!0);try{const{data:E,error:N}=await p(n.email,n.password,n.name);N?ee.error(N.message||"Failed to create account"):E.needsEmailConfirmation?(ee.success(E.confirmationMessage,{duration:1e4,style:{background:"#10b981",color:"#fff",maxWidth:"600px",fontSize:"14px"}}),setTimeout(()=>{ee("📧 Didn't receive the email? Check your spam/junk folder and ensure the email address is correct.",{duration:8e3,icon:"📧",style:{maxWidth:"500px"}})},2e3),setTimeout(()=>{ee("🔗 The confirmation link will redirect you back to this site to complete your registration.",{duration:6e3,icon:"🔗",style:{maxWidth:"500px"}})},4e3),g("/login")):(ee.success("Account created successfully! You can now sign in."),g("/login"))}catch{ee.error("An unexpected error occurred")}finally{m(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-md w-full space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs(Ge,{to:"/",className:"inline-flex items-center space-x-2 mb-6",children:[i.jsx(ft,{className:"h-8 w-8 text-blue-600"}),i.jsx("span",{className:"text-2xl font-bold text-slate-900",children:"Common Resource Exchange"})]}),i.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Create your account"}),i.jsx("p",{className:"text-slate-600",children:"Join our community and start sharing resources"})]}),i.jsxs("div",{className:"bg-white py-8 px-6 shadow-xl rounded-2xl border border-slate-200",children:[i.jsxs("form",{className:"space-y-6",onSubmit:v,children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700 mb-2",children:"Full Name"}),i.jsxs("div",{className:"relative",children:[i.jsx(hi,{className:"absolute left-3 top-3.5 h-5 w-5 text-slate-400"}),i.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:n.name,onChange:y,className:"w-full pl-10 pr-3 py-3 border border-slate-300 rounded-lg shadow-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your full name"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-2",children:"Email address"}),i.jsxs("div",{className:"relative",children:[i.jsx(Yp,{className:"absolute left-3 top-3.5 h-5 w-5 text-slate-400"}),i.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:n.email,onChange:y,className:"w-full pl-10 pr-3 py-3 border border-slate-300 rounded-lg shadow-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your email"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-2",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Hm,{className:"absolute left-3 top-3.5 h-5 w-5 text-slate-400"}),i.jsx("input",{id:"password",name:"password",type:r?"text":"password",required:!0,value:n.password,onChange:y,className:"w-full pl-10 pr-10 py-3 border border-slate-300 rounded-lg shadow-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Create a password"}),i.jsx("button",{type:"button",onClick:()=>l(!r),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600",children:r?i.jsx(Ru,{className:"h-5 w-5"}):i.jsx(ni,{className:"h-5 w-5"})})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 mb-2",children:"Confirm Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Hm,{className:"absolute left-3 top-3.5 h-5 w-5 text-slate-400"}),i.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:o?"text":"password",required:!0,value:n.confirmPassword,onChange:y,className:"w-full pl-10 pr-10 py-3 border border-slate-300 rounded-lg shadow-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Confirm your password"}),i.jsx("button",{type:"button",onClick:()=>u(!o),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600",children:o?i.jsx(Ru,{className:"h-5 w-5"}):i.jsx(ni,{className:"h-5 w-5"})})]})]}),i.jsx("button",{type:"submit",disabled:d,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:d?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):i.jsxs(i.Fragment,{children:[i.jsx(_b,{className:"h-5 w-5 mr-2"}),"Create Account"]})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-slate-600",children:["Already have an account?"," ",i.jsx(Ge,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign in here"})]})})]}),i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[i.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"📧 Email Confirmation Required"}),i.jsx("p",{className:"text-xs text-blue-700 mb-2",children:"After creating your account, you'll receive a confirmation email. Please check your inbox and click the confirmation link to activate your account."}),i.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[i.jsx("li",{children:"• The confirmation email should arrive within a few minutes"}),i.jsx("li",{children:"• Check your spam/junk folder if you don't see it"}),i.jsx("li",{children:"• You'll need to confirm your email before you can sign in"})]})]}),i.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[i.jsx("h3",{className:"text-sm font-medium text-green-800 mb-2",children:"Account Benefits"}),i.jsxs("ul",{className:"text-xs text-green-700 space-y-1",children:[i.jsx("li",{children:"• Share and discover community resources"}),i.jsx("li",{children:"• Connect with neighbors and local community"}),i.jsx("li",{children:"• Rate and review exchanges"}),i.jsx("li",{children:"• Real-time messaging with other users"})]})]})]})})}function d1(){const[n,s]=O.useState(!0),[r,l]=O.useState("processing"),[o,u]=O.useState("Processing email confirmation..."),d=tn(),[m]=jv();return O.useEffect(()=>{(async()=>{try{console.log("[AuthCallback] Processing auth callback...");const g=m.get("access_token"),y=m.get("refresh_token"),v=m.get("error_code"),b=m.get("error_description");if(v){console.error("[AuthCallback] Auth error:",v,b),l("error"),u(b||"Authentication failed"),s(!1),ee.error("Email confirmation failed. Please try signing up again."),setTimeout(()=>{d("/register")},3e3);return}if(g&&y){console.log("[AuthCallback] Setting session with tokens...");const{data:P,error:w}=await ue.auth.setSession({access_token:g,refresh_token:y});if(w){console.error("[AuthCallback] Session error:",w),l("error"),u("Failed to confirm email. Please try again."),s(!1),ee.error("Email confirmation failed. Please try signing up again."),setTimeout(()=>{d("/register")},3e3);return}if(P.user){console.log("[AuthCallback] Email confirmation successful:",P.user.email),l("success"),u(`🎉 Email confirmed successfully! Welcome to the platform, ${P.user.email}`),s(!1),ee.success("Email confirmed! You are now signed in."),setTimeout(()=>{d("/dashboard")},2e3);return}}console.log("[AuthCallback] No tokens in URL params, checking if already authenticated...");const{data:{session:E},error:N}=await ue.auth.getSession();if(N){console.error("[AuthCallback] Session check error:",N),l("error"),u("Failed to confirm email. Please try again."),s(!1),ee.error("Email confirmation failed. Please try signing up again."),setTimeout(()=>{d("/register")},3e3);return}E&&E.user?(console.log("[AuthCallback] User already authenticated:",E.user.email),l("success"),u(`🎉 Email confirmed successfully! Welcome to the platform, ${E.user.email}`),s(!1),ee.success("Email confirmed! You are now signed in."),setTimeout(()=>{d("/dashboard")},2e3)):(console.warn("[AuthCallback] No session found, redirecting to login"),l("error"),u("No confirmation data found. Please try the confirmation link again."),s(!1),setTimeout(()=>{d("/login")},3e3))}catch(g){console.error("[AuthCallback] Callback processing error:",g),l("error"),u("An unexpected error occurred during email confirmation."),s(!1),ee.error("Email confirmation failed. Please try again."),setTimeout(()=>{d("/register")},3e3)}})()},[d,m]),i.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-slate-50",children:i.jsxs("div",{className:"max-w-md w-full space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx(ft,{className:"h-12 w-12 text-blue-600 mx-auto mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Email Confirmation"})]}),i.jsx("div",{className:"bg-white py-8 px-6 shadow-xl rounded-2xl border border-slate-200",children:i.jsxs("div",{className:"text-center",children:[r==="processing"&&i.jsxs("div",{className:"space-y-4",children:[i.jsx(gb,{className:"h-12 w-12 text-blue-600 mx-auto animate-spin"}),i.jsx("h3",{className:"text-lg font-medium text-slate-900",children:"Processing..."}),i.jsx("p",{className:"text-slate-600",children:o})]}),r==="success"&&i.jsxs("div",{className:"space-y-4",children:[i.jsx(Gp,{className:"h-12 w-12 text-green-600 mx-auto"}),i.jsx("h3",{className:"text-lg font-medium text-green-800",children:"Success!"}),i.jsx("p",{className:"text-green-700",children:o}),i.jsx("p",{className:"text-sm text-slate-600",children:"Redirecting you to your dashboard..."})]}),r==="error"&&i.jsxs("div",{className:"space-y-4",children:[i.jsx(Jp,{className:"h-12 w-12 text-red-600 mx-auto"}),i.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Error"}),i.jsx("p",{className:"text-red-700",children:o}),i.jsx("p",{className:"text-sm text-slate-600",children:"You will be redirected shortly..."})]})]})}),i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-sm text-slate-500",children:"Need help? Contact our support team."})})]})})}function h1(){var N,P,w,A;const{user:n}=vt(),s=ms();O.useEffect(()=>{if(!n)return;const M=async()=>{try{await ue.from("users").update({last_login:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",n.id)}catch(se){console.warn("Failed to track dashboard visit:",se)}};M();const L=setInterval(()=>{M()},15*60*1e3);let R;const $=se=>{clearTimeout(R),R=setTimeout(()=>{se.forEach(le=>{s.invalidateQueries({queryKey:[le]})})},1e3)},W=ue.channel("dashboard-updates").on("postgres_changes",{event:"*",schema:"public",table:"resources"},()=>{$(["platform-stats","user-resources"])}).on("postgres_changes",{event:"*",schema:"public",table:"requests"},()=>{$(["platform-stats","user-requests"])}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"users"},()=>{$(["platform-stats"])}).subscribe();return()=>{clearInterval(L),clearTimeout(R),W.unsubscribe()}},[n,s]);const{data:r,isLoading:l}=ct({queryKey:["platform-stats"],queryFn:async()=>{const{data:M,error:L}=await ue.functions.invoke("statistics-system",{body:{action:"get_platform_stats"}});if(L)throw L;return M.data||{totalResources:0,activeUsers:0,totalMessages:0,totalRequests:0}},enabled:!!n,refetchInterval:3e5,staleTime:18e4,gcTime:10*60*1e3,refetchOnWindowFocus:!1}),{data:o,isLoading:u}=ct({queryKey:["user-resources",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const{data:M,error:L}=await ue.from("resources").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}).limit(5);if(L)throw L;return M||[]},enabled:!!n,staleTime:12e4,gcTime:5*60*1e3,refetchOnWindowFocus:!1}),{data:d,isLoading:m}=ct({queryKey:["user-requests",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const{data:M,error:L}=await ue.from("requests").select(`
          *,
          resources:resource_id (title, user_id)
        `).eq("requester_id",n.id).order("created_at",{ascending:!1}).limit(5);if(L)throw L;return(M||[]).map(R=>{var $;return{...R,resource_title:(($=R.resources)==null?void 0:$.title)||"[Resource Deleted]",resource_exists:!!R.resources,display_status:R.resources?R.status:"resource_deleted"}})},enabled:!!n,staleTime:12e4,gcTime:5*60*1e3,refetchOnWindowFocus:!1}),{data:p,isLoading:g}=ct({queryKey:["recent-notifications",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const{data:M,error:L}=await ue.from("notifications").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}).limit(5);if(L)throw L;return M||[]},enabled:!!n,staleTime:18e4,gcTime:5*60*1e3,refetchOnWindowFocus:!1}),y=()=>{const M=new Date().getHours();return M<12?"Good morning":M<18?"Good afternoon":"Good evening"},v=M=>new Date(M).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=M=>{switch(M){case"pending":return"text-yellow-600 bg-yellow-100";case"approved":return"text-green-600 bg-green-100";case"rejected":return"text-red-600 bg-red-100";case"completed":return"text-blue-600 bg-blue-100";case"resource_deleted":return"text-gray-600 bg-gray-100";default:return"text-slate-600 bg-slate-100"}},E=M=>{switch(M){case"resource_deleted":return"Resource Deleted";case"pending":return"Pending";case"approved":return"Approved";case"rejected":return"Rejected";case"completed":return"Completed";default:return M}};return i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-slate-900",children:[y(),", ",n==null?void 0:n.name,"!"]}),i.jsx("p",{className:"text-slate-600 mt-1",children:"Welcome to your Common Resource Exchange dashboard"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm text-slate-500",children:"Your Role"}),i.jsx("div",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium ${(n==null?void 0:n.role)==="SUPER_ADMIN"?"bg-purple-100 text-purple-700":(n==null?void 0:n.role)==="ADMIN"?"bg-red-100 text-red-700":(n==null?void 0:n.role)==="CONTRIBUTOR"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:(N=n==null?void 0:n.role)==null?void 0:N.replace("_"," ")})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 relative overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Total Resources Shared"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:l?"...":((P=r==null?void 0:r.totalResources)==null?void 0:P.toLocaleString())||0}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Across the platform"})]}),i.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:i.jsx(ft,{className:"h-6 w-6 text-blue-600"})})]}),i.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-blue-500/10 to-transparent rounded-full -mr-10 -mt-10"})]}),i.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 relative overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Active Users"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:l?"...":((w=r==null?void 0:r.activeUsers)==null?void 0:w.toLocaleString())||0}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Active in past 7 days"})]}),i.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:i.jsx(gr,{className:"h-6 w-6 text-green-600"})})]}),i.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-green-500/10 to-transparent rounded-full -mr-10 -mt-10"})]}),i.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 relative overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Message Exchanges"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:l?"...":((A=r==null?void 0:r.totalMessages)==null?void 0:A.toLocaleString())||0}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Total messages sent"})]}),i.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:i.jsx(kt,{className:"h-6 w-6 text-purple-600"})})]}),i.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-purple-500/10 to-transparent rounded-full -mr-10 -mt-10"})]}),i.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 relative overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Your Resources"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:u?"...":(o==null?void 0:o.length)||0}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Resources you've shared"})]}),i.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:i.jsx(Yu,{className:"h-6 w-6 text-orange-600"})})]}),i.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-orange-500/10 to-transparent rounded-full -mr-10 -mt-10"})]})]}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Your Recent Resources"}),i.jsx(Ge,{to:"/resources",className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View all"})]}),u?i.jsx("div",{className:"space-y-3",children:[...Array(3)].map((M,L)=>i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]},L))}):o&&o.length>0?i.jsx("div",{className:"space-y-4",children:o.map(M=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-slate-900",children:M.title}),i.jsxs("p",{className:"text-sm text-slate-600",children:[M.category," • ",M.condition]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:`inline-flex px-2 py-1 rounded text-xs font-medium ${M.is_available?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:M.is_available?"Available":"Unavailable"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:v(M.created_at)})]})]},M.id))}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(ft,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-500",children:"No resources yet"}),i.jsx(Ge,{to:"/resources",className:"text-blue-600 hover:text-blue-700 text-sm font-medium mt-2 inline-block",children:"Add your first resource"})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Your Recent Requests"}),i.jsx(Ge,{to:"/requests",className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View all"})]}),m?i.jsx("div",{className:"space-y-3",children:[...Array(3)].map((M,L)=>i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]},L))}):d&&d.length>0?i.jsx("div",{className:"space-y-4",children:d.map(M=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("h3",{className:`font-medium ${M.resource_exists?"text-slate-900":"text-slate-500 italic"}`,children:M.resource_title}),i.jsxs("p",{className:"text-sm text-slate-600",children:[M.message||"No message",!M.resource_exists&&" (resource no longer available)"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:`inline-flex px-2 py-1 rounded text-xs font-medium ${b(M.display_status)}`,children:E(M.display_status)}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:v(M.created_at)})]})]},M.id))}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(ii,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-500",children:"No requests yet"}),i.jsx(Ge,{to:"/resources",className:"text-blue-600 hover:text-blue-700 text-sm font-medium mt-2 inline-block",children:"Browse resources"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Recent Activity"}),i.jsx(Ge,{to:"/notifications",className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View all"})]}),g?i.jsx("div",{className:"space-y-3",children:[...Array(3)].map((M,L)=>i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]},L))}):p&&p.length>0?i.jsx("div",{className:"space-y-4",children:p.map(M=>i.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-slate-50 rounded-lg",children:[i.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:i.jsx(nr,{className:"h-4 w-4 text-blue-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-medium text-slate-900",children:M.title}),i.jsx("p",{className:"text-sm text-slate-600",children:M.message}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:v(M.created_at)})]}),!M.is_read&&i.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"})]},M.id))}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(nr,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-500",children:"No recent activity"})]})]})]})}function f1(){const{user:n}=vt(),s=Je({mutationFn:async r=>{if(!n)throw new Error("User not logged in");if(!r.type.startsWith("image/"))throw new Error("Please select an image file");if(r.size>5*1024*1024)throw new Error("Image size must be less than 5MB");return new Promise((l,o)=>{const u=new FileReader;u.onloadend=async()=>{try{const d=u.result,{data:m,error:p}=await ue.functions.invoke("image-upload",{body:{imageData:d,fileName:r.name}});if(p)throw new Error(`Upload service error: ${p.message||"Unknown error"}`);if(!m||!m.data||!m.data.publicUrl)throw new Error("Invalid response from upload service");l(m.data.publicUrl)}catch(d){o(new Error(`Upload failed: ${d.message||"Unknown error"}`))}},u.onerror=()=>{o(new Error("Failed to read file"))},u.readAsDataURL(r)})},retry:1,retryDelay:r=>Math.min(1e3*2**r,3e3)});return{uploadImage:s.mutateAsync,isUploading:s.isPending,uploadError:s.error}}function Zu(){const{user:n}=vt(),s=Je({mutationFn:async u=>{try{const{data:d,error:m}=await ue.functions.invoke("ai-assistant",{body:{action:"analyze_resource_image",imageData:u}});if(m)throw console.error("AI analysis error:",m),new Error(m.message||"Failed to analyze image");if(!d||!d.data)throw new Error("No analysis generated");return console.log("AI analysis result:",d.data),d.data}catch(d){throw console.error("Image analysis failed:",d),new Error(d.message||"Failed to analyze image")}},retry:2,retryDelay:u=>Math.min(1e3*2**u,5e3)}),r=Je({mutationFn:async u=>{try{const{data:d,error:m}=await ue.functions.invoke("ai-assistant",{body:{action:"generate_description",imageData:u}});if(m)throw console.error("AI description error:",m),new Error(m.message||"Failed to generate description");if(!d||!d.data)throw new Error("No description generated");return d.data.description}catch(d){throw console.error("Description generation failed:",d),new Error(d.message||"Failed to generate description")}},retry:2,retryDelay:u=>Math.min(1e3*2**u,5e3)}),l=Je({mutationFn:async({title:u,description:d})=>{try{const{data:m,error:p}=await ue.functions.invoke("ai-assistant",{body:{action:"suggest_category",title:u,description:d}});if(p)throw console.error("AI category error:",p),new Error(p.message||"Failed to suggest category");if(!m||!m.data)throw new Error("No category suggested");return m.data.category}catch(m){throw console.error("Category suggestion failed:",m),new Error(m.message||"Failed to suggest category")}},retry:2,retryDelay:u=>Math.min(1e3*2**u,3e3)}),o=Je({mutationFn:async u=>{try{const{data:d,error:m}=await ue.functions.invoke("ai-assistant",{body:{action:"enhance_search",text:u}});return m?(console.error("AI search error:",m),[]):!d||!d.data?[]:d.data.suggestions||[]}catch(d){return console.error("Search enhancement failed:",d),[]}},onError:u=>{console.error("Search enhancement failed:",u)}});return{analyzeResourceImage:s.mutateAsync,isAnalyzingImage:s.isPending,analyzeImageError:s.error,resetAnalyzeImageError:()=>s.reset(),generateDescription:r.mutateAsync,isGeneratingDescription:r.isPending,resetDescriptionError:()=>r.reset(),suggestCategory:l.mutateAsync,isSuggestingCategory:l.isPending,resetCategoryError:()=>l.reset(),enhanceSearch:o.mutateAsync,isEnhancingSearch:o.isPending}}function m1({onImageUploaded:n,onImageRemoved:s,onDescriptionGenerated:r,onAIAnalysisGenerated:l,existingImages:o=[],maxImages:u=5,className:d=""}){const[m,p]=O.useState(o),[g,y]=O.useState(null),[v,b]=O.useState(!1),[E,N]=O.useState(""),P=O.useRef(null),{uploadImage:w,isUploading:A}=f1(),{generateDescription:M,isGeneratingDescription:L,analyzeResourceImage:R,isAnalyzingImage:$,resetAnalyzeImageError:W,resetDescriptionError:se}=Zu(),[le,we]=O.useState(!1);O.useEffect(()=>{if(!le){o.length>0&&(console.log("[ImageUpload] ONE-TIME initialization with existing images:",o.length),p([...o])),we(!0);return}console.log("[ImageUpload] Initialization complete - parent sync permanently disabled")},[o]);const _=async G=>{if(m.length>=u)return;const ne=G[0];if(!ne)return;const H=URL.createObjectURL(ne);p(X=>[...X,H]);const re=new FileReader;re.onloadend=()=>{y(re.result)},re.readAsDataURL(ne);try{const X=await w(ne);p(k=>k.map(z=>z===H?X:z)),n(X),URL.revokeObjectURL(H)}catch{p(k=>k.filter(z=>z!==H)),URL.revokeObjectURL(H),y(null)}},Q=async()=>{if(!(!g||!l)){W(),b(!0),N("Uploading image to AI...");try{const G=new Promise((re,X)=>{setTimeout(()=>X(new Error("AI analysis timed out. Please try again.")),45e3)});N("AI is analyzing your image...");const ne=R(g),H=await Promise.race([ne,G]);N("Analysis complete! You can run this again if needed."),l(H)}catch(G){N(`Analysis failed: ${G.message}. You can try again.`)}finally{b(!1)}}},U=async()=>{if(!(!g||!r)){se();try{const G=await M(g);r(G)}catch{}}},te=G=>{p(ne=>{const H=ne.filter(re=>re!==G);return H.length===0&&y(null),H}),s(G),G.startsWith("blob:")&&URL.revokeObjectURL(G)},q=G=>{G.preventDefault();const ne=G.dataTransfer.files;ne.length>0&&_(ne)},J=G=>{G.preventDefault()};return i.jsxs("div",{className:d,children:[m.length<u&&i.jsx("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:border-slate-400 transition-colors cursor-pointer",onDrop:q,onDragOver:J,onClick:()=>{var G;return(G=P.current)==null?void 0:G.click()},children:i.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[i.jsx(rg,{className:"h-8 w-8 text-slate-400"}),i.jsxs("div",{className:"text-sm text-slate-600",children:[i.jsx("span",{className:"font-medium text-blue-600",children:"Click to upload"})," or drag and drop"]}),i.jsx("div",{className:"text-xs text-slate-500",children:"PNG, JPG, GIF up to 5MB"}),A&&i.jsx("div",{className:"text-xs text-blue-600 animate-pulse",children:"Uploading..."})]})}),g&&l&&i.jsxs("div",{className:"mt-4 p-4 bg-purple-50 rounded-lg border border-purple-200",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Zr,{isActive:v||$,size:"md"}),i.jsx("span",{className:"text-sm font-medium text-purple-700",children:"Auto-fill with AI Analysis"})]}),i.jsx("button",{onClick:Q,disabled:v||$,className:"px-3 py-1 bg-purple-600 text-white text-xs rounded-lg hover:bg-purple-700 disabled:opacity-50 transition-colors",children:v||$?"Analyzing...":"Auto-fill Form"})]}),i.jsxs("p",{className:"text-xs text-purple-600 mt-1",children:["AI will analyze your image and automatically fill the Title, Description, and Category fields.",E.includes("complete")?" You can run this again if needed.":""]}),E&&i.jsx("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-blue-700",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[v&&i.jsx("div",{className:"animate-spin h-3 w-3 border border-blue-600 border-t-transparent rounded-full"}),i.jsx("span",{children:E})]})})]}),g&&r&&!l&&i.jsxs("div",{className:"mt-4 p-4 bg-purple-50 rounded-lg border border-purple-200",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Zr,{isActive:L,size:"md"}),i.jsx("span",{className:"text-sm font-medium text-purple-700",children:"Generate AI Description"})]}),i.jsx("button",{onClick:U,disabled:L,className:"px-3 py-1 bg-purple-600 text-white text-xs rounded-lg hover:bg-purple-700 disabled:opacity-50 transition-colors",children:L?"Generating...":"Generate"})]}),i.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Let AI analyze your image and create a helpful description"})]}),m.length>0&&i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mt-4",children:m.map((G,ne)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:G,alt:`Preview ${ne+1}`,className:"w-full h-24 object-cover rounded-lg border border-slate-200"}),i.jsx("button",{type:"button",onClick:()=>te(G),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",children:i.jsx(As,{className:"h-4 w-4"})})]},ne))}),i.jsx("input",{ref:P,type:"file",accept:"image/*",onChange:G=>G.target.files&&_(G.target.files),className:"hidden"}),i.jsxs("div",{className:"text-xs text-slate-500 mt-2",children:[m.length,"/",u," images uploaded"]})]})}function p1({resource:n,onClose:s,onSuccess:r}){var M,L;const[l,o]=O.useState({title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",category:(n==null?void 0:n.category)||"Other",condition:(n==null?void 0:n.condition)||"Good",location:(n==null?void 0:n.location)||"",exchange_type:(n==null?void 0:n.exchange_type)||"lend",tags:((M=n==null?void 0:n.tags)==null?void 0:M.join(", "))||"",images:((L=n==null?void 0:n.images)==null?void 0:L.filter(R=>R&&(R.startsWith("http://")||R.startsWith("https://")||R.includes("/storage/v1/object/public/"))))||[]}),[u,d]=O.useState(!1),{suggestCategory:m,isSuggestingCategory:p}=Zu(),g=["Books","Electronics","Tools","Furniture","Clothing","Sports","Kitchen","Garden","Toys","Music","Other"],y=["Excellent","Good","Fair","Poor"],v=["lend","give","trade","sell"],b=R=>{console.log("[ResourceModal] Image uploaded, adding to formData:",R),o($=>{const W={...$,images:[...$.images,R]};return console.log("[ResourceModal] Updated formData.images:",W.images),W})},E=R=>{console.log("[ResourceModal] Image removed from formData:",R),o($=>{const W={...$,images:$.images.filter(se=>se!==R)};return console.log("[ResourceModal] Updated formData.images:",W.images),W})},N=R=>{o($=>({...$,description:$.description?`${$.description}

${R}`:R})),ee.success("AI description added!")},P=R=>{console.log("[ResourceModal] AI Analysis completed, updating formData:",R),console.log("[ResourceModal] Current formData.images before AI update:",l.images),o($=>{const W={...$,title:R.title,description:R.description,category:R.category};return console.log("[ResourceModal] FormData after AI update - images preserved:",W.images),W}),ee.success(`AI Analysis Complete! Auto-filled:
• Title: "${R.title}"
• Category: ${R.category}
• Description updated`,{duration:6e3,style:{background:"#10b981",color:"#fff"}})},w=async()=>{if(!l.title&&!l.description){ee.error("Please enter a title or description first");return}try{const R=await m({title:l.title,description:l.description});o($=>({...$,category:R})),ee.success(`AI suggested category: ${R}`,{duration:4e3,style:{background:"#8b5cf6",color:"#fff"}})}catch(R){console.error("Category suggestion failed:",R),ee.error(R.message||"Failed to suggest category")}},A=async R=>{if(R.preventDefault(),!l.title||!l.description){ee.error("Please fill in all required fields");return}d(!0);try{const $={...l,tags:l.tags?l.tags.split(",").map(le=>le.trim()).filter(Boolean):[]},{data:W,error:se}=await ue.functions.invoke("resource-management",{body:{action:n?"update_resource":"create_resource",resourceData:$,resourceId:n==null?void 0:n.id}});if(se)throw se;ee.success(n?"Resource updated successfully":"Resource created successfully"),r()}catch($){ee.error($.message||"Failed to save resource")}finally{d(!1)}};return i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[i.jsx("div",{className:"fixed inset-0 bg-slate-500 bg-opacity-75 transition-opacity",onClick:s}),i.jsxs("div",{className:"relative bg-white rounded-2xl max-w-2xl w-full p-6 shadow-xl max-h-[90vh] overflow-y-auto",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-6",children:n?"Edit Resource":"Add New Resource"}),i.jsxs("form",{onSubmit:A,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Title *"}),i.jsx("input",{type:"text",required:!0,value:l.title,onChange:R=>o({...l,title:R.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter resource title"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description *"}),i.jsx("textarea",{required:!0,rows:3,value:l.description,onChange:R=>o({...l,description:R.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe your resource"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[i.jsx(pb,{className:"inline h-4 w-4 mr-1"}),"Resource Images"]}),i.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Upload images to make your resource more appealing. You can add up to 5 images."}),i.jsx(m1,{onImageUploaded:b,onImageRemoved:E,onDescriptionGenerated:N,onAIAnalysisGenerated:P,existingImages:l.images,maxImages:5,className:""})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Category"}),i.jsxs("button",{type:"button",onClick:w,disabled:p||!l.title&&!l.description,className:"flex items-center space-x-1 px-2 py-1 text-xs text-purple-600 hover:text-purple-700 disabled:opacity-50",children:[i.jsx(Zr,{isActive:p,size:"sm"}),i.jsx("span",{children:p?"Suggesting...":"AI Suggest"})]})]}),i.jsx("select",{value:l.category,onChange:R=>o({...l,category:R.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:g.map(R=>i.jsx("option",{value:R,children:R},R))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Condition"}),i.jsx("select",{value:l.condition,onChange:R=>o({...l,condition:R.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:y.map(R=>i.jsx("option",{value:R,children:R},R))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Exchange Type"}),i.jsx("select",{value:l.exchange_type,onChange:R=>o({...l,exchange_type:R.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:v.map(R=>i.jsx("option",{value:R,children:R.charAt(0).toUpperCase()+R.slice(1)},R))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Location"}),i.jsx("input",{type:"text",value:l.location,onChange:R=>o({...l,location:R.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter location (optional)"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Tags"}),i.jsx("input",{type:"text",value:l.tags,onChange:R=>o({...l,tags:R.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter tags separated by commas"})]}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:u,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?"Saving...":n?"Update Resource":"Create Resource"})]})]})]})]})})}function g1({value:n,onChange:s,placeholder:r="Search...",className:l=""}){const[o,u]=O.useState([]),[d,m]=O.useState(!1),{enhanceSearch:p,isEnhancingSearch:g}=Zu(),y=N=>{if(s(N),!N.trim()){u([]),m(!1);return}N.length>=3&&v(N)},v=async N=>{try{const P=await p(N);u(P||[]),m(!0)}catch(P){console.error("Search enhancement failed:",P)}},b=N=>{s(N),m(!1)},E=()=>{s(""),u([]),m(!1)};return i.jsxs("div",{className:`relative ${l}`,children:[i.jsxs("div",{className:"relative",children:[i.jsx(ai,{className:"absolute left-3 top-3 h-5 w-5 text-slate-400"}),i.jsx("input",{type:"text",placeholder:r,value:n,onChange:N=>y(N.target.value),onFocus:()=>o.length>0&&m(!0),onBlur:()=>setTimeout(()=>m(!1),200),className:"w-full pl-10 pr-10 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n&&i.jsx("button",{onClick:E,className:"absolute right-3 top-3 text-slate-400 hover:text-slate-600",children:i.jsx(As,{className:"h-5 w-5"})}),g&&i.jsx("div",{className:"absolute right-10 top-3",children:i.jsx(Zr,{isActive:!0,size:"sm"})})]}),d&&o.length>0&&i.jsxs("div",{className:"absolute top-full left-0 right-0 bg-white border border-slate-200 rounded-lg shadow-lg mt-1 z-10",children:[i.jsx("div",{className:"p-2 border-b border-slate-100 bg-purple-50",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Zr,{size:"sm"}),i.jsx("span",{className:"text-xs font-medium text-purple-700",children:"AI Suggestions"})]})}),i.jsx("div",{className:"max-h-48 overflow-y-auto",children:o.map((N,P)=>i.jsx("button",{onClick:()=>b(N),className:"w-full text-left px-3 py-2 text-sm text-slate-700 hover:bg-slate-100 transition-colors",children:N},P))})]})]})}function x1(){const{user:n}=vt(),s=ms(),[r,l]=O.useState(!1),[o,u]=O.useState(null),[d,m]=O.useState(""),[p,g]=O.useState("all"),[y,v]=O.useState(!1),[b,E]=O.useState({isOpen:!1,resource:null}),N=(n==null?void 0:n.role)==="SUPER_ADMIN",{data:P=[],isLoading:w}=ct({queryKey:["resources",d,p,y,n==null?void 0:n.id],queryFn:async()=>{let U=ue.from("resources").select("*").order("created_at",{ascending:!1});y&&n&&(U=U.eq("user_id",n.id)),p!=="all"&&(U=U.eq("category",p)),d&&(U=U.or(`title.ilike.%${d}%,description.ilike.%${d}%`));const{data:te,error:q}=await U;if(q)throw q;return te||[]},enabled:!!n}),A=["Books","Electronics","Tools","Furniture","Clothing","Sports","Kitchen","Garden","Toys","Music","Other"],M=U=>new Date(U).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),L=({resource:U})=>{const te=U.user_id===(n==null?void 0:n.id);return i.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 hover:shadow-md transition-shadow",children:[U.images&&U.images.length>0&&i.jsxs("div",{className:"mb-4",children:[i.jsx("img",{src:U.images[0],alt:U.title,className:"w-full h-40 object-cover rounded-xl"}),U.images.length>1&&i.jsxs("div",{className:"mt-2 flex space-x-2",children:[U.images.slice(1,4).map((q,J)=>i.jsx("img",{src:q,alt:`${U.title} ${J+2}`,className:"w-16 h-16 object-cover rounded-lg"},J)),U.images.length>4&&i.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-lg flex items-center justify-center",children:i.jsxs("span",{className:"text-xs text-slate-600",children:["+",U.images.length-4]})})]})]}),i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:U.title}),i.jsx("p",{className:"text-slate-600 text-sm mb-3 line-clamp-2",children:U.description}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[i.jsx("span",{className:"inline-flex px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full",children:U.category}),i.jsx("span",{className:"inline-flex px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full",children:U.condition}),i.jsx("span",{className:"inline-flex px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded-full",children:U.exchange_type}),U.is_available?i.jsx("span",{className:"inline-flex px-2 py-1 bg-emerald-100 text-emerald-700 text-xs rounded-full",children:"Available"}):i.jsx("span",{className:"inline-flex px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full",children:"Unavailable"})]}),i.jsxs("div",{className:"flex items-center text-xs text-slate-500 space-x-4",children:[U.location&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(Xp,{className:"h-3 w-3 mr-1"}),U.location]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ju,{className:"h-3 w-3 mr-1"}),M(U.created_at)]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(ni,{className:"h-3 w-3 mr-1"}),U.views," views"]})]})]}),i.jsxs("div",{className:"flex flex-col space-y-2 ml-4",children:[te?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>u(U),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit resource",children:i.jsx(sg,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>_(U.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete resource",children:i.jsx(li,{className:"h-4 w-4"})})]}):i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>we(U.id),disabled:!U.is_available||le.isPending,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:[le.isPending?i.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}):null,"Request"]}),i.jsx("button",{onClick:()=>Q(U.user_id),className:"p-2 text-slate-600 hover:bg-slate-50 rounded-lg transition-colors",title:"Message owner",children:i.jsx(kt,{className:"h-4 w-4"})})]}),N&&!te&&i.jsxs("button",{onClick:()=>W(U),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors flex items-center space-x-1",title:"Admin: Delete this resource",children:[i.jsx(yr,{className:"h-3 w-3"}),i.jsx(li,{className:"h-3 w-3"})]})]})]})]})},R=Je({mutationFn:async U=>{const{data:te,error:q}=await ue.functions.invoke("resource-management",{body:{action:"delete_resource",resourceId:U}});if(q)throw q;return te},onSuccess:()=>{ee.success("Resource deleted successfully"),s.invalidateQueries({queryKey:["resources"]})},onError:U=>{ee.error(U.message||"Failed to delete resource")}}),$=Je({mutationFn:async U=>{const{data:te,error:q}=await ue.functions.invoke("resource-management",{body:{action:"admin_delete_resource",resourceId:U}});if(q)throw q;return te},onSuccess:U=>{ee.success(`Resource "${U.resourceTitle}" deleted successfully by admin`),s.invalidateQueries({queryKey:["resources"]}),s.invalidateQueries({queryKey:["platform-stats"]}),E({isOpen:!1,resource:null})},onError:U=>{ee.error(U.message||"Failed to delete resource"),E({isOpen:!1,resource:null})}}),W=U=>{E({isOpen:!0,resource:U})},se=()=>{b.resource&&$.mutate(b.resource.id)},le=Je({mutationFn:async({resourceId:U,message:te})=>{const{data:q,error:J}=await ue.functions.invoke("request-management",{body:{action:"create_request",requestData:{resource_id:U,message:te||""}}});if(J)throw J;return q},onSuccess:()=>{ee.success("Resource request sent successfully!"),s.invalidateQueries({queryKey:["resources"]})},onError:U=>{ee.error(U.message||"Failed to send request")}}),we=U=>{const te=prompt("Add a message for the resource owner (optional):")||"";le.mutate({resourceId:U,message:te})},_=async U=>{confirm("Are you sure you want to delete this resource? This action cannot be undone.")&&R.mutate(U)},Q=U=>{ee.success("Messaging functionality will be implemented")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Resources"}),i.jsx("p",{className:"text-slate-600",children:"Discover and share resources within the community"})]}),i.jsxs("button",{onClick:()=>l(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[i.jsx(Tu,{className:"h-5 w-5 mr-2"}),"Add Resource"]})]}),i.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(g1,{value:d,onChange:m,placeholder:"Search resources...",className:""}),i.jsxs("select",{value:p,onChange:U=>g(U.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"all",children:"All Categories"}),A.map(U=>i.jsx("option",{value:U,children:U},U))]}),i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:y,onChange:U=>v(U.target.checked),className:"rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"text-sm text-slate-700",children:"My Resources Only"})]}),i.jsx("div",{className:"flex items-center justify-end",children:i.jsxs("span",{className:"text-sm text-slate-600",children:[P.length," resource",P.length!==1?"s":""," found"]})})]})}),w?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((U,te)=>i.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 animate-pulse",children:[i.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-4"}),i.jsx("div",{className:"h-3 bg-slate-200 rounded w-full mb-2"}),i.jsx("div",{className:"h-3 bg-slate-200 rounded w-2/3 mb-4"}),i.jsxs("div",{className:"flex space-x-2 mb-4",children:[i.jsx("div",{className:"h-6 bg-slate-200 rounded-full w-16"}),i.jsx("div",{className:"h-6 bg-slate-200 rounded-full w-20"})]}),i.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]},te))}):P.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map(U=>i.jsx(L,{resource:U},U.id))}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx(ft,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No resources found"}),i.jsx("p",{className:"text-slate-600 mb-4",children:d||p!=="all"||y?"Try adjusting your filters or search terms":"Be the first to share a resource with the community!"}),i.jsxs("button",{onClick:()=>l(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center",children:[i.jsx(Tu,{className:"h-5 w-5 mr-2"}),"Add Resource"]})]}),(r||o)&&i.jsx(p1,{resource:o,onClose:()=>{l(!1),u(null)},onSuccess:()=>{s.invalidateQueries({queryKey:["resources"]}),l(!1),u(null)}}),b.isOpen&&b.resource&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full mx-4",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(fa,{className:"h-8 w-8 text-red-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Admin: Delete Resource"}),i.jsx("p",{className:"text-sm text-slate-600",children:"You are about to delete this resource as a super admin"})]})]}),i.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 mb-4",children:[i.jsx("h4",{className:"font-medium text-slate-900 mb-2",children:b.resource.title}),i.jsx("p",{className:"text-sm text-slate-600 mb-2",children:b.resource.description}),i.jsxs("div",{className:"flex items-center space-x-2 text-xs text-slate-500",children:[i.jsx("span",{className:"bg-slate-200 px-2 py-1 rounded",children:b.resource.category}),i.jsxs("span",{children:["Created ",M(b.resource.created_at)]})]})]}),i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx(yr,{className:"h-5 w-5 text-red-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-red-800 mb-1",children:"Admin Action Warning"}),i.jsx("p",{className:"text-sm text-red-700",children:"This action will permanently delete the resource and all associated data including:"}),i.jsxs("ul",{className:"text-xs text-red-600 mt-2 space-y-1 ml-4",children:[i.jsx("li",{children:"• Resource details and images"}),i.jsx("li",{children:"• All pending requests for this resource"}),i.jsx("li",{children:"• Related messages and conversations"}),i.jsx("li",{children:"• Platform statistics will be updated"})]})]})]})}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx("button",{onClick:()=>E({isOpen:!1,resource:null}),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",disabled:$.isPending,children:"Cancel"}),i.jsx("button",{onClick:se,disabled:$.isPending,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center space-x-2 disabled:opacity-50",children:$.isPending?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}):i.jsxs(i.Fragment,{children:[i.jsx(yr,{className:"h-4 w-4"}),i.jsx("span",{children:"Admin Delete"})]})})]})]})})]})}function oa({user:n,size:s="md",className:r="",showName:l=!1}){const o={xs:"w-6 h-6",sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12",xl:"w-16 h-16"},u={xs:"h-3 w-3",sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6",xl:"h-8 w-8"},d={xs:"text-xs",sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl"},m=p=>p?p.split(" ").map(g=>g.charAt(0).toUpperCase()).join("").substring(0,2):"?";return i.jsxs("div",{className:`flex items-center space-x-3 ${r}`,children:[i.jsx("div",{className:`${o[s]} rounded-full overflow-hidden border border-slate-200 bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center flex-shrink-0`,children:n!=null&&n.profile_image_url?i.jsx("img",{src:n.profile_image_url,alt:n.name||"User",className:"w-full h-full object-cover",onError:p=>{const g=p.currentTarget,y=g.parentElement;if(y){g.style.display="none";const v=document.createElement("span");v.className=`text-white font-medium ${d[s]}`,v.textContent=m(n==null?void 0:n.name),y.appendChild(v)}}}):n!=null&&n.name?i.jsx("span",{className:`text-white font-medium ${d[s]}`,children:m(n.name)}):i.jsx(hi,{className:`${u[s]} text-white`})}),l&&(n==null?void 0:n.name)&&i.jsx("span",{className:`text-slate-700 font-medium ${d[s]}`,children:n.name})]})}function v1(){const{user:n}=vt(),s=ms(),[r,l]=O.useState("sent"),[o,u]=O.useState("all"),[d,m]=O.useState(""),{data:p=[],isLoading:g}=ct({queryKey:["sent-requests",n==null?void 0:n.id,o,d],queryFn:async()=>{if(!n)return[];const{data:_,error:Q}=await ue.rpc("get_user_sent_requests",{user_id:n.id,status_filter:o==="all"?null:o});if(Q){console.log("RPC not available, falling back to manual query");let U=ue.from("requests").select("*").eq("requester_id",n.id).order("created_at",{ascending:!1});o==="all"?U=U.in("status",["pending","approved","completed"]):U=U.eq("status",o);const{data:te,error:q}=await U;if(q)throw q;if(!te||te.length===0)return[];const J=[...new Set(te.map(X=>X.resource_id))],{data:G,error:ne}=await ue.from("resources").select("id, title, description, category, images, user_id").in("id",J);if(ne)throw ne;let re=te.map(X=>{const k=G==null?void 0:G.find(z=>z.id===X.resource_id);return{...X,resource:k||null}});return d&&(re=re.filter(X=>{var k,z,he;return((z=(k=X.resource)==null?void 0:k.title)==null?void 0:z.toLowerCase().includes(d.toLowerCase()))||((he=X.message)==null?void 0:he.toLowerCase().includes(d.toLowerCase()))})),re}return _||[]},enabled:!!n&&r==="sent"}),{data:y=[],isLoading:v}=ct({queryKey:["received-requests",n==null?void 0:n.id,o,d],queryFn:async()=>{if(!n)return[];const{data:_,error:Q}=await ue.from("resources").select("id, title, description, category, images").eq("user_id",n.id);if(Q)throw Q;if(!_||_.length===0)return[];const U=_.map(k=>k.id);let te=ue.from("requests").select("*").in("resource_id",U).order("created_at",{ascending:!1});o==="all"?te=te.in("status",["pending","approved","completed"]):te=te.eq("status",o);const{data:q,error:J}=await te;if(J)throw J;if(!q||q.length===0)return[];const G=[...new Set(q.map(k=>k.requester_id))],{data:ne,error:H}=await ue.from("users").select("id, name, email, profile_image_url").in("id",G);if(H)throw H;let X=q.map(k=>{const z=_.find(me=>me.id===k.resource_id),he=ne==null?void 0:ne.find(me=>me.id===k.requester_id);return{...k,resource:z||null,requester:he||null}});return d&&(X=X.filter(k=>{var z,he,me,pe,_e;return((he=(z=k.resource)==null?void 0:z.title)==null?void 0:he.toLowerCase().includes(d.toLowerCase()))||((pe=(me=k.requester)==null?void 0:me.name)==null?void 0:pe.toLowerCase().includes(d.toLowerCase()))||((_e=k.message)==null?void 0:_e.toLowerCase().includes(d.toLowerCase()))})),X},enabled:!!n&&r==="received"}),b=Je({mutationFn:async({requestId:_,status:Q})=>{const{data:U,error:te}=await ue.functions.invoke("request-management",{body:{action:"update_request_status",requestId:_,status:Q}});if(te)throw te;return U},onSuccess:()=>{ee.success("Request status updated successfully"),s.invalidateQueries({queryKey:["received-requests"]}),s.invalidateQueries({queryKey:["sent-requests"]})},onError:_=>{ee.error(_.message||"Failed to update request status")}}),E=Je({mutationFn:async _=>{const{data:Q,error:U}=await ue.functions.invoke("request-management",{body:{action:"cancel_request",requestId:_}});if(U)throw U;return Q},onSuccess:()=>{ee.success("Request cancelled successfully"),s.invalidateQueries({queryKey:["sent-requests"]})},onError:_=>{ee.error(_.message||"Failed to cancel request")}}),N=Je({mutationFn:async _=>{const{data:Q,error:U}=await ue.functions.invoke("request-management",{body:{action:"delete_request",requestId:_}});if(U)throw U;return Q},onSuccess:()=>{ee.success("Request deleted successfully"),s.invalidateQueries({queryKey:["sent-requests"]}),s.invalidateQueries({queryKey:["received-requests"]})},onError:_=>{ee.error(_.message||"Failed to delete request")}}),P=Je({mutationFn:async()=>{const{data:_,error:Q}=await ue.functions.invoke("request-management",{body:{action:"clear_past_requests"}});if(Q)throw Q;return _},onSuccess:()=>{ee.success("Past requests cleared successfully"),s.invalidateQueries({queryKey:["received-requests"]})},onError:_=>{ee.error(_.message||"Failed to clear past requests")}}),w=_=>new Date(_).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),A=_=>{switch(_){case"pending":return"text-yellow-700 bg-yellow-100";case"approved":return"text-green-700 bg-green-100";case"rejected":return"text-red-700 bg-red-100";case"completed":return"text-blue-700 bg-blue-100";default:return"text-slate-700 bg-slate-100"}},M=_=>{switch(_){case"pending":return i.jsx(Wm,{className:"h-4 w-4"});case"approved":return i.jsx(ra,{className:"h-4 w-4"});case"rejected":return i.jsx(As,{className:"h-4 w-4"});case"completed":return i.jsx(ra,{className:"h-4 w-4"});default:return i.jsx(Wm,{className:"h-4 w-4"})}},L=(_,Q)=>{b.mutate({requestId:_,status:Q})},R=_=>{window.confirm("Are you sure you want to cancel this pending request?")&&E.mutate(_)},$=_=>{window.confirm("Are you sure you want to delete this request? This action cannot be undone.")&&N.mutate(_)},W=()=>{window.confirm("Are you sure you want to clear all completed and rejected requests? This action cannot be undone.")&&P.mutate()},se=({request:_,type:Q})=>{var H,re,X,k;const U=Q==="sent"&&_.status==="pending",te=Q==="sent",q=Q==="received"&&_.status==="pending",J=Q==="received"&&_.status==="approved",G=()=>{const z=[];return U&&z.push(i.jsx("button",{onClick:()=>R(_.id),disabled:E.isPending,className:"px-3 py-1 bg-yellow-600 text-white text-sm rounded-lg hover:bg-yellow-700 transition-colors disabled:opacity-50",children:E.isPending?"...":"Cancel"},"cancel")),te&&z.push(i.jsxs("button",{onClick:()=>$(_.id),disabled:N.isPending,className:"px-3 py-1 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center",children:[i.jsx(li,{className:"h-3 w-3 mr-1"}),N.isPending?"...":"Delete"]},"delete")),z},ne=()=>{const z=[];return q&&(z.push(i.jsxs("button",{onClick:()=>L(_.id,"approved"),disabled:b.isPending,className:"px-3 py-1 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center",children:[i.jsx(ra,{className:"h-4 w-4 mr-1"}),b.isPending?"...":"Approve"]},"approve")),z.push(i.jsxs("button",{onClick:()=>L(_.id,"rejected"),disabled:b.isPending,className:"px-3 py-1 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center",children:[i.jsx(As,{className:"h-4 w-4 mr-1"}),b.isPending?"...":"Reject"]},"reject"))),J&&z.push(i.jsxs("button",{onClick:()=>L(_.id,"completed"),disabled:b.isPending,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center",children:[i.jsx(ra,{className:"h-4 w-4 mr-1"}),b.isPending?"...":"Complete"]},"complete")),z};return i.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-start space-x-4 mb-4",children:[i.jsx("div",{className:"flex-shrink-0",children:(H=_.resource)!=null&&H.images&&_.resource.images.length>0?i.jsxs(i.Fragment,{children:[i.jsx("img",{src:_.resource.images[0],alt:_.resource.title||"Resource",className:"w-20 h-20 object-cover rounded-xl border border-slate-200",onError:z=>{z.currentTarget.style.display="none";const he=z.currentTarget.nextElementSibling;he&&(he.style.display="flex")}}),i.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-xl border border-slate-200 items-center justify-center hidden",children:i.jsx(ft,{className:"h-8 w-8 text-slate-400"})})]}):i.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-xl border border-slate-200 flex items-center justify-center",children:i.jsx(ft,{className:"h-8 w-8 text-slate-400"})})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:((re=_.resource)==null?void 0:re.title)||"Resource"}),((X=_.resource)==null?void 0:X.category)&&i.jsx("span",{className:"inline-flex px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full",children:_.resource.category})]}),i.jsx("p",{className:"text-slate-600 text-sm mb-3",children:((k=_.resource)==null?void 0:k.description)||"No description available"})]})]}),_.message&&i.jsx("div",{className:"bg-slate-50 p-3 rounded-lg mb-3",children:i.jsxs("p",{className:"text-sm text-slate-700",children:[i.jsx("strong",{children:"Message:"})," ",_.message]})}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-slate-500",children:[Q==="received"&&_.requester&&i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(oa,{user:_.requester,size:"xs"}),i.jsx("span",{children:_.requester.name})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ju,{className:"h-4 w-4 mr-1"}),w(_.created_at)]})]})]}),i.jsxs("div",{className:"flex flex-col space-y-2 ml-4",children:[i.jsxs("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${A(_.status)}`,children:[M(_.status),i.jsx("span",{className:"ml-1 capitalize",children:_.status})]}),i.jsxs("div",{className:"flex flex-col space-y-2",children:[Q==="sent"&&G(),Q==="received"&&ne(),i.jsx("button",{onClick:()=>console.log("Message user"),className:"p-2 text-slate-600 hover:bg-slate-50 rounded-lg transition-colors self-center",title:"Send message",children:i.jsx(kt,{className:"h-4 w-4"})})]})]})]})})},le=r==="sent"?p:y,we=r==="sent"?g:v;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Requests"}),i.jsx("p",{className:"text-slate-600",children:"Manage your resource requests and incoming requests"})]}),r==="received"&&i.jsxs("button",{onClick:W,disabled:P.isPending,className:"px-4 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",title:"Clear all completed and rejected requests",children:[P.isPending?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}):i.jsx(li,{className:"h-4 w-4"}),i.jsx("span",{children:P.isPending?"Clearing...":"Clear Past Requests"})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl p-1 shadow-sm border border-slate-200 inline-flex",children:[i.jsx("button",{onClick:()=>l("sent"),className:`px-6 py-2 rounded-xl text-sm font-medium transition-colors ${r==="sent"?"bg-blue-600 text-white":"text-slate-600 hover:text-slate-900"}`,children:"Sent Requests"}),i.jsx("button",{onClick:()=>l("received"),className:`px-6 py-2 rounded-xl text-sm font-medium transition-colors ${r==="received"?"bg-blue-600 text-white":"text-slate-600 hover:text-slate-900"}`,children:"Received Requests"})]}),i.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(ai,{className:"absolute left-3 top-3 h-5 w-5 text-slate-400"}),i.jsx("input",{type:"text",placeholder:"Search requests...",value:d,onChange:_=>m(_.target.value),className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),i.jsxs("select",{value:o,onChange:_=>u(_.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"all",children:"Active Requests"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"approved",children:"Approved"}),i.jsx("option",{value:"rejected",children:"Rejected"}),i.jsx("option",{value:"completed",children:"Completed"})]}),i.jsx("div",{className:"flex items-center justify-end",children:i.jsxs("span",{className:"text-sm text-slate-600",children:[le.length," request",le.length!==1?"s":""," found"]})})]})}),we?i.jsx("div",{className:"space-y-4",children:[...Array(3)].map((_,Q)=>i.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 animate-pulse",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"h-5 bg-slate-200 rounded w-1/2 mb-3"}),i.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/2 mb-4"}),i.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/3"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"h-8 bg-slate-200 rounded w-20"}),i.jsx("div",{className:"h-8 bg-slate-200 rounded w-16"})]})]})},Q))}):le.length>0?i.jsx("div",{className:"space-y-4",children:le.map(_=>i.jsx(se,{request:_,type:r},_.id))}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx(ii,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),i.jsxs("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:["No ",r," requests found"]}),i.jsx("p",{className:"text-slate-600",children:r==="sent"?"You haven't made any requests yet. Browse resources to get started!":"No one has requested your resources yet. Share more resources to receive requests!"})]})]})}function y1(){const{user:n,session:s}=vt(),r=ms(),[l,o]=O.useState(null),[u,d]=O.useState(""),[m,p]=O.useState(""),[g,y]=O.useState(!1),[v,b]=O.useState(!1),[E,N]=O.useState(!1),[P,w]=O.useState(""),A=O.useRef(null),M=O.useRef(null),L=O.useRef(),R=()=>{var B;(B=A.current)==null||B.scrollIntoView({behavior:"smooth"})},$=async(B,be={})=>{if(!(s!=null&&s.access_token))throw console.error("[API Call] No authentication session available"),new Error("No authentication session");console.log(`[API Call] Making call to modern-messaging with action: ${B}`,be);const Te=await ue.functions.invoke("modern-messaging",{body:{action:B,...be}});if(console.log(`[API Call] Response for ${B}:`,{data:Te.data,error:Te.error}),Te.error)throw console.error(`[API Call] Error in ${B}:`,Te.error),Te.error;return Te.data&&Te.data.success&&Te.data.data!==void 0?(console.log(`[API Call] Extracted data for ${B}:`,Te.data.data),Te.data.data):(console.warn(`[API Call] Unexpected response structure for ${B}, returning raw data`),Te.data)},{data:W=[],isLoading:se,refetch:le}=ct({queryKey:["modern-conversations",n==null?void 0:n.id],queryFn:()=>$("get_conversations"),enabled:!!n&&!!s,refetchInterval:3e4}),{data:we=[],isLoading:_,refetch:Q}=ct({queryKey:["modern-conversation-messages",l],queryFn:()=>$("get_conversation_messages",{conversationId:l}),enabled:!!l&&!!n&&!!s,refetchInterval:5e3}),{data:U=[],isLoading:te}=ct({queryKey:["search-users",P],queryFn:async()=>{if(P.length<2)return[];const{data:B,error:be}=await ue.from("users").select("id, name, email, profile_image_url").neq("id",n.id).or(`name.ilike.%${P}%,email.ilike.%${P}%`).limit(10);if(be)throw be;return B||[]},enabled:g&&P.length>=2}),q=O.useMemo(()=>!W||!Array.isArray(W)?[]:W.map(B=>{var be;return(be=B==null?void 0:B.partner)==null?void 0:be.id}).filter(Boolean),[W]),{data:J=[]}=ct({queryKey:["user-presence",q],queryFn:()=>q.length>0?$("get_user_presence",{userIds:q}):[],enabled:q.length>0,refetchInterval:15e3}),G=Je({mutationFn:async({receiverId:B,content:be})=>$("send_message",{receiverId:B,content:be.trim(),messageType:"text"}),onSuccess:()=>{d(""),Q(),le(),R(),ee.success("Message sent!")},onError:B=>{console.error("Send message error:",B),ee.error(B.message||"Failed to send message")}}),ne=Je({mutationFn:B=>$("mark_messages_read",{conversationId:B}),onSuccess:()=>{le()}}),H=Je({mutationFn:B=>$("delete_conversation",{conversationId:B}),onSuccess:()=>{o(null),r.invalidateQueries({queryKey:["modern-conversations",n==null?void 0:n.id]}),le(),ee.success("Conversation deleted")},onError:B=>{console.error("Delete conversation error:",B),ee.error(B.message||"Failed to delete conversation")}}),re=Je({mutationFn:B=>$("clear_chat",{conversationId:B}),onSuccess:()=>{r.invalidateQueries({queryKey:["modern-conversation-messages",l]}),r.invalidateQueries({queryKey:["modern-conversations",n==null?void 0:n.id]}),Q(),le(),ee.success("Chat cleared - all messages removed")},onError:B=>{console.error("Clear chat error:",B),ee.error(B.message||"Failed to clear chat")}}),X=Je({mutationFn:()=>$("update_user_presence")}),k=B=>{B.preventDefault(),!(!u.trim()||!(pe!=null&&pe.partner.id)||G.isPending)&&G.mutate({receiverId:pe.partner.id,content:u})},z=()=>{E||N(!0),L.current&&clearTimeout(L.current),L.current=setTimeout(()=>{N(!1)},1e3)},he=async B=>{if(!B){ee.error("Invalid user selection");return}if(!(s!=null&&s.access_token)){ee.error("Please log in again");return}try{y(!1),w("");const be=ee.loading("Starting conversation...");if(!await $("send_message",{receiverId:B,content:"Started conversation",messageType:"system"}))throw new Error("No response from API");await le(),setTimeout(async()=>{const ze=r.getQueryData(["modern-conversations",n==null?void 0:n.id]);if(ze&&Array.isArray(ze)){const ps=ze.find(ns=>{var Is;return((Is=ns==null?void 0:ns.partner)==null?void 0:Is.id)===B});ps?(o(ps.id),ee.success("Conversation started!",{id:be})):setTimeout(async()=>{await le();const ns=r.getQueryData(["modern-conversations",n==null?void 0:n.id]),Is=ns==null?void 0:ns.find(Nr=>{var fi;return((fi=Nr==null?void 0:Nr.partner)==null?void 0:fi.id)===B});Is?(o(Is.id),ee.success("Conversation started!",{id:be})):ee.success("Message sent! The conversation will appear shortly.",{id:be})},2e3)}else ee.success("Message sent! Please refresh if needed.",{id:be})},1e3)}catch(be){ee.error(`Failed to start conversation: ${(be==null?void 0:be.message)||"Unknown error"}`)}};O.useEffect(()=>{if(n&&s){X.mutate();const B=setInterval(()=>{X.mutate()},5*60*1e3);return()=>clearInterval(B)}},[n,s]),O.useEffect(()=>{l&&ne.mutate(l)},[l]),O.useEffect(()=>{R()},[we]),O.useEffect(()=>{if(!n||!W||!Array.isArray(W)||W.length===0)return;const B=W.map(Te=>Te==null?void 0:Te.id).filter(Boolean);if(B.length===0)return;const be=ue.channel("messages_channel").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`conversation_id=in.(${B.join(",")})`},Te=>{console.log("New message received:",Te.new),le(),l===Te.new.conversation_id&&Q()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`conversation_id=in.(${B.join(",")})`},Te=>{console.log("Message updated:",Te.new),le(),l===Te.new.conversation_id&&Q()}).subscribe();return()=>{be.unsubscribe()}},[n,W,l]);const me=O.useMemo(()=>!W||!Array.isArray(W)?[]:W.filter(B=>{var be,Te,ze,ps;return((Te=(be=B==null?void 0:B.partner)==null?void 0:be.name)==null?void 0:Te.toLowerCase().includes(m.toLowerCase()))||((ps=(ze=B==null?void 0:B.lastMessage)==null?void 0:ze.content)==null?void 0:ps.toLowerCase().includes(m.toLowerCase()))}),[W,m]),pe=O.useMemo(()=>!W||!Array.isArray(W)||!l?null:W.find(B=>(B==null?void 0:B.id)===l)||null,[W,l]),_e=B=>!J||!Array.isArray(J)||!B?null:J.find(be=>(be==null?void 0:be.user_id)===B)||null,Pe=B=>{const be=new Date(B),ze=Math.floor((new Date().getTime()-be.getTime())/(1e3*60));return ze<1?"Just now":ze<60?`${ze}m ago`:ze<1440?`${Math.floor(ze/60)}h ago`:be.toLocaleDateString()},Se=B=>{const be=new Date(B),ze=Math.floor((new Date().getTime()-be.getTime())/(1e3*60*60*24));return ze===0?be.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):ze===1?"Yesterday":ze<7?be.toLocaleDateString("en-US",{weekday:"short"}):be.toLocaleDateString("en-US",{month:"short",day:"numeric"})},Ie=B=>B.sender_id!==(n==null?void 0:n.id)?null:B.read_at?i.jsx(Bm,{className:"h-3 w-3 text-blue-500"}):B.delivered_at?i.jsx(Bm,{className:"h-3 w-3 text-gray-400"}):i.jsx(ra,{className:"h-3 w-3 text-gray-400"});return n?i.jsxs("div",{className:"h-[calc(100vh-12rem)] bg-white rounded-2xl shadow-sm border border-gray-200 flex overflow-hidden",children:[i.jsxs("div",{className:`w-full md:w-80 border-r border-gray-200 flex flex-col bg-gray-50 ${l?"hidden md:flex":"flex"}`,children:[i.jsxs("div",{className:"p-4 bg-white border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Messages"}),i.jsx("button",{onClick:()=>y(!0),className:"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors",title:"New conversation",children:i.jsx(Tu,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"relative",children:[i.jsx(ai,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Search conversations...",value:m,onChange:B=>p(B.target.value),className:"w-full pl-9 pr-3 py-2 bg-gray-100 border-0 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:se?i.jsxs("div",{className:"flex items-center justify-center p-8",children:[i.jsx(na,{className:"h-6 w-6 animate-spin text-blue-600"}),i.jsx("span",{className:"ml-2 text-gray-600",children:"Loading conversations..."})]}):me.length>0?i.jsx("div",{className:"divide-y divide-gray-100",children:me.map(B=>{var Te,ze;const be=_e(B.partner.id);return be!=null&&be.is_online,i.jsx("button",{onClick:()=>o(B.id),className:`w-full p-4 text-left hover:bg-white transition-colors relative ${l===B.id?"bg-blue-50 border-r-2 border-blue-600":"bg-transparent"}`,children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"relative",children:i.jsx(oa,{user:B.partner,size:"md"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:B.partner.name}),i.jsx("span",{className:"text-xs text-gray-500",children:Se(B.lastMessageAt)})]}),i.jsxs("div",{className:"flex items-center justify-between mt-1",children:[i.jsxs("p",{className:"text-sm text-gray-600 truncate",children:[((Te=B.lastMessage)==null?void 0:Te.sender_id)===n.id?"You: ":"",((ze=B.lastMessage)==null?void 0:ze.content)||"No messages yet"]}),B.unreadCount>0&&i.jsx("span",{className:"inline-flex items-center justify-center h-5 w-5 text-xs font-medium text-white bg-blue-600 rounded-full",children:B.unreadCount>9?"9+":B.unreadCount})]})]})]})},B.id)})}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[i.jsx(kt,{className:"h-12 w-12 text-gray-300 mb-3"}),i.jsx("p",{className:"text-gray-500 mb-2",children:m?"No conversations found":"No messages yet"}),i.jsx("p",{className:"text-sm text-gray-400",children:m?"Try a different search term":"Start a conversation by messaging someone"})]})})]}),i.jsx("div",{className:`flex-1 flex flex-col bg-white ${l?"flex":"hidden md:flex"}`,children:pe?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between bg-white",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("button",{onClick:()=>o(null),className:"md:hidden p-1 text-gray-400 hover:text-gray-600 rounded-lg",children:i.jsx(ob,{className:"h-5 w-5"})}),i.jsx("div",{className:"relative",children:i.jsx(oa,{user:pe.partner,size:"md"})}),i.jsx("div",{children:i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:pe.partner.name})})]}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:()=>b(!v),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg transition-colors",children:i.jsx(hb,{className:"h-5 w-5"})}),v&&i.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg py-1 z-10 min-w-48",children:[i.jsxs("button",{onClick:()=>{b(!1),confirm("Are you sure you want to clear all messages? This action cannot be undone.")&&re.mutate(pe.id)},disabled:re.isPending,className:"w-full px-4 py-2 text-left text-sm text-orange-600 hover:bg-orange-50 flex items-center space-x-2",children:[i.jsx(wb,{className:"h-4 w-4"}),i.jsx("span",{children:"Clear Chat"})]}),i.jsxs("button",{onClick:()=>{b(!1),confirm("Are you sure you want to delete this conversation? This will remove it completely and cannot be undone.")&&H.mutate(pe.id)},disabled:H.isPending,className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[i.jsx(li,{className:"h-4 w-4"}),i.jsx("span",{children:"Delete Conversation"})]})]})]})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[_?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(na,{className:"h-6 w-6 animate-spin text-blue-600"})}):we&&we.filter(B=>B.message_type!=="system").length>0?we.filter(B=>B.message_type!=="system").map(B=>{const be=B.sender_id===n.id;return i.jsx("div",{className:`flex ${be?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-2xl ${be?"bg-blue-600 text-white rounded-br-md":"bg-white border border-gray-200 text-gray-900 rounded-bl-md"}`,children:[i.jsx("p",{className:"text-sm leading-relaxed",children:B.content}),i.jsxs("div",{className:`flex items-center justify-between mt-1 space-x-2 ${be?"text-blue-100":"text-gray-500"}`,children:[i.jsx("span",{className:"text-xs",children:Pe(B.created_at)}),be&&i.jsx("div",{className:"flex-shrink-0",children:Ie(B)})]})]})},B.id)}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[i.jsx(kt,{className:"h-12 w-12 text-gray-300 mb-3"}),i.jsx("p",{className:"text-gray-500",children:"No messages yet"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Start the conversation!"})]}),i.jsx("div",{ref:A})]}),i.jsxs("div",{className:"p-4 bg-white border-t border-gray-200",children:[i.jsxs("form",{onSubmit:k,className:"flex items-end space-x-2",children:[i.jsx("div",{className:"flex-1 relative",children:i.jsx("input",{ref:M,type:"text",value:u,onChange:B=>{d(B.target.value),z()},placeholder:"Type a message...",maxLength:2e3,disabled:G.isPending,className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"})}),i.jsx("button",{type:"submit",disabled:!u.trim()||G.isPending,className:"p-3 bg-blue-600 text-white rounded-full hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:G.isPending?i.jsx(na,{className:"h-5 w-5 animate-spin"}):i.jsx(tg,{className:"h-5 w-5"})})]}),i.jsx("div",{className:"mt-2 text-right",children:i.jsxs("span",{className:`text-xs ${u.length>1800?"text-red-500":u.length>1500?"text-yellow-600":"text-gray-400"}`,children:[u.length,"/2000"]})})]})]}):i.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx(kt,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a conversation"}),i.jsx("p",{className:"text-gray-600",children:"Choose a conversation from the sidebar to start messaging"})]})})}),g&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full mx-4 max-h-96 flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"New Conversation"}),i.jsx("button",{onClick:()=>{y(!1),w("")},className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg",children:i.jsx(As,{className:"h-5 w-5"})})]}),i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"relative",children:[i.jsx(ai,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Search users by name or email...",value:P,onChange:B=>w(B.target.value),className:"w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:P.length<2?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(gr,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),i.jsx("p",{className:"text-gray-500",children:"Type at least 2 characters to search users"})]}):te?i.jsxs("div",{className:"flex items-center justify-center py-8",children:[i.jsx(na,{className:"h-6 w-6 animate-spin text-blue-600"}),i.jsx("span",{className:"ml-2 text-gray-600",children:"Searching..."})]}):U&&U.length>0?i.jsx("div",{className:"space-y-2",children:U.map(B=>i.jsxs("button",{onClick:()=>he(B.id),className:"w-full p-3 text-left hover:bg-gray-50 rounded-lg transition-colors flex items-center space-x-3 focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer",type:"button",children:[i.jsx(oa,{user:B,size:"sm"}),i.jsxs("div",{className:"pointer-events-none",children:[i.jsx("p",{className:"font-medium text-gray-900",children:B.name}),i.jsx("p",{className:"text-sm text-gray-600",children:B.email})]})]},B.id))}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(db,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),i.jsx("p",{className:"text-gray-500",children:"No users found"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Try a different search term"})]})})]})})]}):i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsxs("div",{className:"text-center",children:[i.jsx(kt,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"Please log in to access messages"})]})})}function ug(){const{user:n,updateProfile:s}=vt(),r=ms(),l=Je({mutationFn:async o=>{if(!n)throw new Error("User not logged in");if(!o.type.startsWith("image/"))throw new Error("Please select an image file");if(o.size>2*1024*1024)throw new Error("Image size must be less than 2MB");return new Promise((u,d)=>{const m=new FileReader;m.onloadend=async()=>{try{const p=m.result,{data:g,error:y}=await ue.functions.invoke("profile-image-upload",{body:{imageData:p,fileName:o.name}});if(y)throw new Error(`Upload service error: ${y.message||"Unknown error"}`);if(!g||!g.data||!g.data.publicUrl)throw new Error("Invalid response from upload service");await s({profile_image_url:g.data.publicUrl}),u(g.data.publicUrl)}catch(p){d(new Error(`Upload failed: ${p.message||"Unknown error"}`))}},m.onerror=()=>{d(new Error("Failed to read file"))},m.readAsDataURL(o)})},onSuccess:()=>{r.invalidateQueries({queryKey:["user-profile"]}),r.invalidateQueries({queryKey:["user-stats"]})},retry:1,retryDelay:o=>Math.min(1e3*2**o,3e3)});return{uploadProfileImage:l.mutateAsync,isUploading:l.isPending,uploadError:l.error}}function w1({currentImageUrl:n,onImageUploaded:s,size:r="medium",className:l="",showUploadButton:o=!0}){const[u,d]=O.useState(null),m=O.useRef(null),{uploadProfileImage:p,isUploading:g}=ug(),y={small:"w-12 h-12",medium:"w-20 h-20",large:"w-32 h-32"},v={small:"h-6 w-6",medium:"h-8 w-8",large:"h-12 w-12"},b=async w=>{var L;const A=(L=w.target.files)==null?void 0:L[0];if(!A)return;if(!A.type.startsWith("image/")){ee.error("Please select an image file");return}if(A.size>2*1024*1024){ee.error("Image size must be less than 2MB");return}const M=new FileReader;M.onload=R=>{var $;d(($=R.target)==null?void 0:$.result)},M.readAsDataURL(A);try{const R=await p(A);s(R),d(null)}catch(R){console.error("Profile image upload error:",R),ee.error(R.message||"Failed to upload profile image"),d(null)}},E=()=>{var w;(w=m.current)==null||w.click()},N=()=>{d(null),m.current&&(m.current.value="")},P=u||n;return i.jsxs("div",{className:`relative ${l}`,children:[i.jsxs("div",{className:`${y[r]} rounded-full overflow-hidden border-2 border-slate-200 bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center relative group`,children:[P?i.jsx("img",{src:P,alt:"Profile",className:"w-full h-full object-cover",onError:w=>{console.error("Profile image failed to load:",P),w.currentTarget.style.display="none"}}):i.jsx(hi,{className:`${v[r]} text-white`}),g&&i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:i.jsx(na,{className:"h-6 w-6 text-white animate-spin"})}),o&&!g&&i.jsx("div",{onClick:E,className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 flex items-center justify-center cursor-pointer transition-all duration-200",children:i.jsx(ub,{className:"h-6 w-6 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200"})})]}),u&&!g&&i.jsx("button",{onClick:N,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:i.jsx(As,{className:"h-3 w-3"})}),o&&r==="large"&&!g&&i.jsxs("button",{onClick:E,className:"mt-3 w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center",children:[i.jsx(rg,{className:"h-4 w-4 mr-2"}),"Upload Photo"]}),i.jsx("input",{ref:m,type:"file",accept:"image/*",onChange:b,className:"hidden"})]})}function b1(){var w,A,M,L,R;const{user:n,updateProfile:s}=vt();ms(),ug();const[r,l]=O.useState(!1),[o,u]=O.useState({name:(n==null?void 0:n.name)||"",email:(n==null?void 0:n.email)||"",bio:((w=n==null?void 0:n.profile_info)==null?void 0:w.bio)||"",location:((A=n==null?void 0:n.profile_info)==null?void 0:A.location)||""}),d=async $=>{ee.success("Profile image updated successfully")},{data:m,isLoading:p}=ct({queryKey:["user-stats",n==null?void 0:n.id],queryFn:async()=>{if(!n)return null;const[$,W,se,le]=await Promise.all([ue.from("resources").select("*",{count:"exact",head:!0}).eq("user_id",n.id),ue.from("requests").select("*",{count:"exact",head:!0}).eq("requester_id",n.id),ue.from("messages").select("*",{count:"exact",head:!0}).eq("sender_id",n.id),ue.from("reviews").select("*",{count:"exact",head:!0}).eq("reviewer_id",n.id)]);return{resourcesCount:$.count||0,requestsCount:W.count||0,messagesSent:se.count||0,reviewsGiven:le.count||0}},enabled:!!n}),{data:g=[],isLoading:y}=ct({queryKey:["user-activity",n==null?void 0:n.id],queryFn:async()=>{var we,_,Q;if(!n)return[];const[$,W,se]=await Promise.all([ue.from("resources").select("id, title, created_at").eq("user_id",n.id).order("created_at",{ascending:!1}).limit(5),ue.from("requests").select("id, created_at, resources:resource_id(title)").eq("requester_id",n.id).order("created_at",{ascending:!1}).limit(5),ue.from("reviews").select("id, rating, created_at, resources:exchange_id(title)").eq("reviewer_id",n.id).order("created_at",{ascending:!1}).limit(5)]),le=[];return(we=$.data)==null||we.forEach(U=>{le.push({id:U.id,type:"resource_shared",title:`Shared resource: ${U.title}`,date:U.created_at,icon:ft})}),(_=W.data)==null||_.forEach(U=>{var te;le.push({id:U.id,type:"request_made",title:`Requested: ${((te=U.resources)==null?void 0:te.title)||"Resource"}`,date:U.created_at,icon:ii})}),(Q=se.data)==null||Q.forEach(U=>{le.push({id:U.id,type:"review_given",title:`Reviewed exchange (${U.rating} stars)`,date:U.created_at,icon:Au})}),le.sort((U,te)=>new Date(te.date).getTime()-new Date(U.date).getTime()).slice(0,10)},enabled:!!n}),v=Je({mutationFn:async $=>{if(!n)throw new Error("No user found");const{error:W}=await ue.from("users").update({name:$.name,profile_info:{...n.profile_info,bio:$.bio,location:$.location},updated_at:new Date().toISOString()}).eq("id",n.id);if(W)throw W;return $},onSuccess:$=>{s({name:$.name,profile_info:{...n==null?void 0:n.profile_info,bio:$.bio,location:$.location}}),ee.success("Profile updated successfully"),l(!1)},onError:$=>{ee.error($.message||"Failed to update profile")}}),b=$=>{if($.preventDefault(),!o.name.trim()){ee.error("Name is required");return}v.mutate(o)},E=$=>new Date($).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),N=$=>{const W=new Date($),le=Math.floor((new Date().getTime()-W.getTime())/(1e3*60*60*24));return le===0?"Today":le===1?"Yesterday":le<7?`${le} days ago`:W.toLocaleDateString("en-US",{month:"short",day:"numeric"})},P=$=>{switch($){case"SUPER_ADMIN":return"bg-purple-100 text-purple-700";case"ADMIN":return"bg-red-100 text-red-700";case"CONTRIBUTOR":return"bg-blue-100 text-blue-700";case"REQUESTER":return"bg-slate-100 text-slate-700";default:return"bg-slate-100 text-slate-700"}};return i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-slate-200",children:i.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-6",children:[i.jsx(w1,{currentImageUrl:n==null?void 0:n.profile_image_url,onImageUploaded:d,size:"large",className:"flex-shrink-0"}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:n==null?void 0:n.name}),i.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium ${P((n==null?void 0:n.role)||"")}`,children:(M=n==null?void 0:n.role)==null?void 0:M.replace("_"," ")})]}),i.jsxs("div",{className:"flex items-center space-x-4 text-slate-600",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Yp,{className:"h-4 w-4 mr-2"}),n==null?void 0:n.email]}),((L=n==null?void 0:n.profile_info)==null?void 0:L.location)&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(Xp,{className:"h-4 w-4 mr-2"}),n.profile_info.location]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ju,{className:"h-4 w-4 mr-2"}),"Joined ",E((n==null?void 0:n.created_at)||"")]})]}),((R=n==null?void 0:n.profile_info)==null?void 0:R.bio)&&i.jsx("p",{className:"text-slate-600 mt-3 max-w-2xl",children:n.profile_info.bio})]})]}),i.jsxs("button",{onClick:()=>l(!0),className:"mt-4 md:mt-0 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[i.jsx(sg,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[i.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Resources Shared"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:p?"...":(m==null?void 0:m.resourcesCount)||0})]}),i.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:i.jsx(ft,{className:"h-6 w-6 text-blue-600"})})]})}),i.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Requests Made"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:p?"...":(m==null?void 0:m.requestsCount)||0})]}),i.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:i.jsx(ii,{className:"h-6 w-6 text-green-600"})})]})}),i.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Messages Sent"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:p?"...":(m==null?void 0:m.messagesSent)||0})]}),i.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:i.jsx(kt,{className:"h-6 w-6 text-purple-600"})})]})}),i.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Reviews Given"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:p?"...":(m==null?void 0:m.reviewsGiven)||0})]}),i.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:i.jsx(Au,{className:"h-6 w-6 text-orange-600"})})]})})]}),i.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-6",children:"Recent Activity"}),y?i.jsx("div",{className:"space-y-4",children:[...Array(5)].map(($,W)=>i.jsxs("div",{className:"animate-pulse flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-slate-200 rounded-lg"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]})]},W))}):g.length>0?i.jsx("div",{className:"space-y-4",children:g.map($=>{const W=$.icon;return i.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-slate-50 rounded-lg",children:[i.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:i.jsx(W,{className:"h-5 w-5 text-blue-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-slate-900",children:$.title}),i.jsx("p",{className:"text-xs text-slate-500",children:N($.date)})]})]},`${$.type}-${$.id}`)})}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(nr,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-500",children:"No recent activity"}),i.jsx("p",{className:"text-sm text-slate-400",children:"Start sharing resources or making requests to see activity here"})]})]}),r&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[i.jsx("div",{className:"fixed inset-0 bg-slate-500 bg-opacity-75 transition-opacity",onClick:()=>l(!1)}),i.jsxs("div",{className:"relative bg-white rounded-2xl max-w-md w-full p-6 shadow-xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Edit Profile"}),i.jsx("button",{onClick:()=>l(!1),className:"text-slate-400 hover:text-slate-600",children:i.jsx(As,{className:"h-6 w-6"})})]}),i.jsxs("form",{onSubmit:b,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Name *"}),i.jsx("input",{type:"text",required:!0,value:o.name,onChange:$=>u({...o,name:$.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your full name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),i.jsx("input",{type:"email",value:o.email,disabled:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-500 cursor-not-allowed"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Email cannot be changed"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Bio"}),i.jsx("textarea",{rows:3,value:o.bio,onChange:$=>u({...o,bio:$.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Tell others about yourself"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Location"}),i.jsx("input",{type:"text",value:o.location,onChange:$=>u({...o,location:$.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your location"})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>l(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:v.isPending,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center justify-center",children:v.isPending?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):i.jsxs(i.Fragment,{children:[i.jsx(jb,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})]})]})})]})}function j1(){const{user:n}=vt(),s=ms(),[r,l]=O.useState("overview"),[o,u]=O.useState(""),[d,m]=O.useState("all");if(!n||!["SUPER_ADMIN","ADMIN","super_admin","admin"].includes(n.role))return i.jsxs("div",{className:"text-center py-12",children:[i.jsx(yr,{className:"h-16 w-16 text-red-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"Access Denied"}),i.jsx("p",{className:"text-slate-600",children:"You don't have permission to access the admin dashboard."})]});const{data:p,isLoading:g,error:y,refetch:v}=ct({queryKey:["admin-system-stats"],queryFn:async()=>{console.log("[Admin Dashboard] Fetching system stats...");const{data:{session:_}}=await ue.auth.getSession();if(!_)throw new Error("Not authenticated");const{data:Q,error:U}=await ue.functions.invoke("admin-management",{body:{action:"get_system_stats"},headers:{Authorization:`Bearer ${_.access_token}`}});if(console.log("[Admin Dashboard] Stats response:",{data:Q,error:U}),U)throw console.error("[Admin Dashboard] Stats error:",U),new Error(U.message||"Failed to fetch system stats");return Q.data},enabled:!!n&&["SUPER_ADMIN","ADMIN","super_admin","admin"].includes(n.role),refetchInterval:3e4,staleTime:1e4,retry:(_,Q)=>(console.log("[Admin Dashboard] Stats query retry:",_,Q.message),_<3)}),{data:b=[],isLoading:E,error:N}=ct({queryKey:["admin-all-users",o,d],queryFn:async()=>{console.log("[Admin Dashboard] Fetching all users...");const{data:{session:_}}=await ue.auth.getSession();if(!_)throw new Error("Not authenticated");const{data:Q,error:U}=await ue.functions.invoke("admin-management",{body:{action:"get_all_users"},headers:{Authorization:`Bearer ${_.access_token}`}});if(console.log("[Admin Dashboard] Users response:",{data:Q,error:U}),U)throw console.error("[Admin Dashboard] Users error:",U),U;let te=Q.data||[];return o&&(te=te.filter(q=>{var J,G;return((J=q.name)==null?void 0:J.toLowerCase().includes(o.toLowerCase()))||((G=q.email)==null?void 0:G.toLowerCase().includes(o.toLowerCase()))})),d!=="all"&&(te=te.filter(q=>{var J;return((J=q.role)==null?void 0:J.toLowerCase())===d.toLowerCase()})),console.log("[Admin Dashboard] Filtered users count:",te.length),te},enabled:!!n&&["SUPER_ADMIN","ADMIN","super_admin","admin"].includes(n.role)&&r==="users",refetchInterval:3e4}),{data:P=[],isLoading:w,error:A}=ct({queryKey:["admin-system-logs"],queryFn:async()=>{var q;console.log("[Admin Dashboard] Fetching system logs...");const{data:{session:_}}=await ue.auth.getSession();if(!_)throw new Error("Not authenticated");const{data:Q,error:U}=await ue.functions.invoke("admin-management",{body:{action:"get_system_logs"},headers:{Authorization:`Bearer ${_.access_token}`}});if(console.log("[Admin Dashboard] System logs response:",{data:Q,error:U}),U)throw console.error("[Admin Dashboard] System logs error:",U),U;const te=((q=Q.data)==null?void 0:q.activities)||[];return console.log("[Admin Dashboard] Parsed activities:",te),te},enabled:!!n&&["SUPER_ADMIN","ADMIN","super_admin","admin"].includes(n.role)&&r==="logs",refetchInterval:15e3,retry:(_,Q)=>(console.log("[Admin Dashboard] System logs retry:",_,Q.message),_<3)}),M=Je({mutationFn:async({targetUserId:_,newRole:Q,reason:U})=>{console.log("[Admin Dashboard] Updating user role:",{targetUserId:_,newRole:Q,reason:U});const{data:{session:te}}=await ue.auth.getSession();if(!te)throw new Error("Not authenticated");const{data:q,error:J}=await ue.functions.invoke("admin-management",{body:{action:"update_user_role",targetUserId:_,newRole:Q,reason:U},headers:{Authorization:`Bearer ${te.access_token}`}});if(console.log("[Admin Dashboard] Role update response:",{data:q,error:J}),J)throw console.error("[Admin Dashboard] Role update error:",J),new Error(J.message||"Failed to update user role");return q},onSuccess:_=>{console.log("[Admin Dashboard] Role update successful:",_),ee.success("User role updated successfully"),s.invalidateQueries({queryKey:["admin-all-users"]}),s.invalidateQueries({queryKey:["admin-system-stats"]}),s.invalidateQueries({queryKey:["admin-system-logs"]})},onError:_=>{console.error("[Admin Dashboard] Role update failed:",_),ee.error(_.message||"Failed to update user role")}}),L=(_,Q)=>{const U=prompt("Please provide a reason for this role change:");if(!U||U.trim().length<5){ee.error("A detailed reason (minimum 5 characters) is required for role changes");return}window.confirm(`Are you sure you want to update this user's role to ${Q}?`)&&M.mutate({targetUserId:_,newRole:Q,reason:U.trim()})},R=_=>new Date(_).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),$=_=>{switch((_||"user").toLowerCase()){case"super_admin":return"bg-purple-100 text-purple-700";case"admin":return"bg-red-100 text-red-700";case"contributor":return"bg-blue-100 text-blue-700";case"user":case"requester":return"bg-slate-100 text-slate-700";default:return"bg-slate-100 text-slate-700"}},W=_=>{switch((_||"user").toLowerCase()){case"super_admin":return"Super Admin";case"admin":return"Admin";case"contributor":return"Contributor";case"user":case"requester":return"User";default:return"User"}},se=_=>{var Q;return((Q=_==null?void 0:_.profile_info)==null?void 0:Q.is_founder)===!0||(_==null?void 0:_.role_hierarchy_level)===5},le=_=>{if(se(_)||_.id===n.id)return!1;const Q=n.role_hierarchy_level||1,U=_.role_hierarchy_level||1;return Q>U},we=[{id:"overview",label:"Overview",icon:Yu},{id:"users",label:"User Management",icon:gr},{id:"logs",label:"System Activity Logs",icon:nr}];return y&&console.error("Stats error:",y),N&&console.error("Users error:",N),A&&console.error("Logs error:",A),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Admin Dashboard"}),i.jsx("p",{className:"text-slate-600",children:"Platform administration and management"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(yr,{className:"h-6 w-6 text-red-600"}),i.jsx("span",{className:"text-sm font-medium text-red-600",children:(n.role||"").toLowerCase()==="super_admin"?"Super Administrator":"Administrator"})]})]}),i.jsx("div",{className:"bg-white rounded-2xl p-1 shadow-sm border border-slate-200 inline-flex",children:we.map(_=>{const Q=_.icon;return i.jsxs("button",{onClick:()=>l(_.id),className:`px-6 py-3 rounded-xl text-sm font-medium transition-colors flex items-center ${r===_.id?"bg-red-600 text-white":"text-slate-600 hover:text-slate-900"}`,children:[i.jsx(Q,{className:"h-4 w-4 mr-2"}),_.label]},_.id)})}),r==="overview"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Total Users"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:g?i.jsx("div",{className:"w-8 h-6 bg-slate-200 rounded animate-pulse"}):(p==null?void 0:p.totalUsers)||0})]}),i.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:i.jsx(gr,{className:"h-6 w-6 text-blue-600"})})]})}),i.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Total Resources"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:g?i.jsx("div",{className:"w-8 h-6 bg-slate-200 rounded animate-pulse"}):(p==null?void 0:p.totalResources)||0})]}),i.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:i.jsx(ft,{className:"h-6 w-6 text-green-600"})})]})}),i.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Total Requests"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:g?i.jsx("div",{className:"w-8 h-6 bg-slate-200 rounded animate-pulse"}):(p==null?void 0:p.totalRequests)||0})]}),i.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:i.jsx(ii,{className:"h-6 w-6 text-purple-600"})})]})}),i.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Total Messages"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:g?i.jsx("div",{className:"w-8 h-6 bg-slate-200 rounded animate-pulse"}):(p==null?void 0:p.totalMessages)||0})]}),i.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:i.jsx(kt,{className:"h-6 w-6 text-orange-600"})})]})})]}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"User Role Distribution"}),g?i.jsx("div",{className:"space-y-3",children:[...Array(4)].map((_,Q)=>i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-2 bg-slate-200 rounded w-full"})]},Q))}):i.jsx("div",{className:"space-y-3",children:Object.entries((p==null?void 0:p.roleDistribution)||{}).map(([_,Q])=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center space-x-2",children:i.jsx("span",{className:`inline-flex px-2 py-1 rounded text-xs font-medium ${$(_)}`,children:W(_)})}),i.jsx("span",{className:"text-sm font-medium text-slate-900",children:Q})]},_))})]}),i.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Recent Admin Activity"}),g?i.jsx("div",{className:"space-y-3",children:[...Array(5)].map((_,Q)=>i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]},Q))}):(()=>{console.log("[AdminDashboard] systemStats:",p),console.log("[AdminDashboard] recentActivity:",p==null?void 0:p.recentActivity);const _=(p==null?void 0:p.recentActivity)||[];return console.log("[AdminDashboard] activities array:",_),_&&_.length>0?i.jsx("div",{className:"space-y-3",children:_.map((Q,U)=>{var te,q,J;return console.log("[AdminDashboard] rendering activity:",Q),i.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-slate-50 rounded-lg",children:[i.jsx("div",{className:"bg-red-100 p-2 rounded-lg flex-shrink-0",children:i.jsx(nr,{className:"h-4 w-4 text-red-600"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-slate-900",children:Q.action}),i.jsx("p",{className:"text-xs text-slate-500",children:R(Q.timestamp)}),((te=Q.details)==null?void 0:te.reason)&&i.jsx("p",{className:"text-xs text-slate-600 mt-1 truncate",children:Q.details.reason}),((q=Q.details)==null?void 0:q.newValue)&&((J=Q.details)==null?void 0:J.oldValue)&&i.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[Q.details.oldValue," → ",Q.details.newValue]})]})]},Q.id||U)})}):i.jsxs("div",{className:"text-center py-6",children:[i.jsx(nr,{className:"h-8 w-8 text-slate-300 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-500",children:"No recent admin activity found"}),i.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Role changes and admin actions will appear here"})]})})()]})]})]}),r==="users"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(ai,{className:"absolute left-3 top-3 h-5 w-5 text-slate-400"}),i.jsx("input",{type:"text",placeholder:"Search users...",value:o,onChange:_=>u(_.target.value),className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),i.jsxs("select",{value:d,onChange:_=>m(_.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500",children:[i.jsx("option",{value:"all",children:"All Roles"}),i.jsx("option",{value:"super_admin",children:"Super Admin"}),i.jsx("option",{value:"admin",children:"Admin"}),i.jsx("option",{value:"contributor",children:"Contributor"}),i.jsx("option",{value:"user",children:"User"})]}),i.jsx("div",{className:"flex items-center justify-end",children:i.jsxs("span",{className:"text-sm text-slate-600",children:[b.length," user",b.length!==1?"s":""," found"]})})]})}),i.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:E?i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"space-y-4",children:[...Array(5)].map((_,Q)=>i.jsxs("div",{className:"animate-pulse flex items-center space-x-4",children:[i.jsx("div",{className:"w-10 h-10 bg-slate-200 rounded-full"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/4 mb-2"}),i.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/3"})]}),i.jsx("div",{className:"w-20 h-6 bg-slate-200 rounded"})]},Q))})}):b.length>0?i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-slate-600",children:"User"}),i.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-slate-600",children:"Role"}),i.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-slate-600",children:"Joined"}),i.jsx("th",{className:"text-left py-3 px-6 text-sm font-medium text-slate-600",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200",children:b.map(_=>{var Q;return i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"py-4 px-6",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx("span",{className:"text-sm font-medium text-blue-600",children:(Q=_.name||_.email)==null?void 0:Q.charAt(0).toUpperCase()})}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsxs("p",{className:"text-sm font-medium text-slate-900 flex items-center",children:[_.name||"Unnamed User",se(_)&&i.jsx("span",{className:"ml-2 inline-flex px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded-full",children:"Founder"})]}),i.jsx("p",{className:"text-sm text-slate-500 truncate",children:_.email})]})]})}),i.jsx("td",{className:"py-4 px-6",children:i.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${$(_.role)}`,children:W(_.role)})}),i.jsx("td",{className:"py-4 px-6",children:i.jsx("span",{className:"text-sm text-slate-600",children:R(_.created_at)})}),i.jsx("td",{className:"py-4 px-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[le(_)&&i.jsxs("select",{value:_.role,onChange:U=>L(_.id,U.target.value),className:"px-2 py-1 border border-slate-300 rounded text-xs focus:outline-none focus:ring-1 focus:ring-red-500",disabled:M.isPending,children:[i.jsx("option",{value:"user",children:"User"}),i.jsx("option",{value:"contributor",children:"Contributor"}),i.jsx("option",{value:"admin",children:"Admin"}),(n.role_hierarchy_level||0)>=4&&i.jsx("option",{value:"super_admin",children:"Super Admin"})]}),_.id===n.id&&i.jsx("span",{className:"text-xs text-slate-500",children:"(You)"}),se(_)&&i.jsx("span",{className:"text-xs text-purple-600",children:"(Protected)"}),M.isPending&&i.jsx(eg,{className:"h-4 w-4 text-slate-400 animate-spin"})]})})]},_.id)})})]})}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx(gr,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-500",children:"No users found"})]})})]}),r==="logs"&&i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200",children:[i.jsx("div",{className:"p-6 border-b border-slate-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"System Activity Logs"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Comprehensive activity tracking across the platform"})]}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsxs("div",{className:"flex items-center space-x-1 text-xs text-slate-500",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),i.jsx("span",{children:"Live Updates"})]})})]})}),i.jsx("div",{className:"max-h-96 overflow-y-auto",children:A?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(fa,{className:"h-12 w-12 text-red-300 mx-auto mb-3"}),i.jsx("p",{className:"text-lg font-medium text-red-600 mb-1",children:"Failed to Load System Logs"}),i.jsxs("p",{className:"text-sm text-red-500",children:["Error: ",(A==null?void 0:A.message)||"Unknown error"]}),i.jsx("button",{onClick:()=>s.invalidateQueries({queryKey:["admin-system-logs"]}),className:"mt-2 px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",children:"Retry"})]}):w?i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"space-y-4",children:[...Array(10)].map((_,Q)=>i.jsxs("div",{className:"animate-pulse flex items-start space-x-4",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-200 rounded-full"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]})]},Q))})}):P.length>0?i.jsxs("div",{className:"divide-y divide-slate-200",children:[P.map(_=>i.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${_.type==="admin_activity"?_.severity==="warning"?"bg-red-100":"bg-purple-100":_.type==="user_activity"?"bg-blue-100":"bg-slate-100"}`,children:_.type==="admin_activity"?i.jsx(yr,{className:`h-4 w-4 ${_.severity==="warning"?"text-red-600":"text-purple-600"}`}):_.type==="user_activity"?i.jsx(gr,{className:"h-4 w-4 text-blue-600"}):i.jsx(nr,{className:"h-4 w-4 text-slate-600"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"text-sm font-medium text-slate-900",children:_.action||"Unknown Action"}),i.jsx("span",{className:"text-xs text-slate-500",children:_.timestamp?R(_.timestamp):"Unknown Time"})]}),i.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"text-xs text-slate-500",children:"By:"}),i.jsx("span",{className:"text-xs font-medium text-slate-700",children:_.user_name||"Unknown User"}),i.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${$(_.user_role)}`,children:W(_.user_role)})]}),_.target_name&&i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("span",{className:"text-xs text-slate-500",children:"Target:"}),i.jsx("span",{className:"text-xs font-medium text-slate-700",children:_.target_name})]}),i.jsx("div",{className:"flex items-center space-x-1",children:i.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${_.type==="admin_activity"?"bg-purple-50 text-purple-700":_.type==="user_activity"?"bg-blue-50 text-blue-700":"bg-slate-50 text-slate-700"}`,children:(_.type||"system").replace("_"," ").toUpperCase()})}),_.severity==="warning"&&i.jsx(fa,{className:"h-4 w-4 text-red-500"})]}),_.details&&Object.keys(_.details).length>0&&i.jsxs("details",{className:"mt-3",children:[i.jsxs("summary",{className:"cursor-pointer text-xs text-slate-500 hover:text-slate-700 flex items-center space-x-1",children:[i.jsx(ni,{className:"h-3 w-3"}),i.jsx("span",{children:"View Details"})]}),i.jsxs("div",{className:"mt-2 p-3 bg-slate-50 rounded-lg border",children:[_.details.reason&&i.jsxs("div",{className:"mb-2",children:[i.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Reason:"}),i.jsx("p",{className:"text-xs text-slate-800 mt-1",children:_.details.reason})]}),_.details.old_value&&i.jsxs("div",{className:"mb-2",children:[i.jsx("span",{className:"text-xs font-medium text-slate-600",children:"From:"}),i.jsx("p",{className:"text-xs text-slate-800 font-mono",children:_.details.old_value})]}),_.details.new_value&&i.jsxs("div",{className:"mb-2",children:[i.jsx("span",{className:"text-xs font-medium text-slate-600",children:"To:"}),i.jsx("p",{className:"text-xs text-slate-800 font-mono",children:_.details.new_value})]}),_.details.ip_address&&i.jsxs("div",{className:"text-xs text-slate-500",children:["IP: ",_.details.ip_address]}),_.details.success===!1&&i.jsxs("div",{className:"flex items-center space-x-1 text-xs text-red-600",children:[i.jsx(Jp,{className:"h-3 w-3"}),i.jsx("span",{children:"Operation Failed"})]}),_.details.success===!0&&i.jsxs("div",{className:"flex items-center space-x-1 text-xs text-green-600",children:[i.jsx(Gp,{className:"h-3 w-3"}),i.jsx("span",{children:"Operation Successful"})]})]})]})]})]})},_.id)),i.jsx("div",{className:"p-4 text-center border-t border-slate-200",children:i.jsxs("p",{className:"text-xs text-slate-500",children:["Showing latest ",P.length," activities • Auto-refreshes every 15 seconds"]})})]}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx(nr,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),i.jsx("p",{className:"text-lg font-medium text-slate-600 mb-1",children:"No System Logs Found"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Activity logs will appear here as actions are performed on the platform"})]})})]})]})}function _1(){const{user:n}=vt(),s=ms(),[r,l]=O.useState(""),[o,u]=O.useState(null),[d,m]=O.useState(null),{data:p=[],isLoading:g,error:y}=ct({queryKey:["admin-conversations"],queryFn:async()=>{const{data:w,error:A}=await ue.functions.invoke("messaging-system",{body:{action:"admin_get_all_conversations"}});if(A)throw A;return w.data||[]},enabled:!!n&&n.role==="SUPER_ADMIN",refetchInterval:3e4}),{data:v=[]}=ct({queryKey:["admin-conversation-messages",o],queryFn:async()=>{if(!o)return[];const{data:w,error:A}=await ue.functions.invoke("messaging-system",{body:{action:"admin_get_conversation_messages",conversationId:o}});if(A)throw A;return w.data||[]},enabled:!!o}),b=Je({mutationFn:async w=>{const{data:A,error:M}=await ue.functions.invoke("messaging-system",{body:{action:"admin_delete_conversation",conversationId:w}});if(M)throw M;return A},onSuccess:(w,A)=>{ee.success("Conversation deleted successfully"),s.invalidateQueries({queryKey:["admin-conversations"]}),o===A&&u(null),m(null)},onError:w=>{ee.error(`Failed to delete conversation: ${w.message}`),m(null)}}),E=w=>{d===w?b.mutate(w):(m(w),setTimeout(()=>{m(null)},5e3))},N=p.filter(w=>{const A=r.toLowerCase();return w.participant1_name.toLowerCase().includes(A)||w.participant1_email.toLowerCase().includes(A)||w.participant2_name.toLowerCase().includes(A)||w.participant2_email.toLowerCase().includes(A)||w.last_message_content.toLowerCase().includes(A)}),P=w=>new Date(w).toLocaleString();return!n||n.role!=="SUPER_ADMIN"?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(fa,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Access Denied"}),i.jsx("p",{className:"text-slate-600",children:"Super admin privileges required to access this page."})]})}):y?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(fa,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Error Loading Conversations"}),i.jsx("p",{className:"text-slate-600",children:y.message})]})}):i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(gr,{className:"h-8 w-8 text-blue-600"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Conversation Management"}),i.jsx("p",{className:"text-slate-600",children:"View and manage all user conversations"})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-slate-500",children:"Total Conversations"}),i.jsx("p",{className:"text-3xl font-bold text-blue-600",children:p.length})]})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:i.jsxs("div",{className:"relative",children:[i.jsx(ai,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-5 w-5"}),i.jsx("input",{type:"text",placeholder:"Search conversations by participant name, email, or message content...",value:r,onChange:w=>l(w.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200",children:[i.jsxs("div",{className:"p-6 border-b border-slate-200",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Conversations"}),i.jsxs("p",{className:"text-sm text-slate-600",children:["Showing ",N.length," conversations"]})]}),i.jsx("div",{className:"divide-y divide-slate-200 max-h-96 overflow-y-auto",children:g?i.jsx("div",{className:"flex items-center justify-center p-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):N.length===0?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx(kt,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-500",children:"No conversations found"})]}):N.map(w=>i.jsx("div",{className:`p-4 hover:bg-slate-50 transition-colors cursor-pointer ${o===w.exchange_id?"bg-blue-50 border-r-4 border-blue-500":""}`,onClick:()=>u(w.exchange_id),children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-slate-900 truncate",children:w.participant1_name}),i.jsx("span",{className:"text-slate-400",children:"↔"}),i.jsx("span",{className:"text-sm font-medium text-slate-900 truncate",children:w.participant2_name})]}),i.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[i.jsx("span",{className:"text-xs text-slate-500 truncate",children:w.participant1_email}),i.jsx("span",{className:"text-xs text-slate-500 truncate",children:w.participant2_email})]}),i.jsx("p",{className:"text-sm text-slate-600 truncate",children:w.last_message_content}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsxs("span",{className:"text-xs text-slate-500",children:[w.message_count," message",w.message_count!==1?"s":""]}),i.jsx("span",{className:"text-xs text-slate-500",children:P(w.last_message_at)})]})]}),i.jsxs("div",{className:"flex items-center space-x-2 ml-3",children:[i.jsx("button",{onClick:A=>{A.stopPropagation(),u(w.exchange_id)},className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"View conversation",children:i.jsx(ni,{className:"h-4 w-4"})}),i.jsx("button",{onClick:A=>{A.stopPropagation(),E(w.exchange_id)},className:`p-2 rounded-lg transition-colors ${d===w.exchange_id?"text-white bg-red-600 hover:bg-red-700":"text-slate-400 hover:text-red-600 hover:bg-red-100"}`,title:d===w.exchange_id?"Click again to confirm deletion":"Delete conversation",disabled:b.isPending,children:i.jsx(li,{className:"h-4 w-4"})})]})]})},w.exchange_id))})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200",children:[i.jsxs("div",{className:"p-6 border-b border-slate-200",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Messages"}),i.jsx("p",{className:"text-sm text-slate-600",children:o?"Select a conversation to view messages":"No conversation selected"})]}),i.jsx("div",{className:"p-6",children:o?i.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto",children:v.map(w=>{const A=p.find(L=>L.exchange_id===o),M=w.sender_id===(A==null?void 0:A.participant1_id)?A.participant1_name:A==null?void 0:A.participant2_name;return i.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"text-sm font-medium text-slate-900",children:M}),i.jsx("span",{className:"text-xs text-slate-500",children:"→"}),i.jsx("span",{className:"text-xs text-slate-500",children:w.receiver_id})]}),i.jsx("span",{className:"text-xs text-slate-500",children:P(w.created_at)})]}),i.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:w.content}),w.image_url&&i.jsx("img",{src:w.image_url,alt:"Message attachment",className:"mt-2 max-w-xs rounded-lg border border-slate-200"})]},w.id)})}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(kt,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-500",children:"Select a conversation to view messages"})]})})]})]})]})}const N1={id:"1",text:"Hello! I am your AI assistant for the Resource Exchange platform. Ask me anything about sharing resources, using features, or finding what you need!",isBot:!0,timestamp:new Date};function k1(){const[n,s]=O.useState(!1),[r,l]=O.useState(!1),[o,u]=O.useState([N1]),[d,m]=O.useState(""),[p,g]=O.useState(!1),y=async()=>{if(!d.trim()||p)return;const b={id:Date.now().toString(),text:d,isBot:!1,timestamp:new Date};u(N=>[...N,b]),m(""),g(!0);const E={id:(Date.now()+1).toString(),text:"Thinking...",isBot:!0,timestamp:new Date,isLoading:!0};u(N=>[...N,E]);try{const{data:N,error:P}=await ue.functions.invoke("ai-assistant",{body:{action:"chatbot_conversation",text:d}});if(u(A=>A.filter(M=>!M.isLoading)),P)throw P;const w={id:(Date.now()+2).toString(),text:N.data.response||"I apologize, but I encountered an issue. Please try again.",isBot:!0,timestamp:new Date};u(A=>[...A,w])}catch(N){console.error("Chatbot error:",N),u(w=>w.filter(A=>!A.isLoading));const P={id:(Date.now()+3).toString(),text:"I apologize, but I encountered an issue. Please try again or check your connection.",isBot:!0,timestamp:new Date};u(w=>[...w,P])}finally{g(!1)}},v=b=>{b.key==="Enter"&&!b.shiftKey&&(b.preventDefault(),y())};return n?i.jsxs("div",{className:"fixed bottom-4 right-4 w-80 bg-white rounded-lg shadow-xl border border-slate-200 z-50",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 bg-blue-600 text-white rounded-t-lg",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(kt,{className:"h-5 w-5"}),i.jsx("span",{className:"font-medium",children:"AI Assistant"})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>l(!r),className:"text-blue-100 hover:text-white transition-colors",children:i.jsx(Zp,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>s(!1),className:"text-blue-100 hover:text-white transition-colors",children:i.jsx(As,{className:"h-4 w-4"})})]})]}),!r&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"h-80 overflow-y-auto p-4 space-y-3",children:o.map(b=>i.jsx("div",{className:`flex ${b.isBot?"justify-start":"justify-end"}`,children:i.jsx("div",{className:`max-w-xs p-3 rounded-lg text-sm ${b.isBot?b.isLoading?"bg-blue-50 text-blue-600 animate-pulse":"bg-slate-100 text-slate-800":"bg-blue-600 text-white"}`,children:b.text})},b.id))}),i.jsxs("div",{className:"p-4 border-t border-slate-200",children:[i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("input",{type:"text",value:d,onChange:b=>m(b.target.value),onKeyPress:v,placeholder:"Ask me anything...",disabled:p,className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm disabled:opacity-50"}),i.jsx("button",{onClick:y,disabled:!d.trim()||p,className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i.jsx(tg,{className:"h-4 w-4"})})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Press Enter to send • Powered by AI"})]})]})]}):i.jsxs("button",{onClick:()=>s(!0),className:"fixed bottom-4 right-4 bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 transition-colors z-50 group","aria-label":"Open chat support",children:[i.jsx(kt,{className:"h-6 w-6"}),i.jsx("div",{className:"absolute bottom-full right-0 mb-2 px-2 py-1 bg-slate-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"Need help? Chat with AI!"})]})}function Fr({children:n}){var v,b,E;const[s,r]=O.useState(!1),{user:l,signOut:o}=vt(),u=en(),d=tn(),m=async()=>{try{await o(),ee.success("Signed out successfully"),d("/")}catch{ee.error("Failed to sign out")}},p=[{name:"Dashboard",href:"/dashboard",icon:mb},{name:"Resources",href:"/resources",icon:cb},{name:"Requests",href:"/requests",icon:ii},{name:"Messages",href:"/messages",icon:kt},{name:"Profile",href:"/profile",icon:hi}],g=[{name:"Admin Panel",href:"/admin",icon:yr}],y=N=>u.pathname===N;return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[i.jsxs("div",{className:`fixed inset-0 z-50 lg:hidden ${s?"":"pointer-events-none"}`,children:[i.jsx("div",{className:`fixed inset-0 bg-slate-600 bg-opacity-75 transition-opacity ${s?"opacity-100":"opacity-0"}`,onClick:()=>r(!1)}),i.jsx("div",{className:`fixed inset-y-0 left-0 flex w-64 transform transition-transform ${s?"translate-x-0":"-translate-x-full"}`,children:i.jsxs("div",{className:"flex flex-col bg-white shadow-xl",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[i.jsxs(Ge,{to:"/dashboard",className:"flex items-center space-x-2",children:[i.jsx(ft,{className:"h-6 w-6 text-blue-600"}),i.jsx("span",{className:"font-bold text-slate-900",children:"CRE"})]}),i.jsx("button",{onClick:()=>r(!1),className:"text-slate-400 hover:text-slate-600",children:i.jsx(As,{className:"h-6 w-6"})})]}),i.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-2",children:[p.map(N=>i.jsxs(Ge,{to:N.href,onClick:()=>r(!1),className:`flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors ${y(N.href)?"bg-blue-100 text-blue-700":"text-slate-600 hover:text-slate-900 hover:bg-slate-100"}`,children:[i.jsx(N.icon,{className:"h-5 w-5 mr-3"}),N.name]},N.name)),(l==null?void 0:l.role)&&["SUPER_ADMIN","ADMIN","super_admin","admin"].includes(l.role)&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"border-t border-slate-200 my-4"}),g.map(N=>i.jsxs(Ge,{to:N.href,onClick:()=>r(!1),className:`flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors ${y(N.href)?"bg-red-100 text-red-700":"text-slate-600 hover:text-slate-900 hover:bg-slate-100"}`,children:[i.jsx(N.icon,{className:"h-5 w-5 mr-3"}),N.name]},N.name))]})]})]})})]}),i.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:i.jsxs("div",{className:"flex flex-col bg-white shadow-lg border-r border-slate-200",children:[i.jsx("div",{className:"flex items-center p-6 border-b border-slate-200",children:i.jsxs(Ge,{to:"/dashboard",className:"flex items-center space-x-2",children:[i.jsx(ft,{className:"h-8 w-8 text-blue-600"}),i.jsx("span",{className:"text-xl font-bold text-slate-900",children:"CRE"})]})}),i.jsxs("nav",{className:"flex-1 px-4 py-6 space-y-2",children:[p.map(N=>i.jsxs(Ge,{to:N.href,className:`flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors ${y(N.href)?"bg-blue-100 text-blue-700":"text-slate-600 hover:text-slate-900 hover:bg-slate-100"}`,children:[i.jsx(N.icon,{className:"h-5 w-5 mr-3"}),N.name]},N.name)),(l==null?void 0:l.role)&&["SUPER_ADMIN","ADMIN","super_admin","admin"].includes(l.role)&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"border-t border-slate-200 my-4"}),g.map(N=>i.jsxs(Ge,{to:N.href,className:`flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors ${y(N.href)?"bg-red-100 text-red-700":"text-slate-600 hover:text-slate-900 hover:bg-slate-100"}`,children:[i.jsx(N.icon,{className:"h-5 w-5 mr-3"}),N.name]},N.name))]})]})]})}),i.jsxs("div",{className:"lg:pl-64",children:[i.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-slate-200 sticky top-0 z-40",children:i.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 lg:px-8 py-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("button",{onClick:()=>r(!0),className:"text-slate-400 hover:text-slate-600 lg:hidden",children:i.jsx(yb,{className:"h-6 w-6"})}),i.jsx("h1",{className:"text-2xl font-bold text-slate-900 ml-4 lg:ml-0",children:((v=p.find(N=>N.href===u.pathname))==null?void 0:v.name)||((b=g.find(N=>N.href===u.pathname))==null?void 0:b.name)||"Dashboard"})]}),i.jsx("div",{className:"flex items-center space-x-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm font-medium text-slate-900",children:l==null?void 0:l.name}),i.jsx("p",{className:"text-xs text-slate-500",children:(E=l==null?void 0:l.role)==null?void 0:E.replace("_"," ")})]}),i.jsx(oa,{user:l,size:"sm",className:""}),i.jsx("button",{onClick:m,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"Sign out",children:i.jsx(vb,{className:"h-5 w-5"})})]})})]})}),i.jsx("main",{className:"p-4 sm:p-6 lg:p-8",children:n})]}),i.jsx(k1,{})]})}const S1=new Uv({defaultOptions:{queries:{retry:1,staleTime:5*60*1e3}}});function ea({children:n}){const{user:s,loading:r}=vt();return r?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-blue-50",children:i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),i.jsx("p",{className:"text-slate-600",children:"Loading..."})]})}):s?i.jsx(i.Fragment,{children:n}):i.jsx(qn,{to:"/login",replace:!0})}function Vm({children:n}){const{user:s,loading:r}=vt();return r?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-blue-50",children:i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),i.jsx("p",{className:"text-slate-600",children:"Loading..."})]})}):!s||!["SUPER_ADMIN","ADMIN","super_admin","admin"].includes(s.role)?i.jsx(qn,{to:"/dashboard",replace:!0}):i.jsx(i.Fragment,{children:n})}function C1(){const{user:n}=vt();return i.jsxs(uv,{children:[i.jsx(Ut,{path:"/",element:n?i.jsx(qn,{to:"/dashboard",replace:!0}):i.jsx(o1,{})}),i.jsx(Ut,{path:"/login",element:n?i.jsx(qn,{to:"/dashboard",replace:!0}):i.jsx(c1,{})}),i.jsx(Ut,{path:"/register",element:n?i.jsx(qn,{to:"/dashboard",replace:!0}):i.jsx(u1,{})}),i.jsx(Ut,{path:"/auth/callback",element:i.jsx(d1,{})}),i.jsx(Ut,{path:"/dashboard",element:i.jsx(ea,{children:i.jsx(Fr,{children:i.jsx(h1,{})})})}),i.jsx(Ut,{path:"/resources",element:i.jsx(ea,{children:i.jsx(Fr,{children:i.jsx(x1,{})})})}),i.jsx(Ut,{path:"/requests",element:i.jsx(ea,{children:i.jsx(Fr,{children:i.jsx(v1,{})})})}),i.jsx(Ut,{path:"/messages",element:i.jsx(ea,{children:i.jsx(Fr,{children:i.jsx(y1,{})})})}),i.jsx(Ut,{path:"/profile",element:i.jsx(ea,{children:i.jsx(Fr,{children:i.jsx(b1,{})})})}),i.jsx(Ut,{path:"/admin",element:i.jsx(Vm,{children:i.jsx(Fr,{children:i.jsx(j1,{})})})}),i.jsx(Ut,{path:"/admin/conversations",element:i.jsx(Vm,{children:i.jsx(Fr,{children:i.jsx(_1,{})})})}),i.jsx(Ut,{path:"*",element:i.jsx(qn,{to:"/",replace:!0})})]})}function E1(){return i.jsx(Bv,{client:S1,children:i.jsx(ib,{children:i.jsx(vv,{children:i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:i.jsx(C1,{})})})})})}xx.createRoot(document.getElementById("root")).render(i.jsx(O.StrictMode,{children:i.jsx(yx,{children:i.jsx(E1,{})})}));
